{"version":3,"sources":["../src/createGlobal.ts"],"sourcesContent":["import type { CreateGlobal, PayloadRequest } from 'payload'\n\nimport type { MongooseAdapter } from './index.js'\n\nimport sanitizeInternalFields from './utilities/sanitizeInternalFields.js'\nimport { withSession } from './withSession.js'\n\nexport const createGlobal: CreateGlobal = async function createGlobal(\n  this: MongooseAdapter,\n  { slug, data, req = {} as PayloadRequest },\n) {\n  const Model = this.globals\n  const global = {\n    globalType: slug,\n    ...data,\n  }\n  const options = await withSession(this, req)\n\n  let [result] = (await Model.create([global], options)) as any\n\n  result = JSON.parse(JSON.stringify(result))\n\n  // custom id type reset\n  result.id = result._id\n  result = sanitizeInternalFields(result)\n\n  return result\n}\n"],"names":["sanitizeInternalFields","withSession","createGlobal","slug","data","req","Model","globals","global","globalType","options","result","create","JSON","parse","stringify","id","_id"],"mappings":"AAIA,OAAOA,4BAA4B,wCAAuC;AAC1E,SAASC,WAAW,QAAQ,mBAAkB;AAE9C,OAAO,MAAMC,eAA6B,eAAeA,aAEvD,EAAEC,IAAI,EAAEC,IAAI,EAAEC,MAAM,CAAC,CAAmB,EAAE;IAE1C,MAAMC,QAAQ,IAAI,CAACC,OAAO;IAC1B,MAAMC,SAAS;QACbC,YAAYN;QACZ,GAAGC,IAAI;IACT;IACA,MAAMM,UAAU,MAAMT,YAAY,IAAI,EAAEI;IAExC,IAAI,CAACM,OAAO,GAAI,MAAML,MAAMM,MAAM,CAAC;QAACJ;KAAO,EAAEE;IAE7CC,SAASE,KAAKC,KAAK,CAACD,KAAKE,SAAS,CAACJ;IAEnC,uBAAuB;IACvBA,OAAOK,EAAE,GAAGL,OAAOM,GAAG;IACtBN,SAASX,uBAAuBW;IAEhC,OAAOA;AACT,EAAC"}