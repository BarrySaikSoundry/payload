{"version":3,"sources":["../../src/utilities/formatBreadcrumb.ts"],"sourcesContent":["import type { CollectionConfig } from 'payload'\n\nimport type { Breadcrumb, NestedDocsPluginConfig } from '../types.js'\n\nexport const formatBreadcrumb = (\n  pluginConfig: NestedDocsPluginConfig,\n  collection: CollectionConfig,\n  docs: Array<Record<string, unknown>>,\n): Breadcrumb => {\n  let url: string | undefined = undefined\n  let label: string\n\n  const lastDoc = docs[docs.length - 1]\n\n  if (typeof pluginConfig?.generateURL === 'function') {\n    url = pluginConfig.generateURL(docs, lastDoc)\n  }\n\n  if (typeof pluginConfig?.generateLabel === 'function') {\n    label = pluginConfig.generateLabel(docs, lastDoc)\n  } else {\n    const useAsTitle = collection?.admin?.useAsTitle || 'id'\n    label = lastDoc[useAsTitle] as string\n  }\n\n  return {\n    doc: lastDoc.id as string,\n    label,\n    url,\n  }\n}\n"],"names":["formatBreadcrumb","pluginConfig","collection","docs","url","undefined","label","lastDoc","length","generateURL","generateLabel","useAsTitle","admin","doc","id"],"mappings":"AAIA,OAAO,MAAMA,mBAAmB,CAC9BC,cACAC,YACAC;IAEA,IAAIC,MAA0BC;IAC9B,IAAIC;IAEJ,MAAMC,UAAUJ,IAAI,CAACA,KAAKK,MAAM,GAAG,EAAE;IAErC,IAAI,OAAOP,cAAcQ,gBAAgB,YAAY;QACnDL,MAAMH,aAAaQ,WAAW,CAACN,MAAMI;IACvC;IAEA,IAAI,OAAON,cAAcS,kBAAkB,YAAY;QACrDJ,QAAQL,aAAaS,aAAa,CAACP,MAAMI;IAC3C,OAAO;QACL,MAAMI,aAAaT,YAAYU,OAAOD,cAAc;QACpDL,QAAQC,OAAO,CAACI,WAAW;IAC7B;IAEA,OAAO;QACLE,KAAKN,QAAQO,EAAE;QACfR;QACAF;IACF;AACF,EAAC"}