{"version":3,"sources":["../../../src/views/Verify/index.tsx"],"sourcesContent":["import type { AdminViewProps } from 'payload'\n\nimport { redirect } from 'next/navigation.js'\nimport React from 'react'\n\nimport { Logo } from '../../elements/Logo/index.js'\nimport './index.scss'\n\nexport const verifyBaseClass = 'verify'\n\nexport { generateVerifyMetadata } from './meta.js'\n\nexport const Verify: React.FC<AdminViewProps> = async ({\n  initPageResult,\n  params,\n  searchParams,\n}) => {\n  // /:collectionSlug/verify/:token\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [collectionSlug, verify, token] = params.segments\n  const { locale, permissions, req } = initPageResult\n\n  const {\n    i18n,\n    payload: { config },\n    payload,\n    user,\n  } = req\n\n  const {\n    routes: { admin: adminRoute },\n  } = config\n\n  let textToRender\n\n  try {\n    await req.payload.verifyEmail({\n      collection: collectionSlug,\n      token,\n    })\n\n    return redirect(`${adminRoute}/login`)\n  } catch (e) {\n    // already verified\n    if (e?.status === 202) redirect(`${adminRoute}/login`)\n    textToRender = req.t('authentication:unableToVerify')\n  }\n\n  return (\n    <React.Fragment>\n      <div className={`${verifyBaseClass}__brand`}>\n        <Logo\n          i18n={i18n}\n          locale={locale}\n          params={params}\n          payload={payload}\n          permissions={permissions}\n          searchParams={searchParams}\n          user={user}\n        />\n      </div>\n      <h2>{textToRender}</h2>\n    </React.Fragment>\n  )\n}\n"],"names":["redirect","React","Logo","verifyBaseClass","generateVerifyMetadata","Verify","initPageResult","params","searchParams","collectionSlug","verify","token","segments","locale","permissions","req","i18n","payload","config","user","routes","admin","adminRoute","textToRender","verifyEmail","collection","e","status","t","Fragment","div","className","h2"],"mappings":";AAEA,SAASA,QAAQ,QAAQ,qBAAoB;AAC7C,OAAOC,WAAW,QAAO;AAEzB,SAASC,IAAI,QAAQ,+BAA8B;AAGnD,OAAO,MAAMC,kBAAkB,SAAQ;AAEvC,SAASC,sBAAsB,QAAQ,YAAW;AAElD,OAAO,MAAMC,SAAmC,OAAO,EACrDC,cAAc,EACdC,MAAM,EACNC,YAAY,EACb;IACC,iCAAiC;IACjC,6DAA6D;IAC7D,MAAM,CAACC,gBAAgBC,QAAQC,MAAM,GAAGJ,OAAOK,QAAQ;IACvD,MAAM,EAAEC,MAAM,EAAEC,WAAW,EAAEC,GAAG,EAAE,GAAGT;IAErC,MAAM,EACJU,IAAI,EACJC,SAAS,EAAEC,MAAM,EAAE,EACnBD,OAAO,EACPE,IAAI,EACL,GAAGJ;IAEJ,MAAM,EACJK,QAAQ,EAAEC,OAAOC,UAAU,EAAE,EAC9B,GAAGJ;IAEJ,IAAIK;IAEJ,IAAI;QACF,MAAMR,IAAIE,OAAO,CAACO,WAAW,CAAC;YAC5BC,YAAYhB;YACZE;QACF;QAEA,OAAOX,SAAS,CAAC,EAAEsB,WAAW,MAAM,CAAC;IACvC,EAAE,OAAOI,GAAG;QACV,mBAAmB;QACnB,IAAIA,GAAGC,WAAW,KAAK3B,SAAS,CAAC,EAAEsB,WAAW,MAAM,CAAC;QACrDC,eAAeR,IAAIa,CAAC,CAAC;IACvB;IAEA,qBACE,MAAC3B,MAAM4B,QAAQ;;0BACb,KAACC;gBAAIC,WAAW,CAAC,EAAE5B,gBAAgB,OAAO,CAAC;0BACzC,cAAA,KAACD;oBACCc,MAAMA;oBACNH,QAAQA;oBACRN,QAAQA;oBACRU,SAASA;oBACTH,aAAaA;oBACbN,cAAcA;oBACdW,MAAMA;;;0BAGV,KAACa;0BAAIT;;;;AAGX,EAAC"}