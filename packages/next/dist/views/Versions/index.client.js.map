{"version":3,"sources":["../../../src/views/Versions/index.client.tsx"],"sourcesContent":["'use client'\nimport type { SanitizedCollectionConfig } from 'payload'\n\nimport {\n  type Column,\n  LoadingOverlayToggle,\n  Pagination,\n  PerPage,\n  SetViewActions,\n  Table,\n  useComponentMap,\n  useDocumentInfo,\n  useListQuery,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { useSearchParams } from 'next/navigation.js'\nimport React from 'react'\n\nexport const VersionsViewClient: React.FC<{\n  baseClass: string\n  columns: Column[]\n  fetchURL: string\n  paginationLimits?: SanitizedCollectionConfig['admin']['pagination']['limits']\n}> = (props) => {\n  const { baseClass, columns, paginationLimits } = props\n\n  const { getComponentMap } = useComponentMap()\n  const { collectionSlug, globalSlug } = useDocumentInfo()\n  const { data, handlePerPageChange } = useListQuery()\n\n  const componentMap = getComponentMap({\n    collectionSlug,\n    globalSlug,\n  })\n\n  const searchParams = useSearchParams()\n  const limit = searchParams.get('limit')\n\n  const { i18n } = useTranslation()\n\n  const versionCount = data?.totalDocs || 0\n\n  return (\n    <React.Fragment>\n      <SetViewActions actions={componentMap?.actionsMap?.Edit?.Versions} />\n      <LoadingOverlayToggle name=\"versions\" show={!data} />\n      {versionCount === 0 && (\n        <div className={`${baseClass}__no-versions`}>\n          {i18n.t('version:noFurtherVersionsFound')}\n        </div>\n      )}\n      {versionCount > 0 && (\n        <React.Fragment>\n          <Table columns={columns} data={data?.docs} fieldMap={componentMap?.fieldMap} />\n          <div className={`${baseClass}__page-controls`}>\n            <Pagination\n              hasNextPage={data.hasNextPage}\n              hasPrevPage={data.hasPrevPage}\n              limit={data.limit}\n              nextPage={data.nextPage}\n              numberOfNeighbors={1}\n              page={data.page}\n              prevPage={data.prevPage}\n              totalPages={data.totalPages}\n            />\n            {data?.totalDocs > 0 && (\n              <React.Fragment>\n                <div className={`${baseClass}__page-info`}>\n                  {data.page * data.limit - (data.limit - 1)}-\n                  {data.totalPages > 1 && data.totalPages !== data.page\n                    ? data.limit * data.page\n                    : data.totalDocs}{' '}\n                  {i18n.t('general:of')} {data.totalDocs}\n                </div>\n                <PerPage\n                  handleChange={handlePerPageChange}\n                  limit={limit ? Number(limit) : 10}\n                  limits={paginationLimits}\n                />\n              </React.Fragment>\n            )}\n          </div>\n        </React.Fragment>\n      )}\n    </React.Fragment>\n  )\n}\n"],"names":["LoadingOverlayToggle","Pagination","PerPage","SetViewActions","Table","useComponentMap","useDocumentInfo","useListQuery","useTranslation","useSearchParams","React","VersionsViewClient","props","baseClass","columns","paginationLimits","getComponentMap","collectionSlug","globalSlug","data","handlePerPageChange","componentMap","searchParams","limit","get","i18n","versionCount","totalDocs","Fragment","actions","actionsMap","Edit","Versions","name","show","div","className","t","docs","fieldMap","hasNextPage","hasPrevPage","nextPage","numberOfNeighbors","page","prevPage","totalPages","handleChange","Number","limits"],"mappings":"AAAA;;AAGA,SAEEA,oBAAoB,EACpBC,UAAU,EACVC,OAAO,EACPC,cAAc,EACdC,KAAK,EACLC,eAAe,EACfC,eAAe,EACfC,YAAY,EACZC,cAAc,QACT,iBAAgB;AACvB,SAASC,eAAe,QAAQ,qBAAoB;AACpD,OAAOC,WAAW,QAAO;AAEzB,OAAO,MAAMC,qBAKR,CAACC;IACJ,MAAM,EAAEC,SAAS,EAAEC,OAAO,EAAEC,gBAAgB,EAAE,GAAGH;IAEjD,MAAM,EAAEI,eAAe,EAAE,GAAGX;IAC5B,MAAM,EAAEY,cAAc,EAAEC,UAAU,EAAE,GAAGZ;IACvC,MAAM,EAAEa,IAAI,EAAEC,mBAAmB,EAAE,GAAGb;IAEtC,MAAMc,eAAeL,gBAAgB;QACnCC;QACAC;IACF;IAEA,MAAMI,eAAeb;IACrB,MAAMc,QAAQD,aAAaE,GAAG,CAAC;IAE/B,MAAM,EAAEC,IAAI,EAAE,GAAGjB;IAEjB,MAAMkB,eAAeP,MAAMQ,aAAa;IAExC,qBACE,MAACjB,MAAMkB,QAAQ;;0BACb,KAACzB;gBAAe0B,SAASR,cAAcS,YAAYC,MAAMC;;0BACzD,KAAChC;gBAAqBiC,MAAK;gBAAWC,MAAM,CAACf;;YAC5CO,iBAAiB,mBAChB,KAACS;gBAAIC,WAAW,CAAC,EAAEvB,UAAU,aAAa,CAAC;0BACxCY,KAAKY,CAAC,CAAC;;YAGXX,eAAe,mBACd,MAAChB,MAAMkB,QAAQ;;kCACb,KAACxB;wBAAMU,SAASA;wBAASK,MAAMA,MAAMmB;wBAAMC,UAAUlB,cAAckB;;kCACnE,MAACJ;wBAAIC,WAAW,CAAC,EAAEvB,UAAU,eAAe,CAAC;;0CAC3C,KAACZ;gCACCuC,aAAarB,KAAKqB,WAAW;gCAC7BC,aAAatB,KAAKsB,WAAW;gCAC7BlB,OAAOJ,KAAKI,KAAK;gCACjBmB,UAAUvB,KAAKuB,QAAQ;gCACvBC,mBAAmB;gCACnBC,MAAMzB,KAAKyB,IAAI;gCACfC,UAAU1B,KAAK0B,QAAQ;gCACvBC,YAAY3B,KAAK2B,UAAU;;4BAE5B3B,MAAMQ,YAAY,mBACjB,MAACjB,MAAMkB,QAAQ;;kDACb,MAACO;wCAAIC,WAAW,CAAC,EAAEvB,UAAU,WAAW,CAAC;;4CACtCM,KAAKyB,IAAI,GAAGzB,KAAKI,KAAK,GAAIJ,CAAAA,KAAKI,KAAK,GAAG,CAAA;4CAAG;4CAC1CJ,KAAK2B,UAAU,GAAG,KAAK3B,KAAK2B,UAAU,KAAK3B,KAAKyB,IAAI,GACjDzB,KAAKI,KAAK,GAAGJ,KAAKyB,IAAI,GACtBzB,KAAKQ,SAAS;4CAAE;4CACnBF,KAAKY,CAAC,CAAC;4CAAc;4CAAElB,KAAKQ,SAAS;;;kDAExC,KAACzB;wCACC6C,cAAc3B;wCACdG,OAAOA,QAAQyB,OAAOzB,SAAS;wCAC/B0B,QAAQlC;;;;;;;;;;AAS1B,EAAC"}