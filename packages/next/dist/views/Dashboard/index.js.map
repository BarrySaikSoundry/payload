{"version":3,"sources":["../../../src/views/Dashboard/index.tsx"],"sourcesContent":["import type { EntityToGroup } from '@payloadcms/ui/shared'\nimport type { AdminViewProps } from 'payload'\n\nimport { HydrateClientUser } from '@payloadcms/ui'\nimport { EntityType, RenderCustomComponent, groupNavItems } from '@payloadcms/ui/shared'\nimport LinkImport from 'next/link.js'\nimport React, { Fragment } from 'react'\n\nimport type { DashboardProps } from './Default/index.js'\n\nimport { DefaultDashboard } from './Default/index.js'\n\nexport { generateDashboardMetadata } from './meta.js'\n\nconst Link = (LinkImport.default || LinkImport) as unknown as typeof LinkImport.default\n\nexport const Dashboard: React.FC<AdminViewProps> = ({ initPageResult, params, searchParams }) => {\n  const {\n    locale,\n    permissions,\n    req: {\n      i18n,\n      payload: { config },\n      payload,\n      user,\n    },\n    visibleEntities,\n  } = initPageResult\n\n  const CustomDashboardComponent = config.admin.components?.views?.Dashboard\n\n  const collections = config.collections.filter(\n    (collection) =>\n      permissions?.collections?.[collection.slug]?.read?.permission &&\n      visibleEntities.collections.includes(collection.slug),\n  )\n\n  const globals = config.globals.filter(\n    (global) =>\n      permissions?.globals?.[global.slug]?.read?.permission &&\n      visibleEntities.globals.includes(global.slug),\n  )\n\n  const navGroups = groupNavItems(\n    [\n      ...(collections.map((collection) => {\n        const entityToGroup: EntityToGroup = {\n          type: EntityType.collection,\n          entity: collection,\n        }\n\n        return entityToGroup\n      }) ?? []),\n      ...(globals.map((global) => {\n        const entityToGroup: EntityToGroup = {\n          type: EntityType.global,\n          entity: global,\n        }\n\n        return entityToGroup\n      }) ?? []),\n    ],\n    permissions,\n    i18n,\n  )\n\n  const viewComponentProps: DashboardProps = {\n    Link,\n    i18n,\n    locale,\n    navGroups,\n    params,\n    payload,\n    permissions,\n    searchParams,\n    user,\n    visibleEntities,\n  }\n\n  return (\n    <Fragment>\n      <HydrateClientUser permissions={permissions} user={user} />\n      <RenderCustomComponent\n        CustomComponent={\n          typeof CustomDashboardComponent === 'function' ? CustomDashboardComponent : undefined\n        }\n        DefaultComponent={DefaultDashboard}\n        componentProps={viewComponentProps}\n        serverOnlyProps={{\n          i18n,\n          locale,\n          params,\n          payload,\n          permissions,\n          searchParams,\n          user,\n        }}\n      />\n    </Fragment>\n  )\n}\n"],"names":["HydrateClientUser","EntityType","RenderCustomComponent","groupNavItems","LinkImport","React","Fragment","DefaultDashboard","generateDashboardMetadata","Link","default","Dashboard","initPageResult","params","searchParams","locale","permissions","req","i18n","payload","config","user","visibleEntities","CustomDashboardComponent","admin","components","views","collections","filter","collection","slug","read","permission","includes","globals","global","navGroups","map","entityToGroup","type","entity","viewComponentProps","CustomComponent","undefined","DefaultComponent","componentProps","serverOnlyProps"],"mappings":";AAGA,SAASA,iBAAiB,QAAQ,iBAAgB;AAClD,SAASC,UAAU,EAAEC,qBAAqB,EAAEC,aAAa,QAAQ,wBAAuB;AACxF,OAAOC,gBAAgB,eAAc;AACrC,OAAOC,SAASC,QAAQ,QAAQ,QAAO;AAIvC,SAASC,gBAAgB,QAAQ,qBAAoB;AAErD,SAASC,yBAAyB,QAAQ,YAAW;AAErD,MAAMC,OAAQL,WAAWM,OAAO,IAAIN;AAEpC,OAAO,MAAMO,YAAsC,CAAC,EAAEC,cAAc,EAAEC,MAAM,EAAEC,YAAY,EAAE;IAC1F,MAAM,EACJC,MAAM,EACNC,WAAW,EACXC,KAAK,EACHC,IAAI,EACJC,SAAS,EAAEC,MAAM,EAAE,EACnBD,OAAO,EACPE,IAAI,EACL,EACDC,eAAe,EAChB,GAAGV;IAEJ,MAAMW,2BAA2BH,OAAOI,KAAK,CAACC,UAAU,EAAEC,OAAOf;IAEjE,MAAMgB,cAAcP,OAAOO,WAAW,CAACC,MAAM,CAC3C,CAACC,aACCb,aAAaW,aAAa,CAACE,WAAWC,IAAI,CAAC,EAAEC,MAAMC,cACnDV,gBAAgBK,WAAW,CAACM,QAAQ,CAACJ,WAAWC,IAAI;IAGxD,MAAMI,UAAUd,OAAOc,OAAO,CAACN,MAAM,CACnC,CAACO,SACCnB,aAAakB,SAAS,CAACC,OAAOL,IAAI,CAAC,EAAEC,MAAMC,cAC3CV,gBAAgBY,OAAO,CAACD,QAAQ,CAACE,OAAOL,IAAI;IAGhD,MAAMM,YAAYjC,cAChB;WACMwB,YAAYU,GAAG,CAAC,CAACR;YACnB,MAAMS,gBAA+B;gBACnCC,MAAMtC,WAAW4B,UAAU;gBAC3BW,QAAQX;YACV;YAEA,OAAOS;QACT,MAAM,EAAE;WACJJ,QAAQG,GAAG,CAAC,CAACF;YACf,MAAMG,gBAA+B;gBACnCC,MAAMtC,WAAWkC,MAAM;gBACvBK,QAAQL;YACV;YAEA,OAAOG;QACT,MAAM,EAAE;KACT,EACDtB,aACAE;IAGF,MAAMuB,qBAAqC;QACzChC;QACAS;QACAH;QACAqB;QACAvB;QACAM;QACAH;QACAF;QACAO;QACAC;IACF;IAEA,qBACE,MAAChB;;0BACC,KAACN;gBAAkBgB,aAAaA;gBAAaK,MAAMA;;0BACnD,KAACnB;gBACCwC,iBACE,OAAOnB,6BAA6B,aAAaA,2BAA2BoB;gBAE9EC,kBAAkBrC;gBAClBsC,gBAAgBJ;gBAChBK,iBAAiB;oBACf5B;oBACAH;oBACAF;oBACAM;oBACAH;oBACAF;oBACAO;gBACF;;;;AAIR,EAAC"}