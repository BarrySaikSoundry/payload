{"version":3,"sources":["../../../../../src/views/Edit/Default/SetDocumentTitle/index.tsx"],"sourcesContent":["'use client'\nimport type { ClientCollectionConfig, ClientConfig, ClientGlobalConfig } from 'payload'\n\nimport { useDocumentInfo, useFormFields, useTranslation } from '@payloadcms/ui'\nimport { formatDocTitle } from '@payloadcms/ui/shared'\nimport { useEffect, useRef } from 'react'\n\nexport const SetDocumentTitle: React.FC<{\n  collectionConfig?: ClientCollectionConfig\n  config?: ClientConfig\n  fallback: string\n  globalConfig?: ClientGlobalConfig\n}> = (props) => {\n  const { collectionConfig, config, fallback, globalConfig } = props\n\n  const useAsTitle = collectionConfig?.admin?.useAsTitle\n\n  const field = useFormFields(([fields]) => (useAsTitle && fields && fields?.[useAsTitle]) || null)\n\n  const hasInitialized = useRef(false)\n\n  const { i18n } = useTranslation()\n\n  const { setDocumentTitle } = useDocumentInfo()\n\n  const dateFormatFromConfig = config?.admin?.dateFormat\n\n  const title = formatDocTitle({\n    collectionConfig,\n    data: { id: '' },\n    dateFormat: dateFormatFromConfig,\n    fallback:\n      typeof field === 'string'\n        ? field\n        : typeof field === 'number'\n          ? String(field)\n          : (field?.value as string) || fallback,\n    globalConfig,\n    i18n,\n  })\n\n  useEffect(() => {\n    if (!hasInitialized.current) {\n      hasInitialized.current = true\n      return\n    }\n\n    setDocumentTitle(title)\n  }, [setDocumentTitle, title])\n\n  return null\n}\n"],"names":["useDocumentInfo","useFormFields","useTranslation","formatDocTitle","useEffect","useRef","SetDocumentTitle","props","collectionConfig","config","fallback","globalConfig","useAsTitle","admin","field","fields","hasInitialized","i18n","setDocumentTitle","dateFormatFromConfig","dateFormat","title","data","id","String","value","current"],"mappings":"AAAA;AAGA,SAASA,eAAe,EAAEC,aAAa,EAAEC,cAAc,QAAQ,iBAAgB;AAC/E,SAASC,cAAc,QAAQ,wBAAuB;AACtD,SAASC,SAAS,EAAEC,MAAM,QAAQ,QAAO;AAEzC,OAAO,MAAMC,mBAKR,CAACC;IACJ,MAAM,EAAEC,gBAAgB,EAAEC,MAAM,EAAEC,QAAQ,EAAEC,YAAY,EAAE,GAAGJ;IAE7D,MAAMK,aAAaJ,kBAAkBK,OAAOD;IAE5C,MAAME,QAAQb,cAAc,CAAC,CAACc,OAAO,GAAK,AAACH,cAAcG,UAAUA,QAAQ,CAACH,WAAW,IAAK;IAE5F,MAAMI,iBAAiBX,OAAO;IAE9B,MAAM,EAAEY,IAAI,EAAE,GAAGf;IAEjB,MAAM,EAAEgB,gBAAgB,EAAE,GAAGlB;IAE7B,MAAMmB,uBAAuBV,QAAQI,OAAOO;IAE5C,MAAMC,QAAQlB,eAAe;QAC3BK;QACAc,MAAM;YAAEC,IAAI;QAAG;QACfH,YAAYD;QACZT,UACE,OAAOI,UAAU,WACbA,QACA,OAAOA,UAAU,WACfU,OAAOV,SACP,AAACA,OAAOW,SAAoBf;QACpCC;QACAM;IACF;IAEAb,UAAU;QACR,IAAI,CAACY,eAAeU,OAAO,EAAE;YAC3BV,eAAeU,OAAO,GAAG;YACzB;QACF;QAEAR,iBAAiBG;IACnB,GAAG;QAACH;QAAkBG;KAAM;IAE5B,OAAO;AACT,EAAC"}