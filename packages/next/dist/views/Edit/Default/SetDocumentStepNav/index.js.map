{"version":3,"sources":["../../../../../src/views/Edit/Default/SetDocumentStepNav/index.tsx"],"sourcesContent":["'use client'\nimport type { SanitizedCollectionConfig, SanitizedGlobalConfig } from 'payload'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport {\n  type StepNavItem,\n  useConfig,\n  useDocumentInfo,\n  useEditDepth,\n  useEntityVisibility,\n  useStepNav,\n  useTranslation,\n} from '@payloadcms/ui'\nimport { useEffect } from 'react'\n\nexport const SetDocumentStepNav: React.FC<{\n  collectionSlug?: SanitizedCollectionConfig['slug']\n  globalLabel?: SanitizedGlobalConfig['label']\n  globalSlug?: SanitizedGlobalConfig['slug']\n  id?: number | string\n  pluralLabel?: SanitizedCollectionConfig['labels']['plural']\n  useAsTitle?: SanitizedCollectionConfig['admin']['useAsTitle']\n  view?: string\n}> = (props) => {\n  const { id, collectionSlug, globalSlug, pluralLabel, useAsTitle } = props\n\n  const view: string | undefined = props?.view || undefined\n\n  const { isEditing, isInitializing, title } = useDocumentInfo()\n  const { isEntityVisible } = useEntityVisibility()\n  const isVisible = isEntityVisible({ collectionSlug, globalSlug })\n\n  const { setStepNav } = useStepNav()\n\n  const { i18n, t } = useTranslation()\n\n  const {\n    routes: { admin },\n  } = useConfig()\n\n  const drawerDepth = useEditDepth()\n\n  useEffect(() => {\n    const nav: StepNavItem[] = []\n\n    if (!isInitializing) {\n      if (collectionSlug) {\n        nav.push({\n          label: getTranslation(pluralLabel, i18n),\n          url: isVisible ? `${admin}/collections/${collectionSlug}` : undefined,\n        })\n\n        if (isEditing) {\n          nav.push({\n            label: (useAsTitle && useAsTitle !== 'id' && title) || `${id}`,\n            url: isVisible ? `${admin}/collections/${collectionSlug}/${id}` : undefined,\n          })\n        } else {\n          nav.push({\n            label: t('general:createNew'),\n          })\n        }\n      } else if (globalSlug) {\n        nav.push({\n          label: title,\n          url: isVisible ? `${admin}/globals/${globalSlug}` : undefined,\n        })\n      }\n\n      if (view) {\n        nav.push({\n          label: view,\n        })\n      }\n\n      if (drawerDepth <= 1) setStepNav(nav)\n    }\n  }, [\n    setStepNav,\n    isInitializing,\n    isEditing,\n    pluralLabel,\n    id,\n    useAsTitle,\n    admin,\n    t,\n    i18n,\n    title,\n    collectionSlug,\n    globalSlug,\n    view,\n    drawerDepth,\n    isVisible,\n  ])\n\n  return null\n}\n"],"names":["getTranslation","useConfig","useDocumentInfo","useEditDepth","useEntityVisibility","useStepNav","useTranslation","useEffect","SetDocumentStepNav","props","id","collectionSlug","globalSlug","pluralLabel","useAsTitle","view","undefined","isEditing","isInitializing","title","isEntityVisible","isVisible","setStepNav","i18n","t","routes","admin","drawerDepth","nav","push","label","url"],"mappings":"AAAA;AAGA,SAASA,cAAc,QAAQ,2BAA0B;AACzD,SAEEC,SAAS,EACTC,eAAe,EACfC,YAAY,EACZC,mBAAmB,EACnBC,UAAU,EACVC,cAAc,QACT,iBAAgB;AACvB,SAASC,SAAS,QAAQ,QAAO;AAEjC,OAAO,MAAMC,qBAQR,CAACC;IACJ,MAAM,EAAEC,EAAE,EAAEC,cAAc,EAAEC,UAAU,EAAEC,WAAW,EAAEC,UAAU,EAAE,GAAGL;IAEpE,MAAMM,OAA2BN,OAAOM,QAAQC;IAEhD,MAAM,EAAEC,SAAS,EAAEC,cAAc,EAAEC,KAAK,EAAE,GAAGjB;IAC7C,MAAM,EAAEkB,eAAe,EAAE,GAAGhB;IAC5B,MAAMiB,YAAYD,gBAAgB;QAAET;QAAgBC;IAAW;IAE/D,MAAM,EAAEU,UAAU,EAAE,GAAGjB;IAEvB,MAAM,EAAEkB,IAAI,EAAEC,CAAC,EAAE,GAAGlB;IAEpB,MAAM,EACJmB,QAAQ,EAAEC,KAAK,EAAE,EAClB,GAAGzB;IAEJ,MAAM0B,cAAcxB;IAEpBI,UAAU;QACR,MAAMqB,MAAqB,EAAE;QAE7B,IAAI,CAACV,gBAAgB;YACnB,IAAIP,gBAAgB;gBAClBiB,IAAIC,IAAI,CAAC;oBACPC,OAAO9B,eAAea,aAAaU;oBACnCQ,KAAKV,YAAY,CAAC,EAAEK,MAAM,aAAa,EAAEf,eAAe,CAAC,GAAGK;gBAC9D;gBAEA,IAAIC,WAAW;oBACbW,IAAIC,IAAI,CAAC;wBACPC,OAAO,AAAChB,cAAcA,eAAe,QAAQK,SAAU,CAAC,EAAET,GAAG,CAAC;wBAC9DqB,KAAKV,YAAY,CAAC,EAAEK,MAAM,aAAa,EAAEf,eAAe,CAAC,EAAED,GAAG,CAAC,GAAGM;oBACpE;gBACF,OAAO;oBACLY,IAAIC,IAAI,CAAC;wBACPC,OAAON,EAAE;oBACX;gBACF;YACF,OAAO,IAAIZ,YAAY;gBACrBgB,IAAIC,IAAI,CAAC;oBACPC,OAAOX;oBACPY,KAAKV,YAAY,CAAC,EAAEK,MAAM,SAAS,EAAEd,WAAW,CAAC,GAAGI;gBACtD;YACF;YAEA,IAAID,MAAM;gBACRa,IAAIC,IAAI,CAAC;oBACPC,OAAOf;gBACT;YACF;YAEA,IAAIY,eAAe,GAAGL,WAAWM;QACnC;IACF,GAAG;QACDN;QACAJ;QACAD;QACAJ;QACAH;QACAI;QACAY;QACAF;QACAD;QACAJ;QACAR;QACAC;QACAG;QACAY;QACAN;KACD;IAED,OAAO;AACT,EAAC"}