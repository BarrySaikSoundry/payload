{"version":3,"sources":["../../src/utilities/mergeHeaders.ts"],"sourcesContent":["const headersToJoin = ['set-cookie', 'warning', 'www-authenticate', 'proxy-authenticate', 'vary']\n\nexport function mergeHeaders(sourceHeaders: Headers, destinationHeaders: Headers): void {\n  // Create a map to store combined headers\n  const combinedHeaders = new Headers()\n\n  // Add existing destination headers to the combined map\n  destinationHeaders.forEach((value, key) => {\n    combinedHeaders.set(key, value)\n  })\n\n  // Add source headers to the combined map, joining specific headers\n  sourceHeaders.forEach((value, key) => {\n    const lowerKey = key.toLowerCase()\n    if (headersToJoin.includes(lowerKey)) {\n      if (combinedHeaders.has(key)) {\n        combinedHeaders.set(key, `${combinedHeaders.get(key)}, ${value}`)\n      } else {\n        combinedHeaders.set(key, value)\n      }\n    } else {\n      combinedHeaders.set(key, value)\n    }\n  })\n\n  // Clear the destination headers and set the combined headers\n  destinationHeaders.forEach((_, key) => {\n    destinationHeaders.delete(key)\n  })\n  combinedHeaders.forEach((value, key) => {\n    destinationHeaders.append(key, value)\n  })\n}\n"],"names":["headersToJoin","mergeHeaders","sourceHeaders","destinationHeaders","combinedHeaders","Headers","forEach","value","key","set","lowerKey","toLowerCase","includes","has","get","_","delete","append"],"mappings":"AAAA,MAAMA,gBAAgB;IAAC;IAAc;IAAW;IAAoB;IAAsB;CAAO;AAEjG,OAAO,SAASC,aAAaC,aAAsB,EAAEC,kBAA2B;IAC9E,yCAAyC;IACzC,MAAMC,kBAAkB,IAAIC;IAE5B,uDAAuD;IACvDF,mBAAmBG,OAAO,CAAC,CAACC,OAAOC;QACjCJ,gBAAgBK,GAAG,CAACD,KAAKD;IAC3B;IAEA,mEAAmE;IACnEL,cAAcI,OAAO,CAAC,CAACC,OAAOC;QAC5B,MAAME,WAAWF,IAAIG,WAAW;QAChC,IAAIX,cAAcY,QAAQ,CAACF,WAAW;YACpC,IAAIN,gBAAgBS,GAAG,CAACL,MAAM;gBAC5BJ,gBAAgBK,GAAG,CAACD,KAAK,CAAC,EAAEJ,gBAAgBU,GAAG,CAACN,KAAK,EAAE,EAAED,MAAM,CAAC;YAClE,OAAO;gBACLH,gBAAgBK,GAAG,CAACD,KAAKD;YAC3B;QACF,OAAO;YACLH,gBAAgBK,GAAG,CAACD,KAAKD;QAC3B;IACF;IAEA,6DAA6D;IAC7DJ,mBAAmBG,OAAO,CAAC,CAACS,GAAGP;QAC7BL,mBAAmBa,MAAM,CAACR;IAC5B;IACAJ,gBAAgBE,OAAO,CAAC,CAACC,OAAOC;QAC9BL,mBAAmBc,MAAM,CAACT,KAAKD;IACjC;AACF"}