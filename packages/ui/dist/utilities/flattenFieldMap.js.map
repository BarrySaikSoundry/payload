{"version":3,"sources":["../../src/utilities/flattenFieldMap.ts"],"sourcesContent":["import type { FieldMap } from '../providers/ComponentMap/buildComponentMap/types.js'\n\n/**\n * Flattens a collection's fields into a single array of fields, as long\n * as the fields do not affect data.\n *\n * @param fields\n * @param keepPresentationalFields if true, will skip flattening fields that are presentational only\n */\nexport const flattenFieldMap = (\n  fieldMap: FieldMap,\n  keepPresentationalFields?: boolean,\n): FieldMap => {\n  return fieldMap.reduce((acc, field) => {\n    if ('name' in field || (keepPresentationalFields && field.fieldIsPresentational)) {\n      acc.push(field)\n      return acc\n    } else if ('fieldMap' in field.fieldComponentProps) {\n      acc.push(...flattenFieldMap(field.fieldComponentProps.fieldMap, keepPresentationalFields))\n    } else if (\n      field.type === 'tabs' &&\n      'tabs' in field.fieldComponentProps &&\n      Array.isArray(field.fieldComponentProps.tabs)\n    ) {\n      return [\n        ...acc,\n        ...field.fieldComponentProps.tabs.reduce((tabAcc, tab) => {\n          return [\n            ...tabAcc,\n            ...('name' in tab\n              ? [{ ...tab }]\n              : flattenFieldMap(tab.fieldMap, keepPresentationalFields)),\n          ]\n        }, []),\n      ]\n    }\n\n    return acc\n  }, [])\n}\n"],"names":["flattenFieldMap","fieldMap","keepPresentationalFields","reduce","acc","field","fieldIsPresentational","push","fieldComponentProps","type","Array","isArray","tabs","tabAcc","tab"],"mappings":"AAEA;;;;;;CAMC,GACD,OAAO,MAAMA,kBAAkB,CAC7BC,UACAC;IAEA,OAAOD,SAASE,MAAM,CAAC,CAACC,KAAKC;QAC3B,IAAI,UAAUA,SAAUH,4BAA4BG,MAAMC,qBAAqB,EAAG;YAChFF,IAAIG,IAAI,CAACF;YACT,OAAOD;QACT,OAAO,IAAI,cAAcC,MAAMG,mBAAmB,EAAE;YAClDJ,IAAIG,IAAI,IAAIP,gBAAgBK,MAAMG,mBAAmB,CAACP,QAAQ,EAAEC;QAClE,OAAO,IACLG,MAAMI,IAAI,KAAK,UACf,UAAUJ,MAAMG,mBAAmB,IACnCE,MAAMC,OAAO,CAACN,MAAMG,mBAAmB,CAACI,IAAI,GAC5C;YACA,OAAO;mBACFR;mBACAC,MAAMG,mBAAmB,CAACI,IAAI,CAACT,MAAM,CAAC,CAACU,QAAQC;oBAChD,OAAO;2BACFD;2BACC,UAAUC,MACV;4BAAC;gCAAE,GAAGA,GAAG;4BAAC;yBAAE,GACZd,gBAAgBc,IAAIb,QAAQ,EAAEC;qBACnC;gBACH,GAAG,EAAE;aACN;QACH;QAEA,OAAOE;IACT,GAAG,EAAE;AACP,EAAC"}