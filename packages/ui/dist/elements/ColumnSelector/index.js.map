{"version":3,"sources":["../../../src/elements/ColumnSelector/index.tsx"],"sourcesContent":["'use client'\nimport type { SanitizedCollectionConfig } from 'payload'\n\nimport React, { useId } from 'react'\n\nimport type { Column } from '../Table/index.js'\n\nimport { PlusIcon } from '../../icons/Plus/index.js'\nimport { XIcon } from '../../icons/X/index.js'\nimport { useEditDepth } from '../../providers/EditDepth/index.js'\nimport { DraggableSortable } from '../DraggableSortable/index.js'\nimport { Pill } from '../Pill/index.js'\nimport { useTableColumns } from '../TableColumns/index.js'\nimport './index.scss'\n\nconst baseClass = 'column-selector'\n\nexport type Props = {\n  collectionSlug: SanitizedCollectionConfig['slug']\n}\n\nconst filterColumnFields = (fields: Column[]): Column[] => {\n  return fields.filter((field) => {\n    return !field.admin?.disableListColumn\n  })\n}\n\nexport const ColumnSelector: React.FC<Props> = ({ collectionSlug }) => {\n  const { columns, moveColumn, toggleColumn } = useTableColumns()\n\n  const uuid = useId()\n  const editDepth = useEditDepth()\n\n  if (!columns) {\n    return null\n  }\n\n  const filteredColumns = filterColumnFields(columns)\n\n  return (\n    <DraggableSortable\n      className={baseClass}\n      ids={filteredColumns.map((col) => col?.accessor)}\n      onDragEnd={({ moveFromIndex, moveToIndex }) => {\n        moveColumn({\n          fromIndex: moveFromIndex,\n          toIndex: moveToIndex,\n        })\n      }}\n    >\n      {filteredColumns.map((col, i) => {\n        if (!col) return null\n\n        const { Label, accessor, active } = col\n\n        if (col.accessor === '_select') return null\n\n        return (\n          <Pill\n            alignIcon=\"left\"\n            aria-checked={active}\n            className={[`${baseClass}__column`, active && `${baseClass}__column--active`]\n              .filter(Boolean)\n              .join(' ')}\n            draggable\n            icon={active ? <XIcon /> : <PlusIcon />}\n            id={accessor}\n            key={`${collectionSlug}-${col.name || i}${editDepth ? `-${editDepth}-` : ''}${uuid}`}\n            onClick={() => {\n              toggleColumn(accessor)\n            }}\n          >\n            {Label}\n          </Pill>\n        )\n      })}\n    </DraggableSortable>\n  )\n}\n"],"names":["React","useId","PlusIcon","XIcon","useEditDepth","DraggableSortable","Pill","useTableColumns","baseClass","filterColumnFields","fields","filter","field","admin","disableListColumn","ColumnSelector","collectionSlug","columns","moveColumn","toggleColumn","uuid","editDepth","filteredColumns","className","ids","map","col","accessor","onDragEnd","moveFromIndex","moveToIndex","fromIndex","toIndex","i","Label","active","alignIcon","aria-checked","Boolean","join","draggable","icon","id","onClick","name"],"mappings":"AAAA;;AAGA,OAAOA,SAASC,KAAK,QAAQ,QAAO;AAIpC,SAASC,QAAQ,QAAQ,4BAA2B;AACpD,SAASC,KAAK,QAAQ,yBAAwB;AAC9C,SAASC,YAAY,QAAQ,qCAAoC;AACjE,SAASC,iBAAiB,QAAQ,gCAA+B;AACjE,SAASC,IAAI,QAAQ,mBAAkB;AACvC,SAASC,eAAe,QAAQ,2BAA0B;AAC1D,OAAO,eAAc;AAErB,MAAMC,YAAY;AAMlB,MAAMC,qBAAqB,CAACC;IAC1B,OAAOA,OAAOC,MAAM,CAAC,CAACC;QACpB,OAAO,CAACA,MAAMC,KAAK,EAAEC;IACvB;AACF;AAEA,OAAO,MAAMC,iBAAkC,CAAC,EAAEC,cAAc,EAAE;IAChE,MAAM,EAAEC,OAAO,EAAEC,UAAU,EAAEC,YAAY,EAAE,GAAGZ;IAE9C,MAAMa,OAAOnB;IACb,MAAMoB,YAAYjB;IAElB,IAAI,CAACa,SAAS;QACZ,OAAO;IACT;IAEA,MAAMK,kBAAkBb,mBAAmBQ;IAE3C,qBACE,KAACZ;QACCkB,WAAWf;QACXgB,KAAKF,gBAAgBG,GAAG,CAAC,CAACC,MAAQA,KAAKC;QACvCC,WAAW,CAAC,EAAEC,aAAa,EAAEC,WAAW,EAAE;YACxCZ,WAAW;gBACTa,WAAWF;gBACXG,SAASF;YACX;QACF;kBAECR,gBAAgBG,GAAG,CAAC,CAACC,KAAKO;YACzB,IAAI,CAACP,KAAK,OAAO;YAEjB,MAAM,EAAEQ,KAAK,EAAEP,QAAQ,EAAEQ,MAAM,EAAE,GAAGT;YAEpC,IAAIA,IAAIC,QAAQ,KAAK,WAAW,OAAO;YAEvC,qBACE,KAACrB;gBACC8B,WAAU;gBACVC,gBAAcF;gBACdZ,WAAW;oBAAC,CAAC,EAAEf,UAAU,QAAQ,CAAC;oBAAE2B,UAAU,CAAC,EAAE3B,UAAU,gBAAgB,CAAC;iBAAC,CAC1EG,MAAM,CAAC2B,SACPC,IAAI,CAAC;gBACRC,SAAS;gBACTC,MAAMN,uBAAS,KAAChC,2BAAW,KAACD;gBAC5BwC,IAAIf;gBAEJgB,SAAS;oBACPxB,aAAaQ;gBACf;0BAECO;eALI,CAAC,EAAElB,eAAe,CAAC,EAAEU,IAAIkB,IAAI,IAAIX,EAAE,EAAEZ,YAAY,CAAC,CAAC,EAAEA,UAAU,CAAC,CAAC,GAAG,GAAG,EAAED,KAAK,CAAC;QAQ1F;;AAGN,EAAC"}