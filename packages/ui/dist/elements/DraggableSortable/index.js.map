{"version":3,"sources":["../../../src/elements/DraggableSortable/index.tsx"],"sourcesContent":["'use client'\nimport type { DragEndEvent } from '@dnd-kit/core'\n\nimport {\n  DndContext,\n  KeyboardSensor,\n  PointerSensor,\n  closestCenter,\n  useDroppable,\n  useSensor,\n  useSensors,\n} from '@dnd-kit/core'\nimport { SortableContext, sortableKeyboardCoordinates } from '@dnd-kit/sortable'\nimport React, { useCallback, useId } from 'react'\n\nimport type { Props } from './types.js'\n\nexport { Props }\n\nexport const DraggableSortable: React.FC<Props> = (props) => {\n  const { children, className, ids, onDragEnd } = props\n\n  const id = useId()\n\n  const { setNodeRef } = useDroppable({\n    id,\n  })\n\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 5,\n      },\n    }),\n    useSensor(KeyboardSensor, {\n      coordinateGetter: sortableKeyboardCoordinates,\n    }),\n  )\n\n  const handleDragEnd = useCallback(\n    (event: DragEndEvent) => {\n      const { active, over } = event\n\n      if (!active || !over) return\n\n      if (typeof onDragEnd === 'function') {\n        onDragEnd({\n          event,\n          moveFromIndex: ids.findIndex((_id) => _id === active.id),\n          moveToIndex: ids.findIndex((_id) => _id === over.id),\n        })\n      }\n    },\n    [onDragEnd, ids],\n  )\n\n  return (\n    <DndContext\n      collisionDetection={closestCenter}\n      id={id}\n      onDragEnd={handleDragEnd}\n      sensors={sensors}\n    >\n      <SortableContext items={ids}>\n        <div className={className} ref={setNodeRef}>\n          {children}\n        </div>\n      </SortableContext>\n    </DndContext>\n  )\n}\n"],"names":["DndContext","KeyboardSensor","PointerSensor","closestCenter","useDroppable","useSensor","useSensors","SortableContext","sortableKeyboardCoordinates","React","useCallback","useId","DraggableSortable","props","children","className","ids","onDragEnd","id","setNodeRef","sensors","activationConstraint","distance","coordinateGetter","handleDragEnd","event","active","over","moveFromIndex","findIndex","_id","moveToIndex","collisionDetection","items","div","ref"],"mappings":"AAAA;;AAGA,SACEA,UAAU,EACVC,cAAc,EACdC,aAAa,EACbC,aAAa,EACbC,YAAY,EACZC,SAAS,EACTC,UAAU,QACL,gBAAe;AACtB,SAASC,eAAe,EAAEC,2BAA2B,QAAQ,oBAAmB;AAChF,OAAOC,SAASC,WAAW,EAAEC,KAAK,QAAQ,QAAO;AAMjD,OAAO,MAAMC,oBAAqC,CAACC;IACjD,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,GAAG,EAAEC,SAAS,EAAE,GAAGJ;IAEhD,MAAMK,KAAKP;IAEX,MAAM,EAAEQ,UAAU,EAAE,GAAGf,aAAa;QAClCc;IACF;IAEA,MAAME,UAAUd,WACdD,UAAUH,eAAe;QACvBmB,sBAAsB;YACpBC,UAAU;QACZ;IACF,IACAjB,UAAUJ,gBAAgB;QACxBsB,kBAAkBf;IACpB;IAGF,MAAMgB,gBAAgBd,YACpB,CAACe;QACC,MAAM,EAAEC,MAAM,EAAEC,IAAI,EAAE,GAAGF;QAEzB,IAAI,CAACC,UAAU,CAACC,MAAM;QAEtB,IAAI,OAAOV,cAAc,YAAY;YACnCA,UAAU;gBACRQ;gBACAG,eAAeZ,IAAIa,SAAS,CAAC,CAACC,MAAQA,QAAQJ,OAAOR,EAAE;gBACvDa,aAAaf,IAAIa,SAAS,CAAC,CAACC,MAAQA,QAAQH,KAAKT,EAAE;YACrD;QACF;IACF,GACA;QAACD;QAAWD;KAAI;IAGlB,qBACE,KAAChB;QACCgC,oBAAoB7B;QACpBe,IAAIA;QACJD,WAAWO;QACXJ,SAASA;kBAET,cAAA,KAACb;YAAgB0B,OAAOjB;sBACtB,cAAA,KAACkB;gBAAInB,WAAWA;gBAAWoB,KAAKhB;0BAC7BL;;;;AAKX,EAAC"}