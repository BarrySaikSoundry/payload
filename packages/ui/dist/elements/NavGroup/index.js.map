{"version":3,"sources":["../../../src/elements/NavGroup/index.tsx"],"sourcesContent":["'use client'\nimport React, { useEffect, useState } from 'react'\nimport AnimateHeightImport from 'react-animate-height'\n\nimport { ChevronIcon } from '../../icons/Chevron/index.js'\nimport { usePreferences } from '../../providers/Preferences/index.js'\nimport { useNav } from '../Nav/context.js'\nimport './index.scss'\n\nconst AnimateHeight = (AnimateHeightImport.default ||\n  AnimateHeightImport) as typeof AnimateHeightImport.default\n\nconst baseClass = 'nav-group'\n\ntype Props = {\n  children: React.ReactNode\n  label: string\n}\n\nexport const NavGroup: React.FC<Props> = ({ children, label }) => {\n  const [collapsed, setCollapsed] = useState(true)\n  const [animate, setAnimate] = useState(false)\n  const { getPreference, setPreference } = usePreferences()\n  const { navOpen } = useNav()\n\n  const preferencesKey = `collapsed-${label}-groups`\n\n  useEffect(() => {\n    if (label) {\n      const setCollapsedFromPreferences = async () => {\n        const preferences = (await getPreference(preferencesKey)) || []\n        setCollapsed(preferences.indexOf(label) !== -1)\n      }\n      void setCollapsedFromPreferences()\n    }\n  }, [getPreference, label, preferencesKey])\n\n  if (label) {\n    const toggleCollapsed = async () => {\n      setAnimate(true)\n      let preferences: string[] = (await getPreference(preferencesKey)) || []\n      if (collapsed) {\n        preferences = preferences.filter((preference) => label !== preference)\n      } else {\n        preferences.push(label)\n      }\n      void setPreference(preferencesKey, preferences)\n      setCollapsed(!collapsed)\n    }\n\n    return (\n      <div\n        className={[`${baseClass}`, `${label}`, collapsed && `${baseClass}--collapsed`]\n          .filter(Boolean)\n          .join(' ')}\n        id={`nav-group-${label}`}\n      >\n        <button\n          className={[\n            `${baseClass}__toggle`,\n            `${baseClass}__toggle--${collapsed ? 'collapsed' : 'open'}`,\n          ]\n            .filter(Boolean)\n            .join(' ')}\n          onClick={toggleCollapsed}\n          tabIndex={!navOpen ? -1 : 0}\n          type=\"button\"\n        >\n          <div className={`${baseClass}__label`}>{label}</div>\n          <div className={`${baseClass}__indicator`}>\n            <ChevronIcon\n              className={`${baseClass}__indicator`}\n              direction={!collapsed ? 'up' : undefined}\n            />\n          </div>\n        </button>\n        <AnimateHeight duration={animate ? 200 : 0} height={collapsed ? 0 : 'auto'}>\n          <div className={`${baseClass}__content`}>{children}</div>\n        </AnimateHeight>\n      </div>\n    )\n  }\n\n  return <React.Fragment>{children}</React.Fragment>\n}\n"],"names":["React","useEffect","useState","AnimateHeightImport","ChevronIcon","usePreferences","useNav","AnimateHeight","default","baseClass","NavGroup","children","label","collapsed","setCollapsed","animate","setAnimate","getPreference","setPreference","navOpen","preferencesKey","setCollapsedFromPreferences","preferences","indexOf","toggleCollapsed","filter","preference","push","div","className","Boolean","join","id","button","onClick","tabIndex","type","direction","undefined","duration","height","Fragment"],"mappings":"AAAA;;AACA,OAAOA,SAASC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAClD,OAAOC,yBAAyB,uBAAsB;AAEtD,SAASC,WAAW,QAAQ,+BAA8B;AAC1D,SAASC,cAAc,QAAQ,uCAAsC;AACrE,SAASC,MAAM,QAAQ,oBAAmB;AAC1C,OAAO,eAAc;AAErB,MAAMC,gBAAiBJ,oBAAoBK,OAAO,IAChDL;AAEF,MAAMM,YAAY;AAOlB,OAAO,MAAMC,WAA4B,CAAC,EAAEC,QAAQ,EAAEC,KAAK,EAAE;IAC3D,MAAM,CAACC,WAAWC,aAAa,GAAGZ,SAAS;IAC3C,MAAM,CAACa,SAASC,WAAW,GAAGd,SAAS;IACvC,MAAM,EAAEe,aAAa,EAAEC,aAAa,EAAE,GAAGb;IACzC,MAAM,EAAEc,OAAO,EAAE,GAAGb;IAEpB,MAAMc,iBAAiB,CAAC,UAAU,EAAER,MAAM,OAAO,CAAC;IAElDX,UAAU;QACR,IAAIW,OAAO;YACT,MAAMS,8BAA8B;gBAClC,MAAMC,cAAc,AAAC,MAAML,cAAcG,mBAAoB,EAAE;gBAC/DN,aAAaQ,YAAYC,OAAO,CAACX,WAAW,CAAC;YAC/C;YACA,KAAKS;QACP;IACF,GAAG;QAACJ;QAAeL;QAAOQ;KAAe;IAEzC,IAAIR,OAAO;QACT,MAAMY,kBAAkB;YACtBR,WAAW;YACX,IAAIM,cAAwB,AAAC,MAAML,cAAcG,mBAAoB,EAAE;YACvE,IAAIP,WAAW;gBACbS,cAAcA,YAAYG,MAAM,CAAC,CAACC,aAAed,UAAUc;YAC7D,OAAO;gBACLJ,YAAYK,IAAI,CAACf;YACnB;YACA,KAAKM,cAAcE,gBAAgBE;YACnCR,aAAa,CAACD;QAChB;QAEA,qBACE,MAACe;YACCC,WAAW;gBAAC,CAAC,EAAEpB,UAAU,CAAC;gBAAE,CAAC,EAAEG,MAAM,CAAC;gBAAEC,aAAa,CAAC,EAAEJ,UAAU,WAAW,CAAC;aAAC,CAC5EgB,MAAM,CAACK,SACPC,IAAI,CAAC;YACRC,IAAI,CAAC,UAAU,EAAEpB,MAAM,CAAC;;8BAExB,MAACqB;oBACCJ,WAAW;wBACT,CAAC,EAAEpB,UAAU,QAAQ,CAAC;wBACtB,CAAC,EAAEA,UAAU,UAAU,EAAEI,YAAY,cAAc,OAAO,CAAC;qBAC5D,CACEY,MAAM,CAACK,SACPC,IAAI,CAAC;oBACRG,SAASV;oBACTW,UAAU,CAAChB,UAAU,CAAC,IAAI;oBAC1BiB,MAAK;;sCAEL,KAACR;4BAAIC,WAAW,CAAC,EAAEpB,UAAU,OAAO,CAAC;sCAAGG;;sCACxC,KAACgB;4BAAIC,WAAW,CAAC,EAAEpB,UAAU,WAAW,CAAC;sCACvC,cAAA,KAACL;gCACCyB,WAAW,CAAC,EAAEpB,UAAU,WAAW,CAAC;gCACpC4B,WAAW,CAACxB,YAAY,OAAOyB;;;;;8BAIrC,KAAC/B;oBAAcgC,UAAUxB,UAAU,MAAM;oBAAGyB,QAAQ3B,YAAY,IAAI;8BAClE,cAAA,KAACe;wBAAIC,WAAW,CAAC,EAAEpB,UAAU,SAAS,CAAC;kCAAGE;;;;;IAIlD;IAEA,qBAAO,KAACX,MAAMyC,QAAQ;kBAAE9B;;AAC1B,EAAC"}