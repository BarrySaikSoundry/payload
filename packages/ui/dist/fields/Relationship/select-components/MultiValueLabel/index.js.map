{"version":3,"sources":["../../../../../src/fields/Relationship/select-components/MultiValueLabel/index.tsx"],"sourcesContent":["'use client'\nimport type { MultiValueProps } from 'react-select'\n\nimport React, { Fragment, useEffect, useState } from 'react'\nimport { components } from 'react-select'\n\nimport type { Option } from '../../types.js'\n\nimport { useDocumentDrawer } from '../../../../elements/DocumentDrawer/index.js'\nimport { Tooltip } from '../../../../elements/Tooltip/index.js'\nimport { EditIcon } from '../../../../icons/Edit/index.js'\nimport { useAuth } from '../../../../providers/Auth/index.js'\nimport { useTranslation } from '../../../../providers/Translation/index.js'\nimport './index.scss'\n\nconst baseClass = 'relationship--multi-value-label'\n\nexport const MultiValueLabel: React.FC<MultiValueProps<Option>> = (props) => {\n  const {\n    data: { label, relationTo, value },\n    selectProps: {\n      // @ts-expect-error-next-line // TODO Fix this - moduleResolution 16 breaks our declare module\n      customProps: {\n        // @ts-expect-error-next-line// TODO Fix this - moduleResolution 16 breaks our declare module\n        draggableProps,\n        // @ts-expect-error-next-line // TODO Fix this - moduleResolution 16 breaks our declare module\n        setDrawerIsOpen,\n        // onSave,\n      } = {},\n    } = {},\n  } = props\n\n  const { permissions } = useAuth()\n  const [showTooltip, setShowTooltip] = useState(false)\n  const { t } = useTranslation()\n  const hasReadPermission = Boolean(permissions?.collections?.[relationTo]?.read?.permission)\n\n  const [DocumentDrawer, DocumentDrawerToggler, { isDrawerOpen }] = useDocumentDrawer({\n    id: value?.toString(),\n    collectionSlug: relationTo,\n  })\n\n  useEffect(() => {\n    if (typeof setDrawerIsOpen === 'function') setDrawerIsOpen(isDrawerOpen)\n  }, [isDrawerOpen, setDrawerIsOpen])\n\n  return (\n    <div className={baseClass}>\n      <div className={`${baseClass}__content`}>\n        {/* @ts-expect-error // TODO Fix this - Broke with React 19 types */}\n        <components.MultiValueLabel\n          {...props}\n          innerProps={{\n            className: `${baseClass}__text`,\n            ...(draggableProps || {}),\n          }}\n        />\n      </div>\n      {relationTo && hasReadPermission && (\n        <Fragment>\n          <DocumentDrawerToggler\n            aria-label={`Edit ${label}`}\n            className={`${baseClass}__drawer-toggler`}\n            onClick={() => setShowTooltip(false)}\n            onKeyDown={(e) => {\n              if (e.key === 'Enter') {\n                e.stopPropagation()\n              }\n            }}\n            onMouseDown={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n            onMouseEnter={() => setShowTooltip(true)}\n            onMouseLeave={() => setShowTooltip(false)}\n            onTouchEnd={(e) => e.stopPropagation()} // prevents react-select dropdown from opening\n          >\n            <Tooltip className={`${baseClass}__tooltip`} show={showTooltip}>\n              {t('general:editLabel', { label: '' })}\n            </Tooltip>\n            <EditIcon className={`${baseClass}__icon`} />\n          </DocumentDrawerToggler>\n          <DocumentDrawer onSave={/* onSave */ null} />\n        </Fragment>\n      )}\n    </div>\n  )\n}\n"],"names":["React","Fragment","useEffect","useState","components","useDocumentDrawer","Tooltip","EditIcon","useAuth","useTranslation","baseClass","MultiValueLabel","props","data","label","relationTo","value","selectProps","customProps","draggableProps","setDrawerIsOpen","permissions","showTooltip","setShowTooltip","t","hasReadPermission","Boolean","collections","read","permission","DocumentDrawer","DocumentDrawerToggler","isDrawerOpen","id","toString","collectionSlug","div","className","innerProps","aria-label","onClick","onKeyDown","e","key","stopPropagation","onMouseDown","onMouseEnter","onMouseLeave","onTouchEnd","show","onSave"],"mappings":"AAAA;;AAGA,OAAOA,SAASC,QAAQ,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,QAAO;AAC5D,SAASC,UAAU,QAAQ,eAAc;AAIzC,SAASC,iBAAiB,QAAQ,+CAA8C;AAChF,SAASC,OAAO,QAAQ,wCAAuC;AAC/D,SAASC,QAAQ,QAAQ,kCAAiC;AAC1D,SAASC,OAAO,QAAQ,sCAAqC;AAC7D,SAASC,cAAc,QAAQ,6CAA4C;AAC3E,OAAO,eAAc;AAErB,MAAMC,YAAY;AAElB,OAAO,MAAMC,kBAAqD,CAACC;IACjE,MAAM,EACJC,MAAM,EAAEC,KAAK,EAAEC,UAAU,EAAEC,KAAK,EAAE,EAClCC,aAAa,EACX,8FAA8F;IAC9FC,aAAa,EACX,6FAA6F;IAC7FC,cAAc,EACd,8FAA8F;IAC9FC,eAAe,EAEhB,GAAG,CAAC,CAAC,EACP,GAAG,CAAC,CAAC,EACP,GAAGR;IAEJ,MAAM,EAAES,WAAW,EAAE,GAAGb;IACxB,MAAM,CAACc,aAAaC,eAAe,GAAGpB,SAAS;IAC/C,MAAM,EAAEqB,CAAC,EAAE,GAAGf;IACd,MAAMgB,oBAAoBC,QAAQL,aAAaM,aAAa,CAACZ,WAAW,EAAEa,MAAMC;IAEhF,MAAM,CAACC,gBAAgBC,uBAAuB,EAAEC,YAAY,EAAE,CAAC,GAAG3B,kBAAkB;QAClF4B,IAAIjB,OAAOkB;QACXC,gBAAgBpB;IAClB;IAEAb,UAAU;QACR,IAAI,OAAOkB,oBAAoB,YAAYA,gBAAgBY;IAC7D,GAAG;QAACA;QAAcZ;KAAgB;IAElC,qBACE,MAACgB;QAAIC,WAAW3B;;0BACd,KAAC0B;gBAAIC,WAAW,CAAC,EAAE3B,UAAU,SAAS,CAAC;0BAErC,cAAA,KAACN,WAAWO,eAAe;oBACxB,GAAGC,KAAK;oBACT0B,YAAY;wBACVD,WAAW,CAAC,EAAE3B,UAAU,MAAM,CAAC;wBAC/B,GAAIS,kBAAkB,CAAC,CAAC;oBAC1B;;;YAGHJ,cAAcU,mCACb,MAACxB;;kCACC,MAAC8B;wBACCQ,cAAY,CAAC,KAAK,EAAEzB,MAAM,CAAC;wBAC3BuB,WAAW,CAAC,EAAE3B,UAAU,gBAAgB,CAAC;wBACzC8B,SAAS,IAAMjB,eAAe;wBAC9BkB,WAAW,CAACC;4BACV,IAAIA,EAAEC,GAAG,KAAK,SAAS;gCACrBD,EAAEE,eAAe;4BACnB;wBACF;wBACAC,aAAa,CAACH,IAAMA,EAAEE,eAAe;wBACrCE,cAAc,IAAMvB,eAAe;wBACnCwB,cAAc,IAAMxB,eAAe;wBACnCyB,YAAY,CAACN,IAAMA,EAAEE,eAAe;;0CAEpC,KAACtC;gCAAQ+B,WAAW,CAAC,EAAE3B,UAAU,SAAS,CAAC;gCAAEuC,MAAM3B;0CAChDE,EAAE,qBAAqB;oCAAEV,OAAO;gCAAG;;0CAEtC,KAACP;gCAAS8B,WAAW,CAAC,EAAE3B,UAAU,MAAM,CAAC;;;;kCAE3C,KAACoB;wBAAeoB,QAAqB;;;;;;AAK/C,EAAC"}