{"version":3,"sources":["../../../src/fields/Group/index.tsx"],"sourcesContent":["'use client'\n\nimport { getTranslation } from '@payloadcms/translations'\nimport React, { Fragment } from 'react'\n\nimport type { FieldMap } from '../../providers/ComponentMap/buildComponentMap/types.js'\nimport type { FormFieldBase } from '../shared/index.js'\n\nimport { useCollapsible } from '../../elements/Collapsible/provider.js'\nimport { ErrorPill } from '../../elements/ErrorPill/index.js'\nimport { useFieldProps } from '../../forms/FieldPropsProvider/index.js'\nimport {\n  useFormInitializing,\n  useFormProcessing,\n  useFormSubmitted,\n} from '../../forms/Form/context.js'\nimport { RenderFields } from '../../forms/RenderFields/index.js'\nimport { useField } from '../../forms/useField/index.js'\nimport { withCondition } from '../../forms/withCondition/index.js'\nimport { useTranslation } from '../../providers/Translation/index.js'\nimport { FieldDescription } from '../FieldDescription/index.js'\nimport { useRow } from '../Row/provider.js'\nimport { useTabs } from '../Tabs/provider.js'\nimport { fieldBaseClass } from '../shared/index.js'\nimport './index.scss'\nimport { GroupProvider, useGroup } from './provider.js'\n\nconst baseClass = 'group-field'\n\nexport type GroupFieldProps = {\n  fieldMap: FieldMap\n  forceRender?: boolean\n  hideGutter?: boolean\n  name?: string\n  width?: string\n} & FormFieldBase\n\nexport const _GroupField: React.FC<GroupFieldProps> = (props) => {\n  const {\n    CustomDescription,\n    CustomLabel,\n    className,\n    descriptionProps,\n    fieldMap,\n    hideGutter,\n    label,\n    readOnly: readOnlyFromProps,\n    style,\n    width,\n  } = props\n\n  const { path, permissions, readOnly: readOnlyFromContext, schemaPath } = useFieldProps()\n  const { i18n } = useTranslation()\n  const { isWithinCollapsible } = useCollapsible()\n  const isWithinGroup = useGroup()\n  const isWithinRow = useRow()\n  const isWithinTab = useTabs()\n  const { errorPaths } = useField({ path })\n  const formInitializing = useFormInitializing()\n  const formProcessing = useFormProcessing()\n  const submitted = useFormSubmitted()\n  const errorCount = errorPaths.length\n  const fieldHasErrors = submitted && errorCount > 0\n  const disabled = readOnlyFromProps || readOnlyFromContext || formProcessing || formInitializing\n\n  const isTopLevel = !(isWithinCollapsible || isWithinGroup || isWithinRow)\n\n  return (\n    <Fragment>\n      <div\n        className={[\n          fieldBaseClass,\n          baseClass,\n          isTopLevel && `${baseClass}--top-level`,\n          isWithinCollapsible && `${baseClass}--within-collapsible`,\n          isWithinGroup && `${baseClass}--within-group`,\n          isWithinRow && `${baseClass}--within-row`,\n          isWithinTab && `${baseClass}--within-tab`,\n          !hideGutter && isWithinGroup && `${baseClass}--gutter`,\n          fieldHasErrors && `${baseClass}--has-error`,\n          className,\n        ]\n          .filter(Boolean)\n          .join(' ')}\n        id={`field-${path?.replace(/\\./g, '__')}`}\n        style={{\n          ...style,\n          width,\n        }}\n      >\n        <GroupProvider>\n          <div className={`${baseClass}__wrap`}>\n            <div className={`${baseClass}__header`}>\n              {(CustomLabel || CustomDescription || label) && (\n                <header>\n                  {CustomLabel !== undefined ? (\n                    CustomLabel\n                  ) : label ? (\n                    <h3 className={`${baseClass}__title`}>{getTranslation(label, i18n)}</h3>\n                  ) : null}\n                  {CustomDescription !== undefined ? (\n                    CustomDescription\n                  ) : (\n                    <FieldDescription {...(descriptionProps || {})} />\n                  )}\n                </header>\n              )}\n              {fieldHasErrors && <ErrorPill count={errorCount} i18n={i18n} withMessage />}\n            </div>\n            <RenderFields\n              fieldMap={fieldMap}\n              margins=\"small\"\n              path={path}\n              permissions={permissions?.fields}\n              readOnly={disabled}\n              schemaPath={schemaPath}\n            />\n          </div>\n        </GroupProvider>\n      </div>\n    </Fragment>\n  )\n}\n\nexport { GroupProvider, useGroup }\n\nexport const GroupField = withCondition(_GroupField)\n"],"names":["getTranslation","React","Fragment","useCollapsible","ErrorPill","useFieldProps","useFormInitializing","useFormProcessing","useFormSubmitted","RenderFields","useField","withCondition","useTranslation","FieldDescription","useRow","useTabs","fieldBaseClass","GroupProvider","useGroup","baseClass","_GroupField","props","CustomDescription","CustomLabel","className","descriptionProps","fieldMap","hideGutter","label","readOnly","readOnlyFromProps","style","width","path","permissions","readOnlyFromContext","schemaPath","i18n","isWithinCollapsible","isWithinGroup","isWithinRow","isWithinTab","errorPaths","formInitializing","formProcessing","submitted","errorCount","length","fieldHasErrors","disabled","isTopLevel","div","filter","Boolean","join","id","replace","header","undefined","h3","count","withMessage","margins","fields","GroupField"],"mappings":"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"}