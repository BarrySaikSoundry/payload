{"version":3,"sources":["../../../src/forms/buildStateFromSchema/buildStateFromSchema.spec.js"],"sourcesContent":["import buildStateFromSchema from './index.js'\n\ndescribe('Form - buildStateFromSchema', () => {\n  const defaultValue = 'Default'\n  it('populates default value - normal fields', async () => {\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue,\n        label: 'Text',\n      },\n    ]\n    const state = await buildStateFromSchema({ fieldSchema })\n    expect(state.text.value).toBe(defaultValue)\n  })\n  it('field value overrides defaultValue - normal fields', async () => {\n    const value = 'value'\n    const data = { text: value }\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue,\n        label: 'Text',\n      },\n    ]\n    const state = await buildStateFromSchema({ data, fieldSchema })\n    expect(state.text.value).toBe(value)\n  })\n  it('populates default value from a function - normal fields', async () => {\n    const user = { email: 'user@example.com' }\n    const locale = 'en'\n    const fieldSchema = [\n      {\n        name: 'text',\n        type: 'text',\n        defaultValue: (args) => {\n          if (!args.locale) {\n            return 'missing locale'\n          }\n          if (!args.user) {\n            return 'missing user'\n          }\n          return 'Default'\n        },\n        label: 'Text',\n      },\n    ]\n    const state = await buildStateFromSchema({ fieldSchema, locale, user })\n    expect(state.text.value).toBe(defaultValue)\n  })\n})\n"],"names":["buildStateFromSchema","describe","defaultValue","it","fieldSchema","name","type","label","state","expect","text","value","toBe","data","user","email","locale","args"],"mappings":"AAAA,OAAOA,0BAA0B,aAAY;AAE7CC,SAAS,+BAA+B;IACtC,MAAMC,eAAe;IACrBC,GAAG,2CAA2C;QAC5C,MAAMC,cAAc;YAClB;gBACEC,MAAM;gBACNC,MAAM;gBACNJ;gBACAK,OAAO;YACT;SACD;QACD,MAAMC,QAAQ,MAAMR,qBAAqB;YAAEI;QAAY;QACvDK,OAAOD,MAAME,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACV;IAChC;IACAC,GAAG,sDAAsD;QACvD,MAAMQ,QAAQ;QACd,MAAME,OAAO;YAAEH,MAAMC;QAAM;QAC3B,MAAMP,cAAc;YAClB;gBACEC,MAAM;gBACNC,MAAM;gBACNJ;gBACAK,OAAO;YACT;SACD;QACD,MAAMC,QAAQ,MAAMR,qBAAqB;YAAEa;YAAMT;QAAY;QAC7DK,OAAOD,MAAME,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACD;IAChC;IACAR,GAAG,2DAA2D;QAC5D,MAAMW,OAAO;YAAEC,OAAO;QAAmB;QACzC,MAAMC,SAAS;QACf,MAAMZ,cAAc;YAClB;gBACEC,MAAM;gBACNC,MAAM;gBACNJ,cAAc,CAACe;oBACb,IAAI,CAACA,KAAKD,MAAM,EAAE;wBAChB,OAAO;oBACT;oBACA,IAAI,CAACC,KAAKH,IAAI,EAAE;wBACd,OAAO;oBACT;oBACA,OAAO;gBACT;gBACAP,OAAO;YACT;SACD;QACD,MAAMC,QAAQ,MAAMR,qBAAqB;YAAEI;YAAaY;YAAQF;QAAK;QACrEL,OAAOD,MAAME,IAAI,CAACC,KAAK,EAAEC,IAAI,CAACV;IAChC;AACF"}