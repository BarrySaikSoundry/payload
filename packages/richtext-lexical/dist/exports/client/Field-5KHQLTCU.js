"use client";import{a as ce,b as ue,c as de,d as fe,e as W,f as I,h as pe}from"./chunk-SVDDFJRT.js";import{a as me,b as N}from"./chunk-QZIAQPM7.js";import{FieldDescription as Ot,FieldError as _t,FieldLabel as zt,useField as $t,useFieldProps as Gt,withCondition as Kt}from"@payloadcms/ui";import{useCallback as Wt}from"react";import{ErrorBoundary as Yt}from"react-error-boundary";import{LexicalComposer as At}from"@lexical/react/LexicalComposer.js";import*as Ye from"react";import{useMemo as We}from"react";import{useLexicalComposerContext as Nt}from"@lexical/react/LexicalComposerContext.js";import{LexicalErrorBoundary as St}from"@lexical/react/LexicalErrorBoundary.js";import{HistoryPlugin as kt}from"@lexical/react/LexicalHistoryPlugin.js";import{OnChangePlugin as wt}from"@lexical/react/LexicalOnChangePlugin.js";import{RichTextPlugin as It}from"@lexical/react/LexicalRichTextPlugin.js";import{TabIndentationPlugin as Dt}from"@lexical/react/LexicalTabIndentationPlugin.js";import{useTranslation as Bt}from"@payloadcms/ui";import{BLUR_COMMAND as Ft,COMMAND_PRIORITY_LOW as ze,FOCUS_COMMAND as Ht}from"lexical";import*as q from"react";import{useEffect as $e,useState as Ge}from"react";import{jsx as ge}from"react/jsx-runtime";var O=({anchorElem:t,clientProps:e,plugin:i})=>i.position==="floatingAnchorElem"?i.Component&&ge(i.Component,{anchorElem:t,clientProps:e}):i.Component&&ge(i.Component,{clientProps:e});import{MarkdownShortcutPlugin as je}from"@lexical/react/LexicalMarkdownShortcutPlugin.js";import{jsx as Xe}from"react/jsx-runtime";var ye=()=>{let{editorConfig:t}=N();return Xe(je,{transformers:t.features.markdownTransformers})};import{useLexicalComposerContext as Ze}from"@lexical/react/LexicalComposerContext.js";import{useTranslation as be}from"@payloadcms/ui";import{useCallback as Ee,useMemo as et,useState as tt}from"react";import*as xe from"react";import*as Ce from"react-dom";import{useCallback as Qe}from"react";function he(t,{maxLength:e=75,minLength:i=1}){return Qe(({query:l})=>{let r="[^"+t+ue+"\\s]",d=new RegExp("(^|\\s|\\()(["+t+"]((?:"+r+"){0,"+e+"}))$").exec(l);if(d!==null){let c=d[1],m=d[3];if(m.length>=i)return{leadOffset:d.index+c.length,matchingString:m,replaceableString:d[2]}}return null},[e,i,t])}import{jsx as _,jsxs as Me}from"react/jsx-runtime";var k="slash-menu-popup";function ot({isSelected:t,item:e,onClick:i,onMouseEnter:l}){let{i18n:r}=be(),u=`${k}__item ${k}__item-${e.key}`;t&&(u+=` ${k}__item--selected`);let d=e.key;return e.label&&(d=typeof e.label=="function"?e.label({i18n:r}):e.label),d.length>25&&(d=d.substring(0,25)+"..."),Me("button",{"aria-selected":t,className:u,id:k+"__item-"+e.key,onClick:i,onMouseEnter:l,ref:e.ref,role:"option",tabIndex:-1,type:"button",children:[e?.Icon&&_(e.Icon,{}),_("span",{className:`${k}__item-text`,children:d})]},e.key)}function Te({anchorElem:t=document.body}){let[e]=Ze(),[i,l]=tt(null),{editorConfig:r}=N(),{i18n:u}=be(),d=he("/",{minLength:0}),c=Ee(()=>{let a=[];for(let s of r.features.slashMenu.dynamicGroups){let o=s({editor:e,queryString:i});a=a.concat(o)}return a},[e,i,r?.features]),m=et(()=>{let a=[];for(let s of r?.features.slashMenu.groups??[])a.push(s);if(i){a=a.map(o=>{let n=o.items.filter(f=>{let E=f.key;return f.label&&(E=typeof f.label=="function"?f.label({i18n:u}):f.label),new RegExp(i,"gi").exec(E)?!0:f.keywords!=null?f.keywords.some(h=>new RegExp(i,"gi").exec(h)):!1});return n.length?{...o,items:n}:null}),a=a.filter(o=>o!=null);let s=c();for(let o of s){let n=a.find(f=>f.key===o.key);n?a=a.filter(f=>f.key!==o.key):n={...o,items:[]},n?.items?.length&&(n.items=n.items.concat(n.items)),a.push(n)}}return a},[c,i,r?.features,u]),p=Ee((a,s,o,n)=>{s&&e.update(()=>{s.remove()}),a.onSelect({editor:e,queryString:n}),o()},[e]);return _(xe.Fragment,{children:_(fe,{anchorElem:t,groups:m,menuRenderFn:(a,{selectItemAndCleanUp:s,selectedItemKey:o,setSelectedItemKey:n})=>a.current&&m.length?Ce.createPortal(_("div",{className:k,children:m.map(f=>{let E=f.key;return f.label&&(E=typeof f.label=="function"?f.label({i18n:u}):f.label),Me("div",{className:`${k}__group ${k}__group-${f.key}`,children:[_("div",{className:`${k}__group-title`,children:E}),f.items.map((h,g)=>_(ot,{index:g,isSelected:o===h.key,item:h,onClick:()=>{n(h.key),s(h)},onMouseEnter:()=>{n(h.key)}},h.key))]},f.key)})}),a.current):null,onQueryChange:l,onSelectItem:p,triggerFn:d})})}import{useLexicalComposerContext as st}from"@lexical/react/LexicalComposerContext.js";import{$createParagraphNode as ct}from"lexical";import*as Pe from"react";import{useCallback as mt,useEffect as Re,useRef as ut,useState as dt}from"react";import{createPortal as ft}from"react-dom";var Y=(t,e,i,l,r=50,u=25)=>{let d=0;if(t&&!t.contains(l)){let{bottom:c,left:m,right:p,top:a}=t.getBoundingClientRect(),s=a+window.scrollY,o=c+window.scrollY;if(i<s-u||i>o+u||e<m-r||e>p+r)return-1;(e<m||e>p)&&(d=e<m?e-m:e-p)}return d};import{$getNodeByKey as Q}from"lexical";function D(t){let e=t.getBoundingClientRect(),i=getComputedStyle(t).getPropertyValue("transform");if(!i||i==="none")return e;let l=i.split(",").pop();return e.y=e.y-Number(l.replace(")","")),e}function X(t){let e=(m,p)=>m?parseFloat(window.getComputedStyle(m)[p]):0,{marginBottom:i,marginTop:l}=window.getComputedStyle(t),r=e(t.previousElementSibling,"marginBottom"),u=e(t.nextElementSibling,"marginTop"),d=Math.max(parseFloat(l),r);return{marginBottom:Math.max(parseFloat(i),u),marginTop:d}}import{$getRoot as nt}from"lexical";function z(t){return t.getEditorState().read(()=>nt().getChildrenKeys())}var rt=1,it=-1,Le=0,w={props:null,result:null};function lt(t,e,i=20){let l=t.x-e.x,r=t.y-e.y;return l*l+r*r<=i*i}function V(t){let{anchorElem:e,cache_threshold:i=20,editor:l,fuzzy:r=!1,horizontalOffset:u=0,point:{x:d,y:c},startIndex:m=0,useEdgeAsDefault:p=!1,verbose:a=!1}=t;if(i>0&&w.props&&w.result&&w.props.fuzzy===t.fuzzy&&w.props.horizontalOffset===t.horizontalOffset&&w.props.useEdgeAsDefault===t.useEdgeAsDefault&&lt(w.props.point,t.point,i))return w.result;let s=e.getBoundingClientRect(),o=z(l),n={blockElem:null,blockNode:null,distance:1/0,foundAtIndex:-1,isFoundNodeEmptyParagraph:!1};return l.getEditorState().read(()=>{if(p){let[h,g]=[l.getElementByKey(o[0]),l.getElementByKey(o[o.length-1])],[y,b]=[D(h),D(g)];if(y&&b&&(c<y.top?(n.blockElem=h,n.distance=y.top-c,n.blockNode=Q(o[0]),n.foundAtIndex=0):c>b.bottom&&(n.distance=c-b.bottom,n.blockNode=Q(o[o.length-1]),n.blockElem=g,n.foundAtIndex=o.length-1),n?.blockElem))return{blockElem:null,isFoundNodeEmptyParagraph:!1}}let f=m,E=Le;for(;f>=0&&f<o.length;){let h=o[f],g=l.getElementByKey(h);if(g===null)break;let y=new I(d+u,c),b=pe.fromDOMRect(D(g)),{marginBottom:R,marginTop:M}=X(g),L=b.generateNewRect({bottom:b.bottom+R,left:s.left,right:s.right,top:b.top-M}),{distance:v,isOnBottomSide:x,isOnTopSide:F}=L.distanceFromPoint(y);if(v===0){n.blockElem=g,n.blockNode=Q(h),n.foundAtIndex=f,n.distance=v,n.blockNode&&n.blockNode.getType()==="paragraph"&&n.blockNode.getTextContent()===""&&(!r&&!t.returnEmptyParagraphs&&(n.blockElem=null,n.blockNode=null),n.isFoundNodeEmptyParagraph=!0);break}else r&&v<n.distance&&(n.blockElem=g,n.blockNode=Q(h),n.distance=v,n.foundAtIndex=f);E===Le&&(F?E=it:x?E=rt:E=1/0),f+=E}}),w.props=t,w.result={blockElem:n.blockElem,blockNode:n.blockNode,foundAtIndex:n.foundAtIndex,isFoundNodeEmptyParagraph:n.isFoundNodeEmptyParagraph},{blockElem:n.blockElem,blockNode:n.blockNode,foundAtIndex:n.foundAtIndex,isFoundNodeEmptyParagraph:n.isFoundNodeEmptyParagraph}}function Z(t,e){return!!t.closest(`.${e}`)}var at=["IMG","INPUT","TEXTAREA","SELECT","BUTTON","VIDEO","OBJECT","EMBED","IFRAME","HR"];function ve(t){if(!t||at.includes(t.tagName)||t.offsetHeight===0||t.offsetWidth===0)return!1;let e=window.getComputedStyle(t);return!(e.display==="table-cell"||e.position==="absolute"||e.visibility==="hidden"||e.opacity==="0")}function ee(t,e,i,l=0){if(!t){e.style.opacity="0",e.style.transform="translate(-10000px, -10000px)";return}let r=t.getBoundingClientRect(),u=window.getComputedStyle(t),d=e.getBoundingClientRect(),c=i.getBoundingClientRect(),m;if(r.height<60)m=r.top-d.height/2-c.top+r.height/2-1;else{let s=ve(t)?parseInt(u.lineHeight,10):0;m=r.top+(s-d.height)/2-c.top-1}let a=l;e.style.opacity="1",e.style.transform=`translate(${a}px, ${m}px)`}import{jsx as le}from"react/jsx-runtime";var pt="add-block-menu",te=1/0;function gt(t){return t===0?1/0:te>=0&&te<t?te:Math.floor(t/2)}function yt(t,e,i){let l=e.parentElement,{editorConfig:r}=N(),u=r?.admin?.hideGutter?-24:12,d=ut(null),[c,m]=dt(null);Re(()=>{function a(s){let o=s.target;if(!W(o))return;let n=Y(l,s.pageX,s.pageY,o);if(n===-1){m(null);return}if(Z(o,pt))return;let f=z(t),{blockElem:E,blockNode:h,foundAtIndex:g}=V({anchorElem:e,cache_threshold:0,editor:t,horizontalOffset:-n,point:new I(s.x,s.y),returnEmptyParagraphs:!0,startIndex:gt(f.length),useEdgeAsDefault:!1});te=g,E&&(c?.node!==h||c?.elem!==E)&&m({elem:E,node:h})}return document?.addEventListener("mousemove",a),()=>{document?.removeEventListener("mousemove",a)}},[l,e,t,c]),Re(()=>{d.current&&c?.node&&ee(c?.elem,d.current,e,u)},[e,c,u]);let p=mt(a=>{let s=c;s?.node&&(t.update(()=>{let o=!0;if((s.node.getType()!=="paragraph"||s.node.getTextContent()!=="")&&(o=!1),!o){let n=ct();s.node.insertAfter(n),setTimeout(()=>{s={elem:t.getElementByKey(n.getKey()),node:n},m(s)},0)}}),setTimeout(()=>{t.update(()=>{t.focus(),s.node&&"select"in s.node&&typeof s.node.select=="function"&&s.node.select()})},1),setTimeout(()=>{t.dispatchCommand(de,{node:s.node})},2),a.stopPropagation(),a.preventDefault())},[t,c]);return ft(le(Pe.Fragment,{children:le("button",{className:"icon add-block-menu",onClick:a=>{p(a)},ref:d,type:"button",children:le("div",{className:i?"icon":""})})}),e)}function Ne({anchorElem:t=document.body}){let[e]=st();return yt(e,t,e._editable)}import{useLexicalComposerContext as bt}from"@lexical/react/LexicalComposerContext.js";import{eventFiles as we}from"@lexical/rich-text";import{$getNearestNodeFromDOMNode as Ie,$getNodeByKey as xt}from"lexical";import*as Ae from"react";import{useEffect as ae,useRef as oe,useState as De}from"react";import{createPortal as Ct}from"react-dom";function Se(t,e,i){if(!t.current)return;let{left:l,top:r}=i.getBoundingClientRect(),u=D(e),d=u.width,c=u.height,m=u.top-r,p=u.left-l;t.current.style.border="2px solid green",t.current.style.boxSizing="border-box",t.current.style.height=c+"px",t.current.style.pointerEvents="none",t.current.style.position="absolute",t.current.style.top=m+"px",t.current.style.left=p+"px",t.current.style.width=d+"px",t.current.style.zIndex="1000",t.current.style.opacity="0.5"}var U=25,ht=-24,Et=!1,$=0;function ke(t,e,i,l,r,u,d,c,m,p=!1){let{height:a,top:s}=l.getBoundingClientRect(),{top:o,width:n}=d.getBoundingClientRect(),{marginBottom:f,marginTop:E}=X(l),h=s,g=u>=s+a/2+window.scrollY,y=!1;if(r?.elem)if(l!==r?.elem)(g&&r?.elem&&r?.elem===l.nextElementSibling||!g&&r?.elem&&r?.elem===l.previousElementSibling)&&($++,$<200&&(y=!0));else{$++;let v=r?.boundingBox?.y,x=l.getBoundingClientRect().y;(g===r?.isBelow&&v===x||$<200)&&(y=!1)}if(y)return{isBelow:g,willStayInSamePosition:y};p?h+=a/2:g?h+=a+f/2:h-=E/2;let b=0;p||(g?b=-U:b=U);let R=h-o+b,M=ht-e;i.style.width=`calc(${n}px - ${t})`,i.style.opacity=".4";let L=12;return p?i.style.transform=`translate(${M}px, ${R-U}px)`:g?(l.style.marginBottom=U*2+L+"px",i.style.transform=`translate(${M}px, calc(${R}px - 0px))`):(l.style.marginTop=U*2+L+"px",i.style.transform=`translate(${M}px, calc(${R-U*2}px - 0px))`),Et&&Se(m,l,d),r.elem.style.opacity="",r?.elem===l?g?r.elem.style.marginTop="":r.elem.style.marginBottom="":(r.elem.style.marginBottom="",r.elem.style.marginTop=""),$=0,{isBelow:g,willStayInSamePosition:y}}import{jsx as ne,jsxs as vt}from"react/jsx-runtime";var Tt="draggable-block-menu",Be="application/x-lexical-drag-block",J=1/0;function Fe(t){return t===0?1/0:J>=0&&J<t?J:Math.floor(t/2)}function Mt(t,e){let{transform:i}=e.style;t.setDragImage(e,0,0),setTimeout(()=>{e.style.transform=i})}function He(t,e){t&&(t.style.opacity="0"),e&&(e.style.opacity="",e.style.marginBottom="",e.style.marginTop="")}function Lt(t,e,i){let l=e.parentElement,r=oe(null),u=oe(null),d=oe(null),c=oe(!1),[m,p]=De(null),[a,s]=De(null),{editorConfig:o}=N(),n=o?.admin?.hideGutter?-44:-8;ae(()=>{function h(g){let y=g.target;if(!W(y))return;let b=Y(l,g.pageX,g.pageY,y);if(b===-1){p(null);return}if(Z(y,Tt))return;let R=z(t),{blockElem:M,foundAtIndex:L,isFoundNodeEmptyParagraph:v}=V({anchorElem:e,cache_threshold:0,editor:t,horizontalOffset:-b,point:new I(g.x,g.y),startIndex:Fe(R.length),useEdgeAsDefault:!1,verbose:!1});J=L,!(!M&&!v)&&m!==M&&p(M)}return document?.addEventListener("mousemove",h),()=>{document?.removeEventListener("mousemove",h)}},[l,e,t,m]),ae(()=>{r.current&&ee(m,r.current,e,n)},[e,m,n]),ae(()=>{function h(y){if(!c.current)return!1;let[b]=we(y);if(b)return!1;let{pageY:R,target:M}=y;if(!W(M))return!1;let L=Y(l,y.pageX,y.pageY,M,100,50),v=z(t),{blockElem:x,foundAtIndex:F,isFoundNodeEmptyParagraph:H}=V({anchorElem:e,editor:t,fuzzy:!0,horizontalOffset:-L,point:new I(y.x,y.y),startIndex:Fe(v.length),useEdgeAsDefault:!0,verbose:!0});J=F;let A=u.current;if(x===null||A===null)return!1;if(m!==x){let{isBelow:P,willStayInSamePosition:S}=ke(o?.admin?.hideGutter?"0px":"3rem",n+(o?.admin?.hideGutter?r?.current?.getBoundingClientRect()?.width??0:-r?.current?.getBoundingClientRect()?.width),A,x,a,R,e,y,d,H);y.preventDefault(),S||s({boundingBox:x.getBoundingClientRect(),elem:x,isBelow:P})}else He(A,a?.elem),s({boundingBox:x.getBoundingClientRect(),elem:x,isBelow:!1});return!0}function g(y){if(!c.current)return!1;let[b]=we(y);if(b)return!1;let{dataTransfer:R,pageY:M,target:L}=y,v=R?.getData(Be)||"";return t.update(()=>{let x=xt(v);if(!x||!W(L))return!1;let F=Y(l,y.pageX,y.pageY,L,100,50),{blockElem:H,isFoundNodeEmptyParagraph:A}=V({anchorElem:e,editor:t,fuzzy:!0,horizontalOffset:-F,point:new I(y.x,y.y),useEdgeAsDefault:!0});if(!H)return!1;let P=Ie(H);if(!P)return!1;if(P===x)return!0;let{height:S,top:ie}=D(H),qe=M>=ie+S/2+window.scrollY;A?(P.insertBefore(x),P.remove()):qe?P.insertAfter(x):P.insertBefore(x),m!==null&&p(null),document.querySelectorAll(".lexical-block-highlighter").forEach(K=>{K.remove()});let Je=t.getElementByKey(x.getKey());setTimeout(()=>{let K=Je.getBoundingClientRect(),T=document.createElement("div");T.className="lexical-block-highlighter",document.documentElement.getAttribute("data-theme")==="dark"?T.style.backgroundColor="white":T.style.backgroundColor="black",T.style.transition="opacity 0.1s ease-in-out",T.style.zIndex="1",T.style.pointerEvents="none",T.style.boxSizing="border-box",T.style.borderRadius="4px",T.style.position="absolute",document.body.appendChild(T),T.style.opacity="0.1",T.style.height=`${K.height+8}px`,T.style.width=`${K.width+8}px`,T.style.top=`${K.top+window.scrollY-4}px`,T.style.left=`${K.left-4}px`,setTimeout(()=>{T.style.opacity="0",setTimeout(()=>{T.remove()},1e3)},3e3)},120)}),!0}return document.addEventListener("dragover",h),document.addEventListener("drop",g),()=>{document.removeEventListener("dragover",h),document.removeEventListener("drop",g)}},[l,n,e,t,a,m,o?.admin?.hideGutter]);function f(h){let g=h.dataTransfer;if(!g||!m)return;Mt(g,m);let y="";t.update(()=>{let b=Ie(m);b&&(y=b.getKey())}),c.current=!0,g.setData(Be,y)}function E(){c.current=!1,He(u.current,a?.elem)}return Ct(vt(Ae.Fragment,{children:[ne("div",{className:"icon draggable-block-menu",draggable:!0,onDragEnd:E,onDragStart:f,ref:r,children:ne("div",{className:i?"icon":""})}),ne("div",{className:"draggable-block-target-line",ref:u}),ne("div",{className:"debug-highlight",ref:d})]}),e)}function Oe({anchorElem:t=document.body}){let[e]=bt();return Lt(e,t,e._editable)}import{ContentEditable as Rt}from"@lexical/react/LexicalContentEditable.js";import{jsx as Pt}from"react/jsx-runtime";function _e({className:t}){return Pt(Rt,{className:t??"ContentEditable__root"})}import{jsx as C,jsxs as j}from"react/jsx-runtime";var Ke=t=>{let{editorConfig:e,editorContainerRef:i,onChange:l}=t,r=N(),[u]=Nt(),{t:d}=Bt(),[c,m]=Ge(null),p=o=>{o!==null&&m(o)};$e(()=>{if(!r?.uuid){console.error("Lexical Editor must be used within an EditorConfigProvider");return}r?.parentEditor?.uuid&&r.parentEditor?.registerChild(r.uuid,r);let o=()=>{r.focusEditor(r)},n=()=>{r.blurEditor(r)},f=u.registerCommand(Ht,()=>(o(),!0),ze),E=u.registerCommand(Ft,()=>(n(),!0),ze);return()=>{f(),E(),r.parentEditor?.unregisterChild?.(r.uuid)}},[u,r]);let[a,s]=Ge(!1);return $e(()=>{let o=()=>{let n=window.matchMedia("(max-width: 768px)").matches;n!==a&&s(n)};return o(),window.addEventListener("resize",o),()=>{window.removeEventListener("resize",o)}},[a]),j(q.Fragment,{children:[e.features.plugins.map(o=>{if(o.position==="aboveContainer")return C(O,{clientProps:o.clientProps,plugin:o},o.key)}),j("div",{className:"editor-container",ref:i,children:[e.features.plugins.map(o=>{if(o.position==="top")return C(O,{clientProps:o.clientProps,plugin:o},o.key)}),C(It,{ErrorBoundary:St,contentEditable:C("div",{className:"editor-scroller",children:C("div",{className:"editor",ref:p,children:C(_e,{})})}),placeholder:C("p",{className:"editor-placeholder",children:d("lexical:general:placeholder")})}),C(wt,{ignoreSelectionChange:!0,onChange:(o,n,f)=>{(!f.has("focus")||f.size>1)&&l?.(o,n,f)}}),c&&j(q.Fragment,{children:[!a&&u.isEditable()&&j(q.Fragment,{children:[C(Oe,{anchorElem:c}),C(Ne,{anchorElem:c})]}),e.features.plugins.map(o=>{if(o.position==="floatingAnchorElem"&&!(o.desktopOnly===!0&&a))return C(O,{anchorElem:c,clientProps:o.clientProps,plugin:o},o.key)}),u.isEditable()&&C(q.Fragment,{children:C(Te,{anchorElem:c})})]}),u.isEditable()&&j(q.Fragment,{children:[C(kt,{}),e?.features?.markdownTransformers?.length>0&&C(ye,{})]}),C(Dt,{}),e.features.plugins.map(o=>{if(o.position==="normal")return C(O,{clientProps:o.clientProps,plugin:o},o.key)}),e.features.plugins.map(o=>{if(o.position==="bottom")return C(O,{clientProps:o.clientProps,plugin:o},o.key)})]}),e.features.plugins.map(o=>{if(o.position==="belowContainer")return C(O,{clientProps:o.clientProps,plugin:o},o.key)})]})};import{jsx as B}from"react/jsx-runtime";var Ve=({children:t,providers:e})=>{if(!e?.length)return t;let i=e[0];return e.length>1?B(i,{children:B(Ve,{providers:e.slice(1),children:t})}):B(i,{children:t})},Ue=t=>{let{editorConfig:e,fieldProps:i,onChange:l,path:r,readOnly:u,value:d}=t,c=N(),m=Ye.useRef(null),p=We(()=>{let s=d;return e?.features?.hooks?.load?.length&&e.features.hooks.load.forEach(o=>{s=o({incomingEditorState:s})}),s},[e,d]),a=We(()=>{if(p&&typeof p!="object")throw new Error("The value passed to the Lexical editor is not an object. This is not supported. Please remove the data from the field and start again. This is the value that was passed in: "+JSON.stringify(p));if(p&&Array.isArray(p)&&!("root"in p))throw new Error("You have tried to pass in data from the old, Slate editor, to the new, Lexical editor. This is not supported. There is no automatic conversion from Slate to Lexical data available yet (coming soon). Please remove the data from the field and start again.");if(p&&"jsonContent"in p)throw new Error("You have tried to pass in data from payload-plugin-lexical. This is not supported. The data structure has changed in this editor, compared to the plugin, and there is no automatic conversion available yet (coming soon). Please remove the data from the field and start again.");return{editable:u!==!0,editorState:p!=null?JSON.stringify(p):void 0,namespace:e.lexical.namespace,nodes:[...ce({editorConfig:e})],onError:s=>{throw s},theme:e.lexical.theme}},[e,p,u]);return a?B(At,{initialConfig:a,children:B(me,{editorConfig:e,editorContainerRef:m,fieldProps:i,parentContext:c,children:B(Ve,{providers:e.features.providers,children:B(Ke,{editorConfig:e,editorContainerRef:m,onChange:l})})})},r):B("p",{children:"Loading..."})};import"./bundled.css";import{jsx as G,jsxs as se}from"react/jsx-runtime";var re="rich-text-lexical",Vt=t=>{let{name:e,CustomDescription:i,CustomError:l,CustomLabel:r,className:u,descriptionProps:d,editorConfig:c,errorProps:m,label:p,labelProps:a,path:s,readOnly:o,required:n,style:f,validate:E,width:h}=t,g=Wt((P,S)=>{if(typeof E=="function")return E(P,{...S,props:t,required:n})},[E,n]),{path:y}=Gt(),b=$t({path:y??s??e,validate:g}),{errorMessage:R,initialValue:M,path:L,schemaPath:v,setValue:x,showError:F,value:H}=b,A=[re,"field-type",u,F&&"error",o&&`${re}--read-only`,c?.admin?.hideGutter!==!0?`${re}--show-gutter`:null].filter(Boolean).join(" ");return se("div",{className:A,style:{...f,width:h},children:[G(_t,{CustomError:l,path:L,...m||{},alignCaret:"left"}),G(zt,{CustomLabel:r,label:p,required:n,...a||{}}),se("div",{className:`${re}__wrap`,children:[G(Yt,{fallbackRender:Ut,onReset:()=>{},children:G(Ue,{editorConfig:c,fieldProps:t,onChange:P=>{let S=P.toJSON();c?.features?.hooks?.save?.length&&c.features.hooks.save.forEach(ie=>{S=ie({incomingEditorState:S})}),x(S)},path:L,readOnly:o,value:H},JSON.stringify({initialValue:M,path:L}))}),i!==void 0?i:G(Ot,{...d||{}})]})]},L)};function Ut({error:t}){return se("div",{className:"errorBoundary",role:"alert",children:[G("p",{children:"Something went wrong:"}),G("pre",{style:{color:"red"},children:t.message})]})}var qn=Kt(Vt);export{qn as RichText};
//# sourceMappingURL=Field-5KHQLTCU.js.map
