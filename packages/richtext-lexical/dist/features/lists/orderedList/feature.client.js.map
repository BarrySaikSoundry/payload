{"version":3,"sources":["../../../../src/features/lists/orderedList/feature.client.tsx"],"sourcesContent":["'use client'\nimport { $isListNode, INSERT_ORDERED_LIST_COMMAND, ListItemNode, ListNode } from '@lexical/list'\nimport { $isRangeSelection } from 'lexical'\n\nimport type { ToolbarGroup } from '../../toolbars/types.js'\n\nimport { OrderedListIcon } from '../../../lexical/ui/icons/OrderedList/index.js'\nimport { createClientFeature } from '../../../utilities/createClientFeature.js'\nimport { toolbarTextDropdownGroupWithItems } from '../../shared/toolbar/textDropdownGroup.js'\nimport { LexicalListPlugin } from '../plugin/index.js'\nimport { slashMenuListGroupWithItems } from '../shared/slashMenuListGroup.js'\nimport { ORDERED_LIST } from './markdownTransformer.js'\n\nconst toolbarGroups: ToolbarGroup[] = [\n  toolbarTextDropdownGroupWithItems([\n    {\n      ChildComponent: OrderedListIcon,\n      isActive: ({ selection }) => {\n        if (!$isRangeSelection(selection)) {\n          return false\n        }\n        for (const node of selection.getNodes()) {\n          if ($isListNode(node) && node.getListType() === 'number') {\n            continue\n          }\n\n          const parent = node.getParent()\n\n          if ($isListNode(parent) && parent.getListType() === 'number') {\n            continue\n          }\n\n          const parentParent = parent?.getParent()\n          // Example scenario: Node = textNode, parent = listItemNode, parentParent = listNode\n          if ($isListNode(parentParent) && parentParent.getListType() === 'number') {\n            continue\n          }\n\n          return false\n        }\n        return true\n      },\n      key: 'orderedList',\n      label: ({ i18n }) => {\n        return i18n.t('lexical:orderedList:label')\n      },\n      onSelect: ({ editor }) => {\n        editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND, undefined)\n      },\n      order: 10,\n    },\n  ]),\n]\n\nexport const OrderedListFeatureClient = createClientFeature(({ featureProviderMap }) => {\n  return {\n    markdownTransformers: [ORDERED_LIST],\n    nodes: featureProviderMap.has('orderedList') ? [] : [ListNode, ListItemNode],\n    plugins: featureProviderMap.has('orderedList')\n      ? []\n      : [\n          {\n            Component: LexicalListPlugin,\n            position: 'normal',\n          },\n        ],\n    slashMenu: {\n      groups: [\n        slashMenuListGroupWithItems([\n          {\n            Icon: OrderedListIcon,\n            key: 'orderedList',\n            keywords: ['ordered list', 'ol'],\n            label: ({ i18n }) => {\n              return i18n.t('lexical:orderedList:label')\n            },\n            onSelect: ({ editor }) => {\n              editor.dispatchCommand(INSERT_ORDERED_LIST_COMMAND, undefined)\n            },\n          },\n        ]),\n      ],\n    },\n    toolbarFixed: {\n      groups: toolbarGroups,\n    },\n    toolbarInline: {\n      groups: toolbarGroups,\n    },\n  }\n})\n"],"names":["$isListNode","INSERT_ORDERED_LIST_COMMAND","ListItemNode","ListNode","$isRangeSelection","OrderedListIcon","createClientFeature","toolbarTextDropdownGroupWithItems","LexicalListPlugin","slashMenuListGroupWithItems","ORDERED_LIST","toolbarGroups","ChildComponent","isActive","selection","node","getNodes","getListType","parent","getParent","parentParent","key","label","i18n","t","onSelect","editor","dispatchCommand","undefined","order","OrderedListFeatureClient","featureProviderMap","markdownTransformers","nodes","has","plugins","Component","position","slashMenu","groups","Icon","keywords","toolbarFixed","toolbarInline"],"mappings":"AAAA;AACA,SAASA,WAAW,EAAEC,2BAA2B,EAAEC,YAAY,EAAEC,QAAQ,QAAQ,gBAAe;AAChG,SAASC,iBAAiB,QAAQ,UAAS;AAI3C,SAASC,eAAe,QAAQ,iDAAgD;AAChF,SAASC,mBAAmB,QAAQ,4CAA2C;AAC/E,SAASC,iCAAiC,QAAQ,4CAA2C;AAC7F,SAASC,iBAAiB,QAAQ,qBAAoB;AACtD,SAASC,2BAA2B,QAAQ,kCAAiC;AAC7E,SAASC,YAAY,QAAQ,2BAA0B;AAEvD,MAAMC,gBAAgC;IACpCJ,kCAAkC;QAChC;YACEK,gBAAgBP;YAChBQ,UAAU,CAAC,EAAEC,SAAS,EAAE;gBACtB,IAAI,CAACV,kBAAkBU,YAAY;oBACjC,OAAO;gBACT;gBACA,KAAK,MAAMC,QAAQD,UAAUE,QAAQ,GAAI;oBACvC,IAAIhB,YAAYe,SAASA,KAAKE,WAAW,OAAO,UAAU;wBACxD;oBACF;oBAEA,MAAMC,SAASH,KAAKI,SAAS;oBAE7B,IAAInB,YAAYkB,WAAWA,OAAOD,WAAW,OAAO,UAAU;wBAC5D;oBACF;oBAEA,MAAMG,eAAeF,QAAQC;oBAC7B,oFAAoF;oBACpF,IAAInB,YAAYoB,iBAAiBA,aAAaH,WAAW,OAAO,UAAU;wBACxE;oBACF;oBAEA,OAAO;gBACT;gBACA,OAAO;YACT;YACAI,KAAK;YACLC,OAAO,CAAC,EAAEC,IAAI,EAAE;gBACd,OAAOA,KAAKC,CAAC,CAAC;YAChB;YACAC,UAAU,CAAC,EAAEC,MAAM,EAAE;gBACnBA,OAAOC,eAAe,CAAC1B,6BAA6B2B;YACtD;YACAC,OAAO;QACT;KACD;CACF;AAED,OAAO,MAAMC,2BAA2BxB,oBAAoB,CAAC,EAAEyB,kBAAkB,EAAE;IACjF,OAAO;QACLC,sBAAsB;YAACtB;SAAa;QACpCuB,OAAOF,mBAAmBG,GAAG,CAAC,iBAAiB,EAAE,GAAG;YAAC/B;YAAUD;SAAa;QAC5EiC,SAASJ,mBAAmBG,GAAG,CAAC,iBAC5B,EAAE,GACF;YACE;gBACEE,WAAW5B;gBACX6B,UAAU;YACZ;SACD;QACLC,WAAW;YACTC,QAAQ;gBACN9B,4BAA4B;oBAC1B;wBACE+B,MAAMnC;wBACNgB,KAAK;wBACLoB,UAAU;4BAAC;4BAAgB;yBAAK;wBAChCnB,OAAO,CAAC,EAAEC,IAAI,EAAE;4BACd,OAAOA,KAAKC,CAAC,CAAC;wBAChB;wBACAC,UAAU,CAAC,EAAEC,MAAM,EAAE;4BACnBA,OAAOC,eAAe,CAAC1B,6BAA6B2B;wBACtD;oBACF;iBACD;aACF;QACH;QACAc,cAAc;YACZH,QAAQ5B;QACV;QACAgC,eAAe;YACbJ,QAAQ5B;QACV;IACF;AACF,GAAE"}