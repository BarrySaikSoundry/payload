"use client";(()=>{var BT=Object.create;var Wc=Object.defineProperty;var HT=Object.getOwnPropertyDescriptor;var zT=Object.getOwnPropertyNames;var UT=Object.getPrototypeOf,jT=Object.prototype.hasOwnProperty;var l=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,o)=>(typeof require<"u"?require:t)[o]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var b=(e,t)=>()=>(e&&(t=e(e=0)),t);var mr=(e,t)=>{for(var o in t)Wc(e,o,{get:t[o],enumerable:!0})},VT=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of zT(t))!jT.call(e,n)&&n!==o&&Wc(e,n,{get:()=>t[n],enumerable:!(r=HT(t,n))||r.enumerable});return e};var F=(e,t,o)=>(o=e!=null?BT(UT(e)):{},VT(t||!e||!e.__esModule?Wc(o,"default",{value:e,enumerable:!0}):o,e));var vs,mf,uf=b(()=>{vs=l("react"),mf=(e,t)=>{let o=(0,vs.useRef)(void 0);return(0,vs.useCallback)((...r)=>{let n=()=>{clearTimeout(o.current),e(...r)};clearTimeout(o.current),o.current=setTimeout(n,t)},[e,t])}});function ff(e,t,o){let[r,n]=(0,ll.useState)(()=>e);(0,ll.useEffect)(()=>{let i=setTimeout(()=>{n(()=>e)},t);return()=>{clearTimeout(i)}},[...o,t]),(0,ll.useEffect)(()=>{r()},[r])}var ll,gf=b(()=>{ll=l("react")});var Zn,hn,sl=b(()=>{"use client";Zn=l("react"),hn=({root:e=null,rootMargin:t="0px",threshold:o=0}={},r)=>{let[n,i]=(0,Zn.useState)(),[a,s]=(0,Zn.useState)(null),d=(0,Zn.useRef)(typeof window<"u"&&"IntersectionObserver"in window&&!r?new window.IntersectionObserver(([c])=>i(c),{root:e,rootMargin:t,threshold:o}):null);return(0,Zn.useEffect)(()=>{if(r)return;let{current:c}=d;return c.disconnect(),a&&c.observe(a),()=>c.disconnect()},[a,r]),[s,n,a]}});var hf=b(()=>{});var Kc,bo,qi=b(()=>{Kc=F(l("react"),1);hf();bo=({className:e,direction:t,size:o})=>Kc.default.createElement("svg",{className:["icon icon--chevron",e,o&&`icon--size-${o}`].filter(Boolean).join(" "),height:"100%",style:{transform:t==="left"?"rotate(90deg)":t==="right"?"rotate(-90deg)":t==="up"?"rotate(180deg)":void 0},viewBox:"0 0 9 7",width:"100%",xmlns:"http://www.w3.org/2000/svg"},Kc.default.createElement("path",{className:"stroke",d:"M1.42871 1.5332L4.42707 4.96177L7.42543 1.5332"}))});var bf=b(()=>{});var dl,bn,cl=b(()=>{dl=F(l("react"),1);bf();bn=({className:e})=>dl.default.createElement("svg",{className:[e,"icon icon--edit"].filter(Boolean).join(" "),viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},dl.default.createElement("polygon",{className:"fill",points:"16.92 16.86 8.25 16.86 8.25 8.21 12.54 8.21 12.54 6.63 6.68 6.63 6.68 18.43 18.5 18.43 18.5 12.53 16.92 12.53 16.92 16.86"}),dl.default.createElement("polygon",{className:"fill",points:"16.31 7.33 17.42 8.44 12.66 13.2 11.51 13.24 11.55 12.09 16.31 7.33"}),dl.default.createElement("rect",{className:"fill",height:"1.15",transform:"translate(10.16 -10.48) rotate(45)",width:"1.58",x:"16.94",y:"6.44"}))});var xf=b(()=>{});var _s,yf,Cf=b(()=>{_s=F(l("react"),1);xf();yf=()=>_s.default.createElement("svg",{"aria-hidden":"true",className:"graphic link icon icon--link",fill:"currentColor",focusable:"false",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},_s.default.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),_s.default.createElement("path",{className:"fill",d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}))});var vf=b(()=>{});var ws,ei,ks=b(()=>{ws=F(l("react"),1);vf();ei=()=>ws.default.createElement("svg",{className:"icon icon--plus",viewBox:"0 0 25 25",width:"25",xmlns:"http://www.w3.org/2000/svg"},ws.default.createElement("line",{className:"stroke",x1:"12.4589",x2:"12.4589",y1:"16.9175",y2:"8.50115"}),ws.default.createElement("line",{className:"stroke",x1:"8.05164",x2:"16.468",y1:"12.594",y2:"12.594"}))});var _f=b(()=>{});var Qi,wf,kf=b(()=>{Qi=F(l("react"),1);_f();wf=()=>Qi.default.createElement("svg",{className:"icon icon--swap",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},Qi.default.createElement("path",{className:"stroke",d:"M9.84631 4.78679L6.00004 8.63306L9.84631 12.4793"}),Qi.default.createElement("path",{className:"stroke",d:"M15.1537 20.1059L19 16.2596L15.1537 12.4133"}),Qi.default.createElement("line",{className:"stroke",stroke:"#333333",x1:"7",x2:"15",y1:"8.7013",y2:"8.7013"}),Qi.default.createElement("line",{className:"stroke",x1:"18",x2:"10",y1:"16.1195",y2:"16.1195"}))});var Tf=b(()=>{});var Ts,zt,Rr=b(()=>{Ts=F(l("react"),1);Tf();zt=({className:e})=>Ts.default.createElement("svg",{className:[e,"icon icon--x"].filter(Boolean).join(" "),height:"25",viewBox:"0 0 25 25",width:"25",xmlns:"http://www.w3.org/2000/svg"},Ts.default.createElement("line",{className:"stroke",x1:"8.74612",x2:"16.3973",y1:"16.347",y2:"8.69584"}),Ts.default.createElement("line",{className:"stroke",x1:"8.6027",x2:"16.2539",y1:"8.69585",y2:"16.3471"}))});var Ef=b(()=>{});var Fo,Ut,Dr=b(()=>{"use client";Fo=F(l("react"),1);sl();Ef();Ut=e=>{let{alignCaret:t="center",boundingRef:o,children:r,className:n,delay:i=350,show:a=!0,staticPositioning:s=!1}=e,[d,c]=Fo.default.useState(a),[p,u]=Fo.default.useState("top"),m=g=>typeof g=="string"?g:"",[f,h]=hn({root:o?.current||null,rootMargin:"-145px 0px 0px 100px",threshold:0},s);return(0,Fo.useEffect)(()=>{let g;return i&&a?g=setTimeout(()=>{c(a)},i):c(a),()=>{g&&clearTimeout(g)}},[a,i]),(0,Fo.useEffect)(()=>{s||u(h?.isIntersecting?"top":"bottom")},[h,s]),Fo.default.createElement(Fo.default.Fragment,null,!s&&Fo.default.createElement("aside",{"aria-hidden":"true",className:["tooltip",n,`tooltip--caret-${t}`,"tooltip--position-top"].filter(Boolean).join(" "),ref:f,style:{opacity:"0"}},Fo.default.createElement("div",{className:"tooltip-content"},r)),Fo.default.createElement("aside",{className:["tooltip",n,d&&"tooltip--show",`tooltip--caret-${t}`,`tooltip--position-${p}`].filter(Boolean).join(" "),title:m(r)},Fo.default.createElement("div",{className:"tooltip-content"},r)))}});var Pf=b(()=>{});var at,GT,ao,qc,Ve,xn=b(()=>{"use client";at=F(l("react"),1);qi();cl();Cf();ks();kf();Rr();Dr();Pf();GT={chevron:bo,edit:bn,link:yf,plus:ei,swap:wf,x:zt},ao="btn",qc=({children:e,icon:t,showTooltip:o,tooltip:r})=>{let n=GT[t];return at.default.createElement(at.Fragment,null,r&&at.default.createElement(Ut,{className:`${ao}__tooltip`,show:o},r),at.default.createElement("span",{className:`${ao}__content`},e&&at.default.createElement("span",{className:`${ao}__label`},e),t&&at.default.createElement("span",{className:`${ao}__icon`},(0,at.isValidElement)(t)&&t,n&&at.default.createElement(n,null))))},Ve=(0,at.forwardRef)((e,t)=>{let{id:o,type:r="button",Link:n,"aria-label":i,buttonStyle:a="primary",children:s,className:d,disabled:c,el:p="button",icon:u,iconPosition:m="right",iconStyle:f="without-border",newTab:h,onClick:g,round:x,size:y="medium",to:v,tooltip:E,url:w}=e,[C,S]=at.default.useState(!1),L=[ao,d&&d,a&&`${ao}--style-${a}`,u&&`${ao}--icon`,f&&`${ao}--icon-style-${f}`,u&&!s&&`${ao}--icon-only`,c&&`${ao}--disabled`,x&&`${ao}--round`,y&&`${ao}--size-${y}`,m&&`${ao}--icon-position-${m}`,E&&`${ao}--has-tooltip`].filter(Boolean).join(" ");function N(T){S(!1),r!=="submit"&&g&&T.preventDefault(),g&&g(T)}let _={id:o,type:r,"aria-disabled":c,"aria-label":i,className:L,disabled:c,onClick:c?void 0:N,onMouseEnter:E?()=>S(!0):void 0,onMouseLeave:E?()=>S(!1):void 0,rel:h?"noopener noreferrer":void 0,target:h?"_blank":void 0};switch(p){case"link":return n?at.default.createElement(n,{..._,href:v||w,to:v||w},at.default.createElement(qc,{icon:u,showTooltip:C,tooltip:E},s)):(console.error('Link is required when using el="link"',s),null);case"anchor":return at.default.createElement("a",{..._,href:w,ref:t},at.default.createElement(qc,{icon:u,showTooltip:C,tooltip:E},s));default:return at.default.createElement(p,{ref:t,type:"submit",..._},at.default.createElement(qc,{icon:u,showTooltip:C,tooltip:E},s))}})});var pl,WT,J,et=b(()=>{"use client";pl=F(l("react"),1),WT=(0,pl.createContext)({}),J=()=>(0,pl.useContext)(WT)});var Ff,Sf,ti,KT,M,W=b(()=>{"use client";Ff=l("@payloadcms/translations"),Sf=l("date-fns/locale/en-US"),ti=F(l("react"),1),KT=(0,ti.createContext)({i18n:{dateFNS:Sf.enUS,dateFNSKey:"en-US",fallbackLanguage:"en",language:"en",t:e=>e,translations:{}},languageOptions:void 0,switchLanguage:void 0,t:e=>{}}),M=()=>(0,ti.useContext)(KT)});var Lf,Es,Qc=b(()=>{Lf=F(l("qs-esm"),1),Es={delete:(e,t={headers:{}})=>{let o=t&&t.headers?{...t.headers}:{},r={...t,credentials:"include",headers:{...o},method:"delete"};return fetch(e,r)},get:(e,t={headers:{}})=>{let o="";return t.params&&(o=Lf.stringify(t.params,{addQueryPrefix:!0})),fetch(`${e}${o}`,{credentials:"include",...t})},patch:(e,t={headers:{}})=>{let o=t&&t.headers?{...t.headers}:{},r={...t,credentials:"include",headers:{...o},method:"PATCH"};return fetch(e,r)},post:(e,t={headers:{}})=>{let o=t&&t.headers?{...t.headers}:{},r={...t,credentials:"include",headers:{...o},method:"post"};return fetch(`${e}`,r)},put:(e,t={headers:{}})=>{let o=t&&t.headers?{...t.headers}:{},r={...t,credentials:"include",headers:{...o},method:"put"};return fetch(e,r)}}});var qT,Nf,ml,QT,JT,Ps,Jc=b(()=>{"use client";qT=l("next/navigation.js"),Nf=F(l("qs-esm"),1),ml=F(l("react"),1),QT={searchParams:{},stringifyParams:()=>""},JT=(0,ml.createContext)(QT),Ps=()=>(0,ml.useContext)(JT)});var YT,Rf,XT,yn,ZT,eE,ut,ur=b(()=>{"use client";YT=l("@faceless-ui/modal"),Rf=l("next/navigation.js"),XT=F(l("qs-esm"),1),yn=F(l("react"),1),ZT=l("sonner"),eE=(0,yn.createContext)({}),ut=()=>(0,yn.useContext)(eE)});var tE,Cn,oE,So,oi=b(()=>{"use client";tE=l("dequal/lite"),Cn=F(l("react"),1),oE=(0,Cn.createContext)({}),So=()=>(0,Cn.useContext)(oE)});var ri,rE,vt,fr=b(()=>{"use client";ri=F(l("react"),1),rE=(0,ri.createContext)({}),vt=()=>(0,ri.useContext)(rE)});var Df,gr,ni,Yc=b(()=>{"use client";Df=F(l("qs-esm"),1),gr=l("react");fr();W();Qc();ni=(e,t={})=>{let{initialData:o,initialParams:r={}}=t,{i18n:n}=M(),[i,a]=(0,gr.useState)(o||{}),[s,d]=(0,gr.useState)(r),[c,p]=(0,gr.useState)(!o),[u,m]=(0,gr.useState)(!1),{code:f}=vt(),h=(0,gr.useRef)(!1),g=Df.stringify({locale:f,...typeof s=="object"?s:{}},{addQueryPrefix:!0});return(0,gr.useEffect)(()=>{if(o&&!h.current){h.current=!0;return}let x=new AbortController;return e?(async()=>{m(!1),p(!0);try{let v=await Es.get(`${e}${g}`,{headers:{"Accept-Language":n.language},signal:x.signal});v.status>201&&m(!0);let E=await v.json();a(E),p(!1)}catch{x.signal.aborted||(m(!0),p(!1))}})():(m(!1),p(!1)),()=>{x.abort()}},[e,f,g,n.language,o]),(0,gr.useEffect)(()=>{o&&h.current&&a(o)},[o]),[{data:i,isError:u,isLoading:c},{setParams:d}]}});var Fs,Mr,ul=b(()=>{Fs=l("react"),Mr=(e,t,o=[])=>{let r=(0,Fs.useRef)(Date.now());(0,Fs.useEffect)(()=>{let n=setTimeout(()=>{Date.now()-r.current>=t&&(e(),r.current=Date.now())},t-(Date.now()-r.current));return()=>{clearTimeout(n)}},[t,...o])}});var Ss,Mf=b(()=>{Ss=(e,t)=>e.reduce((o,r)=>{if("name"in r||t&&r.fieldIsPresentational)return o.push(r),o;if("fieldMap"in r.fieldComponentProps)o.push(...Ss(r.fieldComponentProps.fieldMap,t));else if(r.type==="tabs"&&"tabs"in r.fieldComponentProps&&Array.isArray(r.fieldComponentProps.tabs))return[...o,...r.fieldComponentProps.tabs.reduce((n,i)=>[...n,..."name"in i?[{...i}]:Ss(i.fieldMap,t)],[])];return o},[])});var If=b(()=>{});var Ji,Af,Of=b(()=>{Ji=F(l("react"),1);If();Af=()=>Ji.default.createElement("svg",{className:"icon icon--calendar",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},Ji.default.createElement("rect",{className:"stroke",height:"14",width:"16",x:"4.5",y:"6.11401"}),Ji.default.createElement("line",{className:"stroke",x1:"8.625",x2:"8.625",y1:"8.02026",y2:"3.70776"}),Ji.default.createElement("line",{className:"stroke",x1:"16.375",x2:"16.375",y1:"8.02026",y2:"3.70776"}),Ji.default.createElement("line",{className:"stroke",x1:"4.5",x2:"20.5",y1:"11.114",y2:"11.114"}))});var $f,Bf=b(()=>{$f=(e="enUS")=>({en:"enUS",my:"enUS",ua:"uk",zh:"zhCN"})[e]||e});var Hf=b(()=>{});var zf={};mr(zf,{default:()=>aE});var vn,gl,zL,nE,fl,iE,aE,Uf=b(()=>{"use client";vn=F(l("react"),1),gl=F(l("react-datepicker"),1),zL=l("react-datepicker/dist/react-datepicker.css");Of();Rr();W();Bf();Hf();nE=gl.default.default||gl.default,fl="date-time-picker",iE=e=>{let{displayFormat:t,maxDate:o,maxTime:r,minDate:n,minTime:i,monthsToShow:a=1,onChange:s,overrides:d,pickerAppearance:c="default",placeholder:p,readOnly:u,timeFormat:m="h:mm aa",timeIntervals:f=30,value:h}=e,{i18n:g}=M(),x=$f(g.language);try{(0,gl.registerLocale)(x,g.dateFNS)}catch{console.warn(`Could not find DatePicker locale for ${g.language}`)}let y=t;t||(c==="default"?y="MM/dd/yyyy":c==="dayAndTime"?y="MMM d, yyy h:mm a":c==="timeOnly"?y="h:mm a":c==="dayOnly"?y="MMM dd":c==="monthOnly"&&(y="MMMM"));let v=C=>{let S=C;if(S instanceof Date&&["dayOnly","default","monthOnly"].includes(c)){let L=C.getTimezoneOffset()/60;S.setHours(12-L,0)}typeof s=="function"&&s(S)},E={customInputRef:"ref",dateFormat:y,disabled:u,maxDate:o,maxTime:r,minDate:n,minTime:i,monthsShown:Math.min(2,a),onChange:v,placeholderText:p,popperPlacement:"bottom-start",selected:h&&new Date(h),showMonthYearPicker:c==="monthOnly",showPopperArrow:!1,showTimeSelect:c==="dayAndTime"||c==="timeOnly",timeFormat:m,timeIntervals:f,...d},w=[fl,`${fl}__appearance--${c}`].filter(Boolean).join(" ");return vn.default.createElement("div",{className:w},vn.default.createElement("div",{className:`${fl}__icon-wrap`},E.selected&&vn.default.createElement("button",{className:`${fl}__clear-button`,onClick:()=>v(null),type:"button"},vn.default.createElement(zt,null)),vn.default.createElement(Af,null)),vn.default.createElement("div",{className:`${fl}__input-wrapper`},vn.default.createElement(nE,{...E,dropdownMode:"select",locale:x,showMonthDropdown:!0,showYearDropdown:!0})))},aE=iE});var jf=b(()=>{});function lE(e){return Ls.default.isValidElement(e)}var Vf,Ls,Gf,Wf=b(()=>{"use client";Vf=l("@payloadcms/translations"),Ls=F(l("react"),1);W();jf();Gf=e=>{let{i18n:t}=M(),{description:o}=e;return lE(o)?Ls.default.createElement(o,null):o?Ls.default.createElement("div",{className:"view-description"},typeof o=="function"?o():(0,Vf.getTranslation)(o,t)):null}});var Yi,sE,Xi,Ns=b(()=>{"use client";Yi=F(l("react"),1),sE=(0,Yi.createContext)({}),Xi=()=>(0,Yi.useContext)(sE)});var Kf=b(()=>{});var hr={};mr(hr,{Button:()=>ep,ButtonGroup:()=>Zc});var Xc,hl,dE,bl,Zc,ep,tp=b(()=>{"use client";Xc=F(l("next/link.js"),1),hl=F(l("react"),1);Kf();dE=Xc.default.default||Xc.default,bl="popup-button-list",Zc=({buttonSize:e="default",children:t,className:o,textAlign:r="left"})=>{let n=[bl,o,`${bl}__text-align--${r}`,`${bl}__button-size--${e}`].filter(Boolean).join(" ");return hl.createElement("div",{className:n},t)},ep=({id:e,active:t,children:o,className:r,href:n,onClick:i})=>{let a=[`${bl}__button`,t&&`${bl}__button--selected`,r].filter(Boolean).join(" ");return n?hl.createElement(dE,{className:a,href:n,id:e,onClick:()=>{i&&i()}},o):i?hl.createElement("button",{className:a,id:e,onClick:()=>{i&&i()},type:"button"},o):hl.createElement("div",{className:a,id:e},o)}});var qf=b(()=>{});var op,Qf,rp,Jf=b(()=>{"use client";op=F(l("react"),1);qf();Qf="popup-button",rp=e=>{let{active:t,button:o,buttonType:r,className:n,setActive:i}=e,a=[Qf,n,`${Qf}--${r}`].filter(Boolean).join(" "),s=()=>{i(!t)};return r==="none"?null:r==="custom"?op.default.createElement("div",{className:a,onClick:s,onKeyDown:d=>{d.key==="Enter"&&s()},role:"button",tabIndex:0},o):op.default.createElement("button",{className:a,onClick:()=>i(!t),tabIndex:0,type:"button"},o)}});var Yf=b(()=>{});var Xf,$e,xo,Rs,np=b(()=>{"use client";tp();Xf=l("@faceless-ui/window-info"),$e=F(l("react"),1);sl();Jf();Yf();xo="popup",Rs=e=>{let{boundingRef:t,button:o,buttonClassName:r,buttonType:n="default",caret:i=!0,children:a,className:s,forceOpen:d,horizontalAlign:c="left",initActive:p=!1,onToggleOpen:u,render:m,showOnHover:f=!1,showScrollbar:h=!1,size:g="medium",verticalAlign:x="top"}=e,{height:y,width:v}=(0,Xf.useWindowInfo)(),[E,w]=hn({root:t?.current||null,rootMargin:"-100px 0px 0px 0px",threshold:1}),C=(0,$e.useRef)(null),[S,L]=(0,$e.useState)(p),[N,_]=(0,$e.useState)(x),[T,k]=(0,$e.useState)(c),P=(0,$e.useCallback)(({horizontal:I=!1,vertical:A=!1})=>{if(C.current){let O=C.current.getBoundingClientRect(),{bottom:B,left:$,right:H,top:te}=O,ne=100,pe=document.documentElement.clientWidth,Te=document.documentElement.clientHeight,G=0;t?.current&&({bottom:Te,left:G,right:pe,top:ne}=t.current.getBoundingClientRect()),I&&(H>pe&&$>G?k("right"):$<G&&H<pe&&k("left")),A&&(te<ne&&B<Te?_("bottom"):B>Te&&te>ne&&_("top"))}},[t]),R=(0,$e.useCallback)(I=>{C.current.contains(I.target)||L(!1)},[C]);(0,$e.useEffect)(()=>{P({horizontal:!0})},[w,P,v]),(0,$e.useEffect)(()=>{P({vertical:!0})},[w,P,y]),(0,$e.useEffect)(()=>(typeof u=="function"&&u(S),S?document.addEventListener("mousedown",R):document.removeEventListener("mousedown",R),()=>{document.removeEventListener("mousedown",R)}),[S,R,u]),(0,$e.useEffect)(()=>{L(d)},[d]);let D=[xo,s,`${xo}--size-${g}`,`${xo}--v-align-${N}`,`${xo}--h-align-${T}`,S&&`${xo}--active`,h&&`${xo}--show-scrollbar`].filter(Boolean).join(" ");return $e.default.createElement("div",{className:D},$e.default.createElement("div",{className:`${xo}__trigger-wrap`},f?$e.default.createElement("div",{className:`${xo}__on-hover-watch`,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1)},$e.default.createElement(rp,{active:S,button:o,buttonType:n,className:r,setActive:L})):$e.default.createElement(rp,{active:S,button:o,buttonType:n,className:r,setActive:L})),$e.default.createElement("div",{className:`${xo}__content`,ref:C},$e.default.createElement("div",{className:`${xo}__hide-scrollbar`,ref:E},$e.default.createElement("div",{className:`${xo}__scroll-container`},$e.default.createElement("div",{className:`${xo}__scroll-content`},m&&m({close:()=>L(!1)}),a&&a))),i&&$e.default.createElement("div",{className:`${xo}__caret`})))}});var Zf=b(()=>{});var _n,eg,tg=b(()=>{_n=F(l("react"),1);Zf();eg=({className:e})=>_n.default.createElement("svg",{className:["icon icon--drag-handle",e].filter(Boolean).join(" "),viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},_n.default.createElement("circle",{className:"fill",cx:"10.468",cy:"14.5",r:"1"}),_n.default.createElement("circle",{className:"fill",cx:"14.532",cy:"14.5",r:"1"}),_n.default.createElement("circle",{className:"fill",cx:"10.468",cy:"11.35",r:"1"}),_n.default.createElement("circle",{className:"fill",cx:"14.532",cy:"11.35",r:"1"}),_n.default.createElement("circle",{className:"fill",cx:"10.468",cy:"8.3",r:"1"}),_n.default.createElement("circle",{className:"fill",cx:"14.532",cy:"8.3",r:"1"}))});var og=b(()=>{});var ii,rg,ng,ai,Ds=b(()=>{"use client";ii=F(l("react"),1),rg=(0,ii.createContext)({isCollapsed:void 0,isVisible:void 0,isWithinCollapsible:void 0,toggle:()=>{}}),ng=({children:e,isCollapsed:t,isWithinCollapsible:o=!0,toggle:r})=>{let{isCollapsed:n,isVisible:i}=ai(),a=ii.default.useMemo(()=>({isCollapsed:t,isVisible:i&&!n,isWithinCollapsible:o,toggle:r}),[t,o,r,n,i]);return ii.default.createElement(rg.Provider,{value:a},e)},ai=()=>(0,ii.useContext)(rg)});var ft,ip,cE,jt,Ko,xl=b(()=>{"use client";ft=F(l("react"),1),ip=F(l("react-animate-height"),1);qi();tg();W();og();Ds();cE=ip.default.default||ip.default,jt="collapsible",Ko=({actions:e,children:t,className:o,collapsibleStyle:r="default",dragHandleProps:n,header:i,initCollapsed:a,isCollapsed:s,onToggle:d})=>{let[c,p]=(0,ft.useState)(!!a),[u,m]=(0,ft.useState)(!1),{isWithinCollapsible:f}=ai(),{t:h}=M(),g=typeof s=="boolean"?s:c,x=ft.default.useCallback(()=>{typeof d=="function"&&d(!g),p(!g)},[d,g]);return ft.default.createElement("div",{className:[jt,o,n&&`${jt}--has-drag-handle`,g&&`${jt}--collapsed`,f&&`${jt}--nested`,u&&`${jt}--hovered`,`${jt}--style-${r}`].filter(Boolean).join(" ")},ft.default.createElement(ng,{isCollapsed:g,toggle:x},ft.default.createElement("div",{className:`${jt}__toggle-wrap`,onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1)},n&&ft.default.createElement("div",{className:`${jt}__drag`,...n.attributes,...n.listeners},ft.default.createElement(eg,null)),ft.default.createElement("button",{className:[`${jt}__toggle`,`${jt}__toggle--${g?"collapsed":"open"}`].filter(Boolean).join(" "),onClick:x,type:"button"},ft.default.createElement("span",null,h("fields:toggleBlock"))),i&&ft.default.createElement("div",{className:[`${jt}__header-wrap`,n&&`${jt}__header-wrap--has-drag-handle`].filter(Boolean).join(" ")},i&&i),ft.default.createElement("div",{className:`${jt}__actions-wrap`},e&&ft.default.createElement("div",{className:`${jt}__actions`},e),ft.default.createElement("div",{className:`${jt}__indicator`},ft.default.createElement(bo,{direction:g?void 0:"up"})))),ft.default.createElement(cE,{duration:200,height:g?0:"auto"},ft.default.createElement("div",{className:`${jt}__content`},t))))}});var ig=b(()=>{});var Ms,Is,ap=b(()=>{Ms=F(l("react"),1);ig();Is=()=>Ms.default.createElement("svg",{className:"icon icon--copy",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},Ms.default.createElement("rect",{className:"stroke",height:"8",width:"8",x:"6.5",y:"10"}),Ms.default.createElement("path",{className:"stroke",d:"M10 9.98438V6.5H18V14.5H14"}))});var ag=b(()=>{});var br,pE,lg,sg=b(()=>{"use client";br=F(l("react"),1);ap();W();Dr();ag();pE="copy-to-clipboard",lg=({defaultMessage:e,successMessage:t,value:o})=>{let r=(0,br.useRef)(null),[n,i]=(0,br.useState)(!1),[a,s]=(0,br.useState)(!1),{t:d}=M();return o?br.default.createElement("button",{className:pE,onClick:()=>{r&&r.current&&(r.current.select(),r.current.setSelectionRange(0,o.length+1),document.execCommand("copy"),i(!0))},onMouseEnter:()=>{s(!0),i(!1)},onMouseLeave:()=>{s(!1),i(!1)},type:"button"},br.default.createElement(Is,null),br.default.createElement(Ut,{delay:n?0:void 0,show:a||n},n&&(t??d("general:copied")),!n&&(e??d("general:copy"))),br.default.createElement("textarea",{readOnly:!0,ref:r,tabIndex:-1,value:o})):null}});var mE,Ir,uE,As,lp=b(()=>{"use client";mE=F(l("qs-esm"),1),Ir=F(l("react"),1),uE=(0,Ir.createContext)({}),As=()=>(0,Ir.useContext)(uE)});var dg,Zi,Os=b(()=>{"use client";dg=l("@dnd-kit/sortable"),Zi=e=>{let{id:t,disabled:o}=e,{attributes:r,isDragging:n,listeners:i,setNodeRef:a,transform:s}=(0,dg.useSortable)({id:t,disabled:o});return{attributes:{...r,style:{cursor:n?"grabbing":"grab"}},isDragging:n,listeners:i,setNodeRef:a,transform:s&&`translate3d(${s.x}px, ${s.y}px, 0)`}}});var cg=b(()=>{});var pg,wn,fE,Lo,gE,mg,Ar,$s=b(()=>{"use client";pg=F(l("next/link.js"),1),wn=F(l("react"),1);Os();cg();fE=pg.default.default,Lo="pill",gE=e=>{let{id:t,className:o}=e,{attributes:r,isDragging:n,listeners:i,setNodeRef:a,transform:s}=Zi({id:t});return wn.default.createElement(mg,{...e,className:[n&&`${Lo}--is-dragging`,o].filter(Boolean).join(" "),elementProps:{...i,...r,ref:a,style:{transform:s}}})},mg=e=>{let{alignIcon:t="right","aria-checked":o,"aria-controls":r,"aria-expanded":n,"aria-label":i,children:a,className:s,draggable:d,elementProps:c,icon:p,onClick:u,pillStyle:m="light",rounded:f,to:h}=e,g=[Lo,`${Lo}--style-${m}`,s&&s,h&&`${Lo}--has-link`,(h||u)&&`${Lo}--has-action`,p&&`${Lo}--has-icon`,p&&`${Lo}--align-icon-${t}`,d&&`${Lo}--draggable`,f&&`${Lo}--rounded`].filter(Boolean).join(" "),x="div";return u&&!h&&(x="button"),h&&(x=fE),wn.default.createElement(x,{...c,"aria-checked":o,"aria-controls":r,"aria-expanded":n,"aria-label":i,className:g,href:h||null,onClick:u,type:x==="button"?"button":void 0},p&&t==="left"&&wn.default.createElement("span",{className:`${Lo}__icon`},p),wn.default.createElement("span",{className:`${Lo}__label`},a),p&&t==="right"&&wn.default.createElement("span",{className:`${Lo}__icon`},p))},Ar=e=>{let{draggable:t}=e;return t?wn.default.createElement(gE,{...e}):wn.default.createElement(mg,{...e})}});var sp,Bs,dp=b(()=>{sp=l("date-fns"),Bs=({date:e,i18n:t,pattern:o})=>{let r=new Date(e);return(0,sp.format)(r,o,{locale:t.dateFNS})}});var lo,ea,cp,pp,mp,up,fp,gp,Hs,Lt,hp,tt,Or,bp,$r,Br,yl,lt=b(()=>{"use client";lo=l("react"),ea=l("use-context-selector"),cp=(0,lo.createContext)({}),pp=(0,lo.createContext)({}),mp=(0,lo.createContext)(!1),up=(0,lo.createContext)(!1),fp=(0,lo.createContext)(!1),gp=(0,lo.createContext)(!1),Hs=(0,ea.createContext)([{},()=>null]),Lt=()=>(0,lo.useContext)(cp),hp=()=>(0,lo.useContext)(pp),tt=()=>(0,lo.useContext)(mp),Or=()=>(0,lo.useContext)(up),bp=()=>(0,lo.useContext)(fp),$r=()=>(0,lo.useContext)(gp),Br=e=>(0,ea.useContextSelector)(Hs,e),yl=()=>(0,ea.useContext)(Hs)});var ug,xr,Cl=b(()=>{ug=l("@payloadcms/translations");dp();xr=({collectionConfig:e,data:t,dateFormat:o,fallback:r,globalConfig:n,i18n:i})=>{let a;if(e){let s=e?.admin?.useAsTitle;if(s&&(a=t?.[s]||a,a)){let d=e.fields.find(p=>"name"in p&&p.name===s);if(d?.type==="date"){let p="date"in d.admin&&d?.admin?.date?.displayFormat||o;a=Bs({date:a,i18n:i,pattern:p})||a}}}return n&&(a=(0,ug.getTranslation)(n?.label,i)||n?.slug),a||(a=r||`[${i.t("general:untitled")}]`),a}});var yo,zs=b(()=>{yo=async e=>{let{apiRoute:t,body:o,onError:r,serverURL:n,signal:i,token:a}=e,s=await fetch(`${n}${t}/form-state`,{body:JSON.stringify(o),credentials:"include",headers:{"Content-Type":"application/json",...a?{Authorization:`JWT ${a}`}:{}},method:"POST",signal:i}),d=await s.json();return s.ok?d:(typeof r=="function"&&r(d),o?.formState)}});var xp,fg=b(()=>{xp=e=>{let{collectionSlug:t,docPermissions:o,globalSlug:r,isEditing:n}=e;return t?!!(n&&o?.update?.permission||!n&&o?.create?.permission):r?!!o?.update?.permission:!1}});var yp,gg=b(()=>{yp=({id:e,collectionSlug:t,globalSlug:o})=>!!(o||t&&e)});var hg,bg,li,_e,xg,Ge,Cp,yr=b(()=>{"use client";hg=l("next/navigation.js"),bg=l("payload/shared"),li=F(l("qs-esm"),1),_e=F(l("react"),1);Cl();zs();fg();gg();ur();et();fr();oi();W();xg=(0,_e.createContext)({}),Ge=()=>(0,_e.useContext)(xg),Cp=({children:e,...t})=>{let{id:o,collectionSlug:r,docPermissions:n,globalSlug:i,hasPublishPermission:a,hasSavePermission:s,initialData:d,initialState:c,onLoadError:p,onSave:u}=t,{admin:{dateFormat:m},collections:f,globals:h,routes:{api:g},serverURL:x}=J(),y=f.find(ge=>ge.slug===r),v=h.find(ge=>ge.slug===i),E=y||v,{i18n:w}=M(),[C,S]=(0,_e.useState)(()=>d?xr({collectionConfig:y,data:{...d,id:o},dateFormat:m,fallback:o?.toString(),globalConfig:v,i18n:w}):""),[L,N]=(0,_e.useState)(!1),[_,T]=(0,_e.useState)(!1),[k,P]=(0,_e.useState)(d),[R,D]=(0,_e.useState)(c),[I,A]=(0,_e.useState)(null),[O,B]=(0,_e.useState)(null),[$,H]=(0,_e.useState)(n),[te,ne]=(0,_e.useState)(s),[pe,Te]=(0,_e.useState)(a),G=R===void 0||k===void 0,K=(0,_e.useRef)(!1),[Q,he]=(0,_e.useState)(null),{getPreference:Qe,setPreference:V}=So(),{permissions:Qt}=ut(),{code:Z}=vt(),de=(0,_e.useRef)(Z),go=E?.versions,Jt=`${x}${g}`,Je,De;i&&(Je=i,De=`global-${Je}`),r&&(Je=r,o&&(De=`collection-${Je}-${o}`));let yt=yp({id:o,collectionSlug:r,globalSlug:i})?"update":"create",Ue=!!(go&&$?.readVersions?.permission),Bt=(0,_e.useCallback)(async()=>{let ge,je,Me=null,q=null,U=!0,ie={depth:0,where:{and:[]}},Ee={depth:0,locale:Z||void 0,where:{and:[{or:[{_status:{equals:"published"}},{_status:{exists:!1}}]}]}};if(i&&(ge=`${Jt}/globals/${i}/versions`,je=`${Jt}/globals/${i}?${li.stringify(Ee)}`),r&&(ge=`${Jt}/${r}/versions`,Ee.where.and.push({id:{equals:o}}),je=`${Jt}/${r}?${li.stringify(Ee)}`,o||(U=!1),ie.where.and.push({parent:{equals:o}})),U){let ve;if(go?.drafts&&(ve=await fetch(je,{credentials:"include",headers:{"Accept-Language":w.language}}).then(Se=>Se.json()),r&&(ve=ve?.docs?.[0])),Ue&&(q=await fetch(`${ge}?${li.stringify(ie)}`,{credentials:"include",headers:{"Accept-Language":w.language}}).then(Se=>Se.json()),ve?.updatedAt)){let Se={...ie,where:{...ie.where,and:[...ie.where.and,{updatedAt:{greater_than:ve?.updatedAt}}]}},Le=await fetch(`${ge}?${li.stringify(Se)}`,{credentials:"include",headers:{"Accept-Language":w.language}});Le.status===200&&(Me=await Le.json())}A(ve),B(q),he(Me)}},[w,i,r,o,Jt,Z,go,Ue]),St=_e.default.useCallback(async ge=>{let je={locale:Z||void 0},Me=yp({id:ge?.id,collectionSlug:r,globalSlug:i});if(Me){let q=r?`/${r}/access/${ge.id}`:i?`/globals/${i}/access`:null;if(q){let ie=await(await fetch(`${x}${g}${q}?${li.stringify(je)}`,{credentials:"include",headers:{"Accept-Language":w.language}})).json(),Ee=await fetch(`${x}${g}${q}?${li.stringify(je)}`,{body:JSON.stringify({data:{...ge||{},_status:"published"}}),credentials:"include",headers:{"Accept-Language":w.language},method:"POST"}).then(ve=>ve.json());H(ie),ne(xp({collectionSlug:r,docPermissions:ie,globalSlug:i,isEditing:Me})),Te(Ee?.update?.permission)}}else{let q=r?Qt?.collections?.[r]:Qt?.globals?.[i];H(q),ne(xp({collectionSlug:r,docPermissions:q,globalSlug:i,isEditing:Me}))}},[x,g,Qt,w.language,Z,r,i]),Ct=(0,_e.useCallback)(()=>Qe(De),[Qe,De]),z=(0,_e.useCallback)(async(ge,je)=>{let Me=await Ct();if(De)try{await V(De,{...Me,fields:{...Me?.fields||{},[ge]:{...Me?.fields?.[ge],...je}}})}catch(q){console.error(q)}},[V,De,Ct]),xe=_e.default.useCallback(async ge=>{typeof u=="function"&&u(ge);let je=await Ct(),Me=r?ge.doc:ge.result,q=await yo({apiRoute:g,body:{id:o,collectionSlug:r,data:Me,docPreferences:je,globalSlug:i,locale:Z,operation:yt,schemaPath:r||i},serverURL:x});D(q),P(Me),await St(Me)},[g,r,Ct,i,o,yt,Z,u,x,St]);(0,_e.useEffect)(()=>{let ge=new AbortController,je=Z!==de.current;return(c===void 0||d===void 0||je)&&(je&&(de.current=Z),(async()=>{T(!1),N(!0);try{let q=await yo({apiRoute:g,body:{id:o,collectionSlug:r,globalSlug:i,locale:Z,operation:yt,schemaPath:r||i},onError:p,serverURL:x,signal:ge.signal});P((0,bg.reduceFieldsToValues)(q,!0)),D(q)}catch{ge.signal.aborted||(typeof p=="function"&&p(),T(!0),N(!1))}N(!1)})()),()=>{ge.abort()}},[g,yt,r,x,o,i,Z,p,d,c]),(0,_e.useEffect)(()=>{Bt()},[Bt]),(0,_e.useEffect)(()=>{S(xr({collectionConfig:y,data:{...k,id:o},dateFormat:m,fallback:o?.toString(),globalConfig:v,i18n:w}))},[y,k,m,w,o,v]),(0,_e.useEffect)(()=>{let ge=async()=>{let je=n,Me=s,q=a;(!je||Me===void 0||Me===null||q===void 0||q===null)&&await St(k)};!K.current&&k&&(r||i)&&(K.current=!0,ge())},[St,n,s,a,H,r,i,k]),_&&(0,hg.notFound)();let cr={...t,docConfig:E,docPermissions:$,getDocPermissions:St,getDocPreferences:Ct,getVersions:Bt,hasPublishPermission:pe,hasSavePermission:te,initialData:k,initialState:R,isInitializing:G,isLoading:L,onSave:xe,publishedDoc:I,setDocFieldPreferences:z,setDocumentTitle:S,title:C,unpublishedVersions:Q,versions:O};return _e.default.createElement(xg.Provider,{value:cr},e)}});var yg=b(()=>{});var js,Us,vl,vp=b(()=>{js=F(l("react"),1);yg();Us="gutter",vl=(0,js.forwardRef)((e,t)=>{let{children:o,className:r,left:n=!0,negativeLeft:i=!1,negativeRight:a=!1,right:s=!0}=e,d=n&&!i,c=s&&!a;return js.default.createElement("div",{className:[d&&`${Us}--left`,c&&`${Us}--right`,i&&`${Us}--negative-left`,a&&`${Us}--negative-right`,r].filter(Boolean).join(" "),ref:t},o)});vl.displayName="Gutter"});var Cg=b(()=>{});var _l,hE,_p,vg=b(()=>{"use client";_l=F(l("react"),1);xn();lt();Cg();hE="form-submit",_p=(0,_l.forwardRef)((e,t)=>{let{type:o="submit",buttonId:r,children:n,disabled:i}=e,a=Or(),s=$r(),{disabled:d}=Lt();return _l.default.createElement("div",{className:hE},_l.default.createElement(Ve,{ref:t,...e,disabled:!(i||s||a||d)?void 0:!0,id:r,type:o},n))})});var wl,wp,gt,Hr=b(()=>{"use client";wl=F(l("react"),1),wp=(0,wl.createContext)(0),gt=()=>(0,wl.useContext)(wp)});var kl,bE,ta,Vs=b(()=>{"use client";kl=F(l("react"),1),bE=(0,kl.createContext)(""),ta=()=>(0,kl.useContext)(bE)});var _g,oa,Gs=b(()=>{_g=l("react");et();oa=e=>{let t=J(),[o]=(0,_g.useState)(()=>e?(typeof e=="string"?[e]:e).map(n=>t.collections.find(i=>i.slug===n)):[]);return o}});var wg=b(()=>{});var kg,si,Ws=b(()=>{"use client";kg=l("react");Hr();kn();si=e=>{let t=(0,kg.useId)(),o=gt();return di({slug:`${e}-${t}`,depth:o})}});var Tl,ot,qo,xE,di,No,Cr,kn=b(()=>{"use client";Tl=l("@faceless-ui/modal"),ot=F(l("react"),1);Rr();Hr();W();vp();wg();qo="drawer",xE=100,di=({slug:e,depth:t})=>`drawer_${t}_${e}`,No=({slug:e,children:t,className:o,disabled:r,onClick:n,...i})=>{let{openModal:a}=(0,Tl.useModal)(),s=(0,ot.useCallback)(d=>{a(e),typeof n=="function"&&n(d)},[a,e,n]);return ot.default.createElement("button",{className:o,disabled:r,onClick:s,type:"button",...i},t)},Cr=({slug:e,Header:t,children:o,className:r,gutter:n=!0,hoverTitle:i,title:a})=>{let{t:s}=M(),{closeModal:d,modalState:c}=(0,Tl.useModal)(),p=gt(),[u,m]=(0,ot.useState)(!1),[f,h]=(0,ot.useState)(!1);return(0,ot.useEffect)(()=>{m(c[e]?.isOpen)},[e,c]),(0,ot.useEffect)(()=>{h(u)},[u]),u?ot.default.createElement(Tl.Modal,{className:[r,qo,f&&`${qo}--is-open`,p>1&&`${qo}--nested`].filter(Boolean).join(" "),slug:e,style:{zIndex:xE+p}},(!p||p===1)&&ot.default.createElement("div",{className:`${qo}__blur-bg`}),ot.default.createElement("button",{"aria-label":s("general:close"),className:`${qo}__close`,id:`close-drawer__${e}`,onClick:()=>d(e),type:"button"}),ot.default.createElement("div",{className:`${qo}__content`},ot.default.createElement("div",{className:`${qo}__blur-bg-content`}),ot.default.createElement(vl,{className:`${qo}__content-children`,left:n,right:n},ot.default.createElement(wp.Provider,{value:p+1},t,t===void 0&&ot.default.createElement("div",{className:`${qo}__header`},ot.default.createElement("h2",{className:`${qo}__header__title`,title:i?a:null},a),ot.default.createElement("button",{"aria-label":s("general:close"),className:`${qo}__header__close`,id:`close-drawer__${e}`,onClick:()=>d(e),type:"button"},ot.default.createElement(zt,null))),o)))):null}});var El,yE,Ks,kp=b(()=>{"use client";El=F(l("react"),1),yE=(0,El.createContext)({}),Ks=()=>(0,El.useContext)(yE)});var Tg=b(()=>{});var Eg,CE,qs,Tp=b(()=>{"use client";Eg=F(l("react"),1);Tg();CE="id-label",qs=({id:e,className:t,prefix:o="ID:"})=>Eg.default.createElement("div",{className:[CE,t].filter(Boolean).join(" "),title:e},o,"\xA0\xA0",e)});var Pg=b(()=>{});var Tn,Ep,Fg,Sg=b(()=>{"use client";Tn=F(l("react"),1);yr();Tp();Pg();Ep="render-title",Fg=e=>{let{className:t,element:o="h1",fallback:r,title:n}=e,{id:i,isInitializing:a,title:s}=Ge(),d=n||s||r,c=d===i,p=o,u=Tn.default.createElement(Tn.Fragment,null,"\xA0");return Tn.default.createElement(p,{className:[t,Ep,c&&`${Ep}--has-id`].filter(Boolean).join(" "),title:d},a?u:Tn.default.createElement(Tn.Fragment,null,c?Tn.default.createElement(qs,{className:`${Ep}__id`,id:i}):d||u))}});var Lg,Ng,_t,Rg,Dg,vE,Mg=b(()=>{"use client";Lg=l("@faceless-ui/modal"),Ng=F(l("qs-esm"),1),_t=F(l("react"),1),Rg=l("sonner");Gs();Rr();Ns();et();yr();kp();fr();W();vp();Tp();Sg();zr();Dg=({id:e,Header:t,collectionSlug:o,drawerSlug:r,onSave:n})=>{let i=J(),{routes:{api:a},serverURL:s}=i,{closeModal:d,modalState:c,toggleModal:p}=(0,Lg.useModal)(),u=vt(),{t:m}=M(),[f,h]=(0,_t.useState)(e),[g,x]=(0,_t.useState)(!1),[y]=oa(o),{formQueryParams:v}=Ks(),E=Ng.stringify(v),{componentMap:w}=Xi(),{Edit:C}=w[`${o?"collections":"globals"}`][o],S=!!f,L=f?`${s}${a}/${o}/${f}${u?.code?`?locale=${u.code}`:""}`:null,N=`${s}${a}/${o}${S?`/${f}`:""}?${E}`;(0,_t.useEffect)(()=>{x(!!c[r]?.isOpen)},[c,r]);let _=_t.default.useCallback(k=>{g&&(d(r),Rg.toast.error(k.errors?.[0].message||m("error:unspecific")))},[d,r,g,m]),T=(0,_t.useCallback)(k=>{h(k.doc.id),typeof n=="function"&&n({...k,collectionConfig:y})},[n,y]);return _t.default.createElement(Cp,{BeforeDocument:_t.default.createElement(vl,{className:`${ci}__header`},_t.default.createElement("div",{className:`${ci}__header-content`},_t.default.createElement("h2",{className:`${ci}__header-text`},t||_t.default.createElement(Fg,{element:"span"})),_t.default.createElement("button",{"aria-label":m("general:close"),className:`${ci}__header-close`,onClick:()=>p(r),type:"button"},_t.default.createElement(zt,null))),_t.default.createElement(vE,null)),action:N,apiURL:L,collectionSlug:y.slug,disableActions:!0,disableLeaveWithoutSaving:!0,id:f,isEditing:S,onLoadError:_,onSave:T},C)},vE=()=>{let{id:e,title:t}=Ge();return e&&e!==t?_t.default.createElement(qs,{id:e.toString()}):null}});var Ig=b(()=>{});var Ag,Og,st,ci,_E,wE,kE,Nt,zr=b(()=>{"use client";Ag=l("@faceless-ui/modal"),Og=l("@payloadcms/translations"),st=F(l("react"),1);Gs();Hr();W();kn();Mg();Ig();ci="doc-drawer",_E=({id:e,collectionSlug:t,depth:o,uuid:r})=>`doc-drawer_${t}_${o}${e?`_${e}`:""}_${r}`,wE=({id:e,children:t,className:o,collectionSlug:r,disabled:n,drawerSlug:i,...a})=>{let{i18n:s,t:d}=M(),[c]=oa(r);return st.default.createElement(No,{"aria-label":d(e?"general:editLabel":"fields:addNewLabel",{label:(0,Og.getTranslation)(c.labels.singular,s)}),className:[o,`${ci}__toggler`].filter(Boolean).join(" "),disabled:n,slug:i,...a},t)},kE=e=>{let{drawerSlug:t}=e;return st.default.createElement(Cr,{Header:null,className:ci,gutter:!1,slug:t},st.default.createElement(Dg,{...e}))},Nt=({id:e,collectionSlug:t})=>{let o=gt(),r=(0,st.useId)(),{closeModal:n,modalState:i,openModal:a,toggleModal:s}=(0,Ag.useModal)(),[d,c]=(0,st.useState)(!1),p=_E({id:e,collectionSlug:t,depth:o,uuid:r});(0,st.useEffect)(()=>{c(!!i[p]?.isOpen)},[i,p]);let u=(0,st.useCallback)(()=>{s(p)},[s,p]),m=(0,st.useCallback)(()=>{n(p)},[n,p]),f=(0,st.useCallback)(()=>{a(p)},[a,p]),h=(0,st.useMemo)(()=>y=>st.default.createElement(kE,{...y,collectionSlug:t,drawerSlug:p,id:e,key:p}),[e,p,t]),g=(0,st.useMemo)(()=>y=>st.default.createElement(wE,{...y,collectionSlug:t,drawerSlug:p,id:e}),[e,p,t]),x=(0,st.useMemo)(()=>({closeDrawer:m,drawerDepth:o,drawerSlug:p,isDrawerOpen:d,openDrawer:f,toggleDrawer:u}),[o,p,d,u,m,f]);return[h,g,x]}});var Qs,$g,Bg,j,Re=b(()=>{"use client";Qs=F(l("react"),1),$g=Qs.default.createContext({type:void 0,custom:{},indexPath:void 0,path:void 0,permissions:{},readOnly:!1,schemaPath:void 0,siblingPermissions:{}}),Bg=({type:e,children:t,custom:o,indexPath:r,path:n,permissions:i,readOnly:a,schemaPath:s,siblingPermissions:d})=>Qs.default.createElement($g.Provider,{value:{type:e,custom:o,indexPath:r,path:n,permissions:i,readOnly:a,schemaPath:s,siblingPermissions:d}},t),j=()=>Qs.default.useContext($g)});var pi,ae,Ye=b(()=>{"use client";pi=l("react");ul();ur();et();yr();Vs();W();Re();lt();ae=e=>{let{disableFormData:t=!1,hasRows:o,validate:r}=e,{path:n,permissions:i,readOnly:a,schemaPath:s}=j(),d=e.path||n,c=tt(),p=Or(),u=$r(),{user:m}=ut(),{id:f}=Ge(),h=ta(),{dispatchField:g,field:x}=Br(([O,B])=>({dispatchField:B,field:O&&O?.[d]||null})),{t:y}=M(),v=J(),{getData:E,getDataByPath:w,getSiblingData:C,setModified:S}=Lt(),L=bp(),N=x?.filterOptions,_=x?.value,T=x?.initialValue,k=typeof x?.valid=="boolean"?x.valid:!0,P=k===!1&&c,R=(0,pi.useRef)(k),D=(0,pi.useRef)(x?.errorMessage),I=(0,pi.useCallback)((O,B=!1)=>{let $=O&&O.target?O.target.value:O;g({type:"UPDATE",disableFormData:t||o&&$>0,path:d,value:$}),B||typeof S=="function"&&L===!1&&setTimeout(()=>{S(!0)},10)},[S,d,g,t,o,L]),A=(0,pi.useMemo)(()=>({errorMessage:x?.errorMessage,errorPaths:x?.errorPaths||[],filterOptions:N,formInitializing:u,formProcessing:p,formSubmitted:c,initialValue:T,path:d,permissions:i,readOnly:a||!1,rows:x?.rows,schemaPath:s,setValue:I,showError:P,valid:x?.valid,value:_}),[x?.errorMessage,x?.rows,x?.valid,x?.errorPaths,p,I,P,c,_,T,d,s,a,i,N,u]);return Mr(()=>{(async()=>{let B=_;x?.rows&&Array.isArray(x.rows)&&(B=w(d));let $,H=R.current,te=typeof r=="function"?await r(B,{id:f,config:v,data:E(),operation:h,siblingData:C(d),t:y,user:m}):!0;if(typeof te=="string"?(H=!1,$=te):typeof te=="boolean"&&(H=te,$=void 0),H!==R.current||$!==D.current){R.current=H,D.current=$;let ne={type:"UPDATE",errorMessage:$,path:d,rows:x?.rows,valid:H,value:_};(t||o&&typeof _=="number"&&_>0)&&(ne.disableFormData=!0),typeof g=="function"&&g(ne)}})()},150,[_,t,g,E,C,w,f,h,d,m,r,x?.rows]),A}});var Js,Hg,zg=b(()=>{"use client";Js=F(l("react"),1);lt();Hg=e=>{let{name:t,type:o,children:r,indexPath:n,path:i}=e,a=typeof i=="string"?i:t,s=a;if(["collapsible","row"].includes(o)){let p=n.split(".").pop();s=`${a?`${a}.`:""}_index-${p}`}let d=Br(([p])=>p&&p?.[s]||null),{passesCondition:c}=d||{};return c===!1?null:Js.default.createElement(Js.Fragment,null,r)}});var Pp,oe,We=b(()=>{"use client";Pp=F(l("react"),1);Re();zg();oe=e=>o=>{let{name:r}=o,{type:n,indexPath:i,path:a}=j();return Pp.default.createElement(Hg,{indexPath:i,name:r,path:a??r,type:n},Pp.default.createElement(e,{...o}))}});var Ys,TE,Xs,Fp=b(()=>{"use client";Ys=F(l("react"),1);Re();Ye();We();TE=e=>{let{name:t,disableModifyingForm:o=!0,forceUsePathFromProps:r,path:n,value:i}=e,{path:a}=j(),{path:s,setValue:d,value:c}=ae({path:(r?null:a)||n||t});return(0,Ys.useEffect)(()=>{i!==void 0&&d(i,o)},[i,d,o]),Ys.default.createElement("input",{id:`field-${s?.replace(/\./g,"__")}`,name:s,onChange:d,type:"hidden",value:c||""})},Xs=oe(TE)});var Ug=b(()=>{});var Sp,ui,EE,mi,En,Zs=b(()=>{"use client";Sp=F(l("next/link.js"),1),ui=F(l("react"),1);Ug();EE=Sp.default.default||Sp.default,mi="banner",En=({type:e="default",alignIcon:t="right",children:o,className:r,icon:n,onClick:i,to:a})=>{let s=[mi,`${mi}--type-${e}`,r&&r,a&&`${mi}--has-link`,(a||i)&&`${mi}--has-action`,n&&`${mi}--has-icon`,n&&`${mi}--align-icon-${t}`].filter(Boolean).join(" "),d="div";return i&&!a&&(d="button"),a&&(d=EE),ui.default.createElement(d,{className:s,href:a||null,onClick:i},n&&t==="left"&&ui.default.createElement(ui.default.Fragment,null,n),ui.default.createElement("span",{className:`${mi}__content`},o),n&&t==="right"&&ui.default.createElement(ui.default.Fragment,null,n))}});var ed,td,Lp=b(()=>{"use client";ed=F(l("react"),1);Os();td=e=>{let{id:t,children:o,disabled:r}=e,{attributes:n,isDragging:i,listeners:a,setNodeRef:s,transform:d}=Zi({id:t,disabled:r});return ed.default.createElement(ed.Fragment,null,o({attributes:{...n,style:{cursor:i?"grabbing":"grab"}},listeners:a,setNodeRef:s,transform:d}))}});var Zt,od,Pn,ra,rd=b(()=>{"use client";Zt=l("@dnd-kit/core"),od=l("@dnd-kit/sortable"),Pn=F(l("react"),1),ra=e=>{let{children:t,className:o,ids:r,onDragEnd:n}=e,i=(0,Pn.useId)(),{setNodeRef:a}=(0,Zt.useDroppable)({id:i}),s=(0,Zt.useSensors)((0,Zt.useSensor)(Zt.PointerSensor,{activationConstraint:{distance:5}}),(0,Zt.useSensor)(Zt.KeyboardSensor,{coordinateGetter:od.sortableKeyboardCoordinates})),d=(0,Pn.useCallback)(c=>{let{active:p,over:u}=c;!p||!u||typeof n=="function"&&n({event:c,moveFromIndex:r.findIndex(m=>m===p.id),moveToIndex:r.findIndex(m=>m===u.id)})},[n,r]);return Pn.default.createElement(Zt.DndContext,{collisionDetection:Zt.closestCenter,id:i,onDragEnd:d,sensors:s},Pn.default.createElement(od.SortableContext,{items:r},Pn.default.createElement("div",{className:o,ref:a},t)))}});var jg=b(()=>{});var id,nd,Rt,Ur=b(()=>{"use client";id=F(l("react"),1);jg();nd="error-pill",Rt=e=>{let{className:t,count:o,i18n:r,withMessage:n}=e,i=!n&&o<99,a=[nd,i&&`${nd}--fixed-width`,t&&t].filter(Boolean).join(" ");return o===0?null:id.default.createElement("div",{className:a},id.default.createElement("div",{className:`${nd}__content`},id.default.createElement("span",{className:`${nd}__count`},o),n&&` ${o>1?r.t("general:errors"):r.t("general:error")}`))}});var ad,Np=b(()=>{ad=(e,t,o)=>`field-${e?.replace(/\./g,"__")}${t>1?`-${t}`:""}${o?`-${o}`:""}`});var Vg=b(()=>{});var Wg,Rp,Gg,PE,ce,dt=b(()=>{"use client";Wg=l("@payloadcms/translations"),Rp=F(l("react"),1);Re();W();Vg();Gg="field-description",PE=e=>{let{className:t,description:o,marginPlacement:r}=e,{path:n}=j(),{i18n:i}=M();return o?Rp.default.createElement("div",{className:[Gg,t,`field-description-${n.replace(/\./g,"__")}`,r&&`${Gg}--margin-${r}`].filter(Boolean).join(" ")},(0,Wg.getTranslation)(o,i)):null},ce=e=>{let{CustomDescription:t}=e;return t!==void 0?t:Rp.default.createElement(PE,{...e})}});var Kg=b(()=>{});var Dp,FE,SE,me,ht=b(()=>{"use client";Dp=F(l("react"),1);Dr();Re();lt();Kg();FE="field-error",SE=e=>{let{alignCaret:t="right",message:o,path:r,showError:n}=e,{path:i}=j(),a=i??r,s=tt(),d=Br(([f])=>f&&f?.[a]||null),{errorMessage:c,valid:p}=d||{},u=o||c;return(n||s&&p===!1)&&u?.length?Dp.default.createElement(Ut,{alignCaret:t,className:FE,delay:0,staticPositioning:!0},u):null},me=e=>{let{CustomError:t}=e;return t!==void 0?t:Dp.default.createElement(SE,{...e})}});function ld({fieldLocalized:e,fieldRTL:t,locale:o,localizationConfig:r}){let n=o&&r&&r.locales&&r.locales.length>1,i=o?.code===r?.defaultLocale;return t!==!1&&o?.rtl===!0&&(e||!e&&!n||!e&&i)||t===!0}var Y,Be=b(()=>{Y="field-type"});var qg=b(()=>{});var sd,Qg,Jg=b(()=>{sd=F(l("react"),1);qg();Qg=()=>sd.default.createElement("svg",{className:"icon icon--check",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},sd.default.createElement("path",{className:"stroke",d:"M10.6092 16.0192L17.6477 8.98076",strokeLinecap:"square",strokeLinejoin:"bevel"}),sd.default.createElement("path",{className:"stroke",d:"M7.35229 12.7623L10.6092 16.0192",strokeLinecap:"square",strokeLinejoin:"bevel"}))});var Yg=b(()=>{});var Mp,Xg,Zg=b(()=>{Mp=F(l("react"),1);Yg();Xg=()=>Mp.default.createElement("svg",{className:"icon icon--line",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},Mp.default.createElement("line",{className:"stroke",x1:"8.05164",x2:"16.468",y1:"12.594",y2:"12.594"}))});var eh=b(()=>{});var th,dd,LE,se,rt=b(()=>{"use client";th=l("@payloadcms/translations"),dd=F(l("react"),1);Re();lt();Hr();W();Np();eh();LE=e=>{let{as:t="label",htmlFor:o,label:r,required:n=!1,unstyled:i=!1}=e,{uuid:a}=Lt(),{path:s}=j(),d=gt(),c=o||ad(s,d,a),{i18n:p}=M();return r?dd.default.createElement(t,{className:`field-label ${i?"unstyled":""}`,htmlFor:c},(0,th.getTranslation)(r,p),n&&!i&&dd.default.createElement("span",{className:"required"},"*")):null},se=e=>{let{CustomLabel:t}=e;return t!==void 0?t:dd.default.createElement(LE,{...e})}});var Fn,Pl,na,cd=b(()=>{"use client";Fn=F(l("react"),1);Jg();Zg();rt();Pl="checkbox-input",na=({id:e,name:t,AfterInput:o,BeforeInput:r,CustomLabel:n,checked:i,className:a,inputRef:s,label:d,labelProps:c,onToggle:p,partialChecked:u,readOnly:m,required:f})=>Fn.default.createElement("div",{className:[a,Pl,i&&`${Pl}--checked`,m&&`${Pl}--read-only`].filter(Boolean).join(" ")},Fn.default.createElement("div",{className:`${Pl}__input`},r,Fn.default.createElement("input",{"aria-label":"",defaultChecked:!!i,disabled:m,id:e,name:t,onInput:p,ref:s,required:f,type:"checkbox"}),Fn.default.createElement("span",{className:[`${Pl}__icon`,!i&&u?"check":"partial"].filter(Boolean).join(" ")},i&&Fn.default.createElement(Qg,null),!i&&u&&Fn.default.createElement(Xg,null)),o),Fn.default.createElement(se,{CustomLabel:n,htmlFor:e,label:d,required:f,...c||{}}))});var oh=b(()=>{});var Sn,Ip,NE,pd,Ap=b(()=>{"use client";Sn=F(l("react"),1);Re();lt();Ye();We();Hr();Np();dt();ht();Be();cd();oh();Ip="checkbox",NE=e=>{let{id:t,name:o,AfterInput:r,BeforeInput:n,CustomDescription:i,CustomError:a,CustomLabel:s,checked:d,className:c,descriptionProps:p,disableFormData:u,errorProps:m,label:f,labelProps:h,onChange:g,partialChecked:x,path:y,readOnly:v,required:E,style:w,validate:C,width:S}=e,{uuid:L}=Lt(),N=gt(),_=(0,Sn.useCallback)((ne,pe)=>{if(typeof C=="function")return C(ne,{...pe,required:E})},[C,E]),{path:T,readOnly:k}=j(),{formInitializing:P,formProcessing:R,path:D,setValue:I,showError:A,value:O}=ae({disableFormData:u,path:T??y??o,validate:_}),B=v||k||R||P,$=(0,Sn.useCallback)(()=>{B||(I(!O),typeof g=="function"&&g(!O))},[g,B,I,O]),H=d||!!O,te=t||ad(D,N,L);return Sn.default.createElement("div",{className:[Y,Ip,A&&"error",c,O&&`${Ip}--checked`,B&&`${Ip}--read-only`].filter(Boolean).join(" "),style:{...w,width:S}},Sn.default.createElement(me,{CustomError:a,path:D,...m||{},alignCaret:"left"}),Sn.default.createElement(na,{AfterInput:r,BeforeInput:n,CustomLabel:s,checked:H,id:te,inputRef:null,label:f,labelProps:h,name:D,onToggle:$,partialChecked:x,readOnly:B,required:E}),i!==void 0?i:Sn.default.createElement(ce,{...p||{}}))},pd=oe(NE)});var Fl,md,Op=b(()=>{"use client";Fl=F(l("react"),1);Zs();Ap();et();fr();W();lt();md=({fieldValue:e,localized:t,path:o})=>{let{dispatchFields:r,setModified:n}=Lt(),{code:i}=vt(),{localization:a}=J(),[s,d]=Fl.useState(typeof e!="number"),c=a&&a.defaultLocale?a.defaultLocale:"en",{t:p}=M(),u=()=>{let m=!s;r({type:"UPDATE",path:o,value:m?null:e||0}),n(!0),d(m)};if(!t||i===c||a&&!a.fallback)return null;if(e){let m=!1;if(typeof e=="number"&&e>0&&(m=!0),Array.isArray(e)&&e.length>0&&(m=!0),m)return s&&d(!1),null}return Fl.createElement(En,null,Fl.createElement(pd,{checked:s,id:`field-${o.replace(/\./g,"__")}`,label:p("general:fallbackToDefaultLocale")}))}});var ia,$p=b(()=>{ia=e=>{let t=document.getElementById(e);if(t){let o=t.getBoundingClientRect();window.scrollBy({behavior:"smooth",top:o.top-100})}}});var rh=b(()=>{});var Sl,nh,ih=b(()=>{Sl=F(l("react"),1);rh();nh=({className:e})=>Sl.default.createElement("svg",{className:["icon icon--more",e].filter(Boolean).join(" "),viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},Sl.default.createElement("circle",{className:"fill",cx:"16.3872",cy:"12.5",r:"1"}),Sl.default.createElement("circle",{className:"fill",cx:"12.3872",cy:"12.5",r:"1"}),Sl.default.createElement("circle",{className:"fill",cx:"8.61279",cy:"12.5",r:"1"}))});var ah=b(()=>{});var wt,Co,ud,Bp=b(()=>{"use client";wt=F(l("react"),1);qi();ap();ih();ks();Rr();W();np();ah();Co="array-actions",ud=({addRow:e,duplicateRow:t,hasMaxRows:o,index:r,isSortable:n,moveRow:i,removeRow:a,rowCount:s})=>{let{t:d}=M();return wt.default.createElement(Rs,{button:wt.default.createElement(nh,null),buttonClassName:`${Co}__button`,className:Co,horizontalAlign:"center",render:({close:c})=>wt.default.createElement(hr.ButtonGroup,{buttonSize:"small"},n&&r!==0&&wt.default.createElement(hr.Button,{className:`${Co}__action ${Co}__move-up`,onClick:()=>{i(r,r-1),c()}},wt.default.createElement("div",{className:`${Co}__action-chevron`},wt.default.createElement(bo,{direction:"up"})),d("general:moveUp")),n&&r<s-1&&wt.default.createElement(hr.Button,{className:`${Co}__action`,onClick:()=>{i(r,r+1),c()}},wt.default.createElement("div",{className:`${Co}__action-chevron`},wt.default.createElement(bo,null)),d("general:moveDown")),!o&&wt.default.createElement(wt.default.Fragment,null,wt.default.createElement(hr.Button,{className:`${Co}__action ${Co}__add`,onClick:()=>{e(r+1),c()}},wt.default.createElement(ei,null),d("general:addBelow")),wt.default.createElement(hr.Button,{className:`${Co}__action ${Co}__duplicate`,onClick:()=>{t(r),c()}},wt.default.createElement(Is,null),d("general:duplicate"))),wt.default.createElement(hr.Button,{className:`${Co}__action ${Co}__remove`,onClick:()=>{a(r),c()}},wt.default.createElement(zt,null),d("general:remove"))),size:"medium"})}});var Hp,RE,lh,sh=b(()=>{"use client";Hp=F(l("react"),1);lt();RE=Hp.default.createContext({data:{},path:"",rowNumber:void 0}),lh=({children:e,path:t,rowNumber:o})=>{let{getDataByPath:r,getSiblingData:n}=hp(),i=n(t),s=r(t)||i;return Hp.default.createElement(RE.Provider,{value:{data:s,path:t,rowNumber:o}},e)}});var dh,zp,DE,fd,Up=b(()=>{dh=l("@payloadcms/translations"),zp=F(l("react"),1);sh();DE="row-label",fd=e=>{let{RowLabelComponent:t,className:o,i18n:r,path:n,rowLabel:i,rowNumber:a}=e;if(t)return zp.default.createElement(lh,{path:n,rowNumber:a},t);let s=i?typeof i=="object"?(0,dh.getTranslation)(i,r):typeof i=="string"?i:"":"";return zp.default.createElement("span",{className:[DE,o].filter(Boolean).join(" "),style:{pointerEvents:"none"}},s)}});var jp=b(()=>{});var ch,Ln,Ll,ph,mh=b(()=>{"use client";ch=l("@payloadcms/translations"),Ln=F(l("react"),1);Bp();xl();Ur();lt();Nn();Up();W();jp();Ll="array-field",ph=({CustomRowLabel:e,addRow:t,attributes:o,duplicateRow:r,errorCount:n,fieldMap:i,forceRender:a=!1,hasMaxRows:s,indexPath:d,isSortable:c,labels:p,listeners:u,moveRow:m,path:f,permissions:h,readOnly:g,removeRow:x,row:y,rowCount:v,rowIndex:E,schemaPath:w,setCollapse:C,setNodeRef:S,transform:L})=>{let N=`${f}.${E}`,{i18n:_}=M(),T=tt(),k=`${(0,ch.getTranslation)(p.singular,_)} ${String(E+1).padStart(2,"0")}`,P=n>0&&T,R=[`${Ll}__row`,P?`${Ll}__row--has-errors`:`${Ll}__row--no-errors`].filter(Boolean).join(" ");return Ln.default.createElement("div",{id:`${f.split(".").join("-")}-row-${E}`,key:`${f}-row-${y.id}`,ref:S,style:{transform:L}},Ln.default.createElement(Ko,{actions:g?void 0:Ln.default.createElement(ud,{addRow:t,duplicateRow:r,hasMaxRows:s,index:E,isSortable:c,moveRow:m,removeRow:x,rowCount:v}),className:R,collapsibleStyle:P?"error":"default",dragHandleProps:c?{id:y.id,attributes:o,listeners:u}:void 0,header:Ln.default.createElement("div",{className:`${Ll}__row-header`},Ln.default.createElement(fd,{RowLabelComponent:e,i18n:_,path:N,rowLabel:k,rowNumber:E+1}),P&&Ln.default.createElement(Rt,{count:n,i18n:_,withMessage:!0})),isCollapsed:y.collapsed,onToggle:D=>C(y.id,D)},Ln.default.createElement(Dt,{className:`${Ll}__fields`,fieldMap:i,forceRender:a,indexPath:d,margins:"small",path:N,permissions:h?.fields,readOnly:g,schemaPath:w})))}});var gd,we,Ro,ME,uh,fh=b(()=>{"use client";gd=l("@payloadcms/translations"),we=F(l("react"),1);Zs();xn();Lp();rd();Ur();Re();lt();Op();Ye();We();et();yr();fr();W();$p();dt();ht();rt();Be();mh();jp();Ro="array-field",ME=e=>{let{name:t,CustomDescription:o,CustomError:r,CustomLabel:n,CustomRowLabel:i,className:a,descriptionProps:s,errorProps:d,fieldMap:c,forceRender:p=!1,isSortable:u=!0,label:m,labelProps:f,localized:h,maxRows:g,minRows:x,path:y,readOnly:v,required:E,validate:w}=e,{indexPath:C,path:S,permissions:L,readOnly:N}=j(),_=x??E?1:0,{setDocFieldPreferences:T}=Ge(),{addFieldRow:k,dispatchFields:P,setModified:R}=Lt(),D=tt(),{code:I}=vt(),{i18n:A,t:O}=M(),{localization:B}=J(),$=(()=>{if(B&&B.fallback){let z=B.defaultLocale||"en";return I===z}return!0})(),te=(z=>"labels"in z&&z?.labels?z.labels:"label"in z&&z?.label?{plural:void 0,singular:z?.label}:{plural:O("general:rows"),singular:O("general:row")})(e),ne=(0,we.useCallback)((z,xe)=>{if(!$&&z===null)return!0;if(typeof w=="function")return w(z,{...xe,maxRows:g,minRows:_,required:E})},[g,_,E,w,$]),{errorPaths:pe,formInitializing:Te,formProcessing:G,path:K,rows:Q=[],schemaPath:he,showError:Qe,valid:V,value:Qt}=ae({hasRows:!0,path:S??y??t,validate:ne}),Z=v||N||G||Te,de=(0,we.useCallback)(async z=>{await k({path:K,rowIndex:z,schemaPath:he}),R(!0),setTimeout(()=>{ia(`${K}-row-${z+1}`)},0)},[k,K,R,he]),go=(0,we.useCallback)(z=>{P({type:"DUPLICATE_ROW",path:K,rowIndex:z}),R(!0),setTimeout(()=>{ia(`${K}-row-${z}`)},0)},[P,K,R]),Jt=(0,we.useCallback)(z=>{P({type:"REMOVE_ROW",path:K,rowIndex:z}),R(!0)},[P,K,R]),Je=(0,we.useCallback)((z,xe)=>{P({type:"MOVE_ROW",moveFromIndex:z,moveToIndex:xe,path:K}),R(!0)},[P,K,R]),De=(0,we.useCallback)(z=>{P({type:"SET_ALL_ROWS_COLLAPSED",collapsed:z,path:K,setDocFieldPreferences:T})},[P,K,T]),Yt=(0,we.useCallback)((z,xe)=>{P({type:"SET_ROW_COLLAPSED",collapsed:xe,path:K,rowID:z,setDocFieldPreferences:T})},[P,K,T]),yt=g&&Q.length>=g,Ue=pe.length,Bt=D&&pe.length>0,St=Z&&Q.length===0,Ct=Q.length<_||E&&Q.length===0;return we.default.createElement("div",{className:[Y,Ro,a,Bt?`${Ro}--has-error`:`${Ro}--has-no-error`].filter(Boolean).join(" "),id:`field-${K.replace(/\./g,"__")}`},Qe&&we.default.createElement(me,{CustomError:r,path:K,...d||{}}),we.default.createElement("header",{className:`${Ro}__header`},we.default.createElement("div",{className:`${Ro}__header-wrap`},we.default.createElement("div",{className:`${Ro}__header-content`},we.default.createElement("h3",{className:`${Ro}__title`},we.default.createElement(se,{CustomLabel:n,as:"span",label:m,required:E,unstyled:!0,...f||{}})),Bt&&Ue>0&&we.default.createElement(Rt,{count:Ue,i18n:A,withMessage:!0})),Q.length>0&&we.default.createElement("ul",{className:`${Ro}__header-actions`},we.default.createElement("li",null,we.default.createElement("button",{className:`${Ro}__header-action`,onClick:()=>De(!0),type:"button"},O("fields:collapseAll"))),we.default.createElement("li",null,we.default.createElement("button",{className:`${Ro}__header-action`,onClick:()=>De(!1),type:"button"},O("fields:showAll"))))),we.default.createElement(ce,{CustomDescription:o,...s||{}})),we.default.createElement(md,{fieldValue:Qt,localized:h,path:K}),(Q.length>0||!V&&(St||Ct))&&we.default.createElement(ra,{className:`${Ro}__draggable-rows`,ids:Q.map(z=>z.id),onDragEnd:({moveFromIndex:z,moveToIndex:xe})=>Je(z,xe)},Q.map((z,xe)=>{let cr=pe?.filter(ge=>ge.startsWith(`${K}.${xe}.`)).length;return we.default.createElement(td,{disabled:Z||!u,id:z.id,key:z.id},ge=>we.default.createElement(ph,{...ge,CustomRowLabel:i,addRow:de,duplicateRow:go,errorCount:cr,fieldMap:c,forceRender:p,hasMaxRows:yt,indexPath:C,isSortable:u,labels:te,moveRow:Je,path:K,permissions:L,readOnly:Z,removeRow:Jt,row:z,rowCount:Q.length,rowIndex:xe,schemaPath:he,setCollapse:Yt}))}),!V&&we.default.createElement(we.default.Fragment,null,St&&we.default.createElement(En,null,O("validation:fieldHasNo",{label:(0,gd.getTranslation)(te.plural,A)})),Ct&&we.default.createElement(En,{type:"error"},O("validation:requiresAtLeast",{count:_,label:(0,gd.getTranslation)(_>1?te.plural:te.singular,A)||O(_>1?"general:rows":"general:row")})))),!Z&&!yt&&we.default.createElement(Ve,{buttonStyle:"icon-label",className:`${Ro}__add-row`,icon:"plus",iconPosition:"left",iconStyle:"with-border",onClick:()=>de(Qt||0)},O("fields:addLabel",{label:(0,gd.getTranslation)(te.singular,A)})))},uh=oe(ME)});var gh=b(()=>{});var hd,Nl,hh,bh=b(()=>{"use client";hd=F(l("react"),1);et();W();Cl();gh();Nl="thumbnail-card",hh=e=>{let{alignLabel:t,className:o,collection:r,doc:n,label:i,onClick:a,thumbnail:s}=e,d=J(),{i18n:c}=M(),p=[Nl,o,typeof a=="function"&&`${Nl}--has-on-click`,t&&`${Nl}--align-label-${t}`].filter(Boolean).join(" "),u=i;return u||(u=xr({collectionConfig:r,data:n,dateFormat:d.admin.dateFormat,fallback:n?.filename,i18n:c})),hd.default.createElement("button",{className:p,onClick:a,title:u,type:"button"},hd.default.createElement("div",{className:`${Nl}__thumbnail`},s),hd.default.createElement("div",{className:`${Nl}__label`},u))}});var vr,Vp,xh,yh=b(()=>{vr=F(l("react"),1),Vp=l("uuid"),xh=()=>{let[e]=(0,vr.useState)(`pattern${(0,Vp.v4)()}`),[t]=(0,vr.useState)(`image${(0,Vp.v4)()}`);return vr.default.createElement("svg",{fill:"none",height:"53",viewBox:"0 0 82 53",width:"82"},vr.default.createElement("rect",{fill:`url(#${e})`,height:"52.7791",width:"80.574",x:"0.713013"}),vr.default.createElement("defs",null,vr.default.createElement("pattern",{height:"1",id:`${e}`,patternContentUnits:"objectBoundingBox",width:"1"},vr.default.createElement("use",{transform:"scale(0.00387597 0.00591716)",xlinkHref:`#${t}`})),vr.default.createElement("image",{height:"169",id:t,width:"258",xlinkHref:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQIAAACpCAYAAADA4zPJAAALpklEQVR4Ae2dSY/UOhSF+///DCSGHQuEgAVI7BBITAI2zCCGZuhmpqEBP53W8yOvK1UdO3Zyr/NFilJdXalyTo4/X984zlZgQQEUWLwCW4tXAAFQAAUCIMAEKIACgAAPoAAKBECACVAABQABHkABFAiAABOgAAoAAjyAAiggBbhqgA9QAAUAAR5AARQgIsADKIACdA3wAAqggBQgR4APUAAFAAEeQAEUICLAAyiAAnQN8AAKoIAUIEeAD1AABQABHkABFCAiwAMogAJ0DfAACqCAFCBHgA9QAAUAAR5AARQgIsADKIACdA3wAAqggBQgR4APUAAFAAEeQAEUICLAAyiAAnQN8AAKoIAUIEeAD1AABQABHkABFCAiwAMogAJ0DfAACqCAFCBHgA9QAAUAAR5AARQgIsADKIACdA3wAAqggBQgR4APUAAFAAEeQAEUICLAAyiAAnQN8AAKoIAUIEeAD1AABQABHkABFCAiwAMLVmB/fz98+/YtfPr0KXz48CHs7u6GnZ2dg+3Hjx/D169fw48fP8KfP3+aV4muQfOnmAPsKqDKr4r/9u3bsL29PXgVKPb29pqFAiDouoTXzSrw8+fPg5Y+pfL3ffbdu3fh+/fvzekECJo7pRxQVwGF9YoA+ir1mPfUhVB00coCCFo5kxzHigKqqGrBx1T4Tfu+efOmmegAEKzYhzdaUEBdAVXUTRW51P+UVPS+AALvZ5DyryigSGAqCESYeIcBIFixEW94VuDXr1/JVwRiZR671VUFrwsg8HrmKPeKAkoMKok3tkLn7q8oRCDyuAACj2eNMvcqoMFBuZW41H4alORxAQQezxplXlHg9+/fk+cF1sHDYxcBEKxYijc8KvDly5fZo4EIhvfv37uTEBC4O2UU+LACyg2kDhmOlbbWVpcvPS2AwNPZoqy9CigUr1Whc79Xoxk9LYDA09mirL0K1BhCnAuAuJ8iFE8LIPB0tihrrwI1hxHHip2z9XQpERD0Wos3vSig/EBOJZ1iH09XDwCBF8dTzl4FNJx4ikqd8xu6kuFlAQRezhTl7FVAMwjlVNIp9vn8+XNvmS2+aR4E6md56mtZPMktl8niFYMIGU9XDkyDQCdZ47e1eupvtVzxrB0bEUGZM2ISBEoAafLISNa4FWH1PxYUiApo4E70h7UtOYJ4ljK2OrGbLgfpfy1NEZUhEbt0FNA9BtYAEMvjaW5DMxGBWnpN7hBFPGrrfSKIjpd5OVIBa8OLo3c9DTM2AQJRXbdvRgGHbrWP9mVZtgKaanyoZ6b6nPJanrqxs4MgJgRzTxCJxGVDQEevEDzXP7X2E5w8LbOBQLQsOUZ8TCLx9evX4fHjx+HRo0esTjW4efNmKL3eu3cvyBs5sPB2lWsWENSaZlr3gacmEi9fvhyOHTvGiga9Hjh79mwyDJSz8NQtUOQyOQhSEoI5JNY+mrJqyPLy5cvekw8YAGPXA7du3UqKCob6b4hHp/rMZCDITQjmwmBIIvH+/fuAgEjgSA9cuXJlMAh0edtbNCDYTAICjf6a4xKPflO/vW4BBLT83ZZ/3esUEHi6ZNitF1VBIDLqxovcVr3UfipDH6UBASBYV/m77w8FgaeRhF0I6HU1EChpp+Rdqco89nv6EomAABB0K/y610NAoCHxfY3N4Qpn9e8qILAwv3wfODTmoJvIef78+ZH9w3Xm4P3lQOTGjRsbGzSNGfAMgeIRgRKCFkd5HYaCyqiyaj1//jwwIGG41gOnT58Ourp02EPx7zHjVyxFB8UigrkSgvGEpG5jIlEw0ECiO3fusDaowe3bt8PVq1eDwvvU9fr162sh0NqI1tEgsJIQTAVB/Py6RKIlWlOWcQrIo+oSlrpypShADUhLyygQaOYgSwnBWLlTtzoGZkFqydb9xxKBkONZQUSNRqs+yQaBbvRQeJRa6ax+Xsfi6f7xfqvz7lAFVKEVJSjbLzCookc/a6uBQcol6ZKgxgZ4TwYepUsyCBQSeUgI5gJHxmgt7DvKBPwfBZJAIDKW6mflVtQp9tMxeh0hhqVRIEeBQSBQWKQQaYpKaOk3dMyth4Q5pmGf9hQ4EgTqS+3s7CwOAhFIOvZWE0Tt2ZkjylVgIwhaSwjGyp26JZGYay/286JALwiULOubTjy1ArX2ee/jyb2YknJOr8AKCJQk06WT1ipxqeORNiQSpzcqv1hXgf9AsNSEYC4gSCTWNSbfPq0CByBYekIwFwYkEqc1K79WT4GtsdOJ51aiVvZTItHbjLX17MQ3e1Vgq5UKOfdxtHI7ajSy7iYlFxLVaH8LCLa3iyVGlUhMnU7dmsWUK+pOL6dZpxlUZe0slS8PICgIghiV6F4M3ct+6dIlV+vFixcPJmo5d+5c6K4XLlwI+p/l47l27RpdtBF8AAQVQHDmzJm1M94wxVm9Kc6kOzeM5dEAEBQGgR6dRmWvV9mP0lbdM5Z0BQBBYRA8ePAAEMw4B6KeVciSrgAgAARNgQsQpENAewACQAAI8upOU3sBgsIgePjwYVMV66g+ubX/ExHk8QkQFAaB5sA/ceIEMJghT3D8+HHmnczjAF2DeO2/5Pbu3bvh1KlTwGBCGJw8eTI8efIksxqwGxFB4YggAuXVq1fh2bNn4enTp0euL168OJj/QaP4Sq26O1JzLw75/Rqf0czApY5lyPcwfmAczABBJRBEIAzd6ual7nMZx5xWK3eTxkfLjTkW9p1GAUBgBAQRGGMrj7W7SRWV6AYmFtsKAAJjIBAQciqPbgyyPL0cj5YDBMXu7out5lK2QyuPl+nleLScXRgQERiMCLqg2zQLkqIAJdK6n7f+mhmhbcIAEBgHgSp2X+VRlnx3d9cVBLqQGpsLsVmd/JYKEDgAQaxA8bmM1hKCsXypWx4tZwccgMARCFTRFB2kVjjrn2dG6PmBAAicgcB6pc4t36ZcyPzVpP0SAAJAYCbC6MuFtF8FbRwhIAAEZkAQowkeLTc9HAABIDAHAgGBR8tNCwNAAAhMgiBGByQSpwECIAAEpkEgIJBIrA8DQAAIzINAMFAikUfL1QMCIAAELkAQuwqtPVquXtVO+2ZAAAhcgUBAaOHRcmnVtP6nAQEgcAeCGB3ohiuWMgoAAkDgFgQCgm68Ypqy8TAABIDANQgEAxKJgMC9iWOYy3b84+lJJOYDgYiAiKApmGoWpP39/fwasdA9AQEgaAoEMbIqNSP0UrgACABBkyAQEEgkDscYIAAEzYJAMMiZEXp49Wnnk4AAEDQNgthVGDojdDtVO+1IAAEgWAQIBAQSievhAAgAwWJAIBhozAGJxFUgAAJAsCgQxK4C06n/HwaAABAsEgQCAonEvzAABIBgsSCI0QGJxBAAASBYPAgEhKU/lxEQAAJA8K8HljydOiAABIDgkAfio+X+9qDbfwUIDpkg9hvZjr8b0LOGS3suIyAABEQEGzywlOnUAcEGE3hu0Sh7uYhmCdOpAwJAQEQwwAOtJxIBwQAT0LqWa129a9nqcxkBASAgIkj0QIvPZQQEiSbw3qJR/nLRTUuJREAACIgIRniglUQiIBhhAlrXcq2rZy1bmE4dEAACIoJCHvA8nTogKGQCzy0aZS8X2Xh9LiMgAAREBBU84O25jICgggloYcu1sJ619DSdOiAABEQEFT3gJZEICCqawHNrRtnLRjXWE4mAABAQEUzkAcvTqQOCiUxAC1u2hfWsp8Xp1AEBICAimMED1hKJgGAGE3huzSh7ucjG0nTqgAAQEBHM7AEL06kDgplNQAtbroX1rOXciURAAAiICIx4QGMO5kokAgIjJvDcmlH2slHNHM9lBASAgIjAoAemTiQCAoMmoIUt28J61nOqRCIgAAREBMY9MMUsSIDAuAk8t2aUvVxkU3s6dUAACIgIHHmg1nMZAYEjE9DClmthPWtZYzp1QAAIiAiceqDkdOqAwKkJPLdolL1cZFMqkbilkUysaIAH/Hpgb28vjF3+AbSb48mcXO9tAAAAAElFTkSuQmCC"})))}});var Ch=b(()=>{});var bd,vh,_h=b(()=>{bd=F(l("react"),1);Ch();vh=()=>bd.default.createElement("svg",{className:"icon icon--search",fill:"none",viewBox:"0 0 25 25",xmlns:"http://www.w3.org/2000/svg"},bd.default.createElement("circle",{className:"stroke",cx:"11.2069",cy:"10.7069",r:"5"}),bd.default.createElement("line",{className:"stroke",x1:"14.914",x2:"20.5002",y1:"13.9998",y2:"19.586"}))});var wh=b(()=>{});var xd,kh,Th,Eh=b(()=>{"use client";xd=F(l("react"),1);_h();W();wh();kh="block-search",Th=e=>{let{setSearchTerm:t}=e,{t:o}=M(),r=n=>{t(n.target.value)};return xd.default.createElement("div",{className:kh},xd.default.createElement("input",{className:`${kh}__input`,onChange:r,placeholder:o("fields:searchForBlock")}),xd.default.createElement(vh,null))}});var Ph=b(()=>{});var Fh,Cd,Vt,yd,IE,fi,vd=b(()=>{"use client";Fh=l("@faceless-ui/modal"),Cd=l("@payloadcms/translations"),Vt=F(l("react"),1);kn();bh();yh();W();Eh();Ph();yd="blocks-drawer",IE=(e,t)=>typeof e.labels.singular=="string"?e.labels.singular.toLowerCase():typeof e.labels.singular=="object"?(0,Cd.getTranslation)(e.labels.singular,t).toLowerCase():"",fi=e=>{let{addRow:t,addRowIndex:o,blocks:r,drawerSlug:n,labels:i}=e,[a,s]=(0,Vt.useState)(""),[d,c]=(0,Vt.useState)(r),{closeModal:p,isModalOpen:u}=(0,Fh.useModal)(),{i18n:m,t:f}=M();return(0,Vt.useEffect)(()=>{u||s("")},[u]),(0,Vt.useEffect)(()=>{let h=a.toLowerCase(),g=r?.reduce((x,y)=>(IE(y,m).includes(h)&&x.push(y),x),[]);c(g)},[a,r,m]),Vt.default.createElement(Cr,{slug:n,title:f("fields:addLabel",{label:(0,Cd.getTranslation)(i.singular,m)})},Vt.default.createElement(Th,{setSearchTerm:s}),Vt.default.createElement("div",{className:`${yd}__blocks-wrapper`},Vt.default.createElement("ul",{className:`${yd}__blocks`},d?.map((h,g)=>{let{slug:x,imageAltText:y,imageURL:v,labels:E}=h;return Vt.default.createElement("li",{className:`${yd}__block`,key:g},Vt.default.createElement(hh,{alignLabel:"center",label:(0,Cd.getTranslation)(E?.singular,m),onClick:()=>{t(o,x),p(n)},thumbnail:v?Vt.default.createElement("img",{alt:y,src:v}):Vt.default.createElement("div",{className:`${yd}__default-image`},Vt.default.createElement(xh,null))}))}))))}});var Sh,aa,Lh,Nh=b(()=>{"use client";Sh=l("@faceless-ui/modal"),aa=F(l("react"),1);Bp();Ws();vd();Lh=e=>{let{addRow:t,blockType:o,blocks:r,duplicateRow:n,hasMaxRows:i,isSortable:a,labels:s,moveRow:d,removeRow:c,rowCount:p,rowIndex:u}=e,{closeModal:m,openModal:f}=(0,Sh.useModal)(),h=si("blocks-drawer"),[g,x]=aa.default.useState(null);return aa.default.createElement(aa.default.Fragment,null,aa.default.createElement(fi,{addRow:(y,v)=>{typeof t=="function"&&t(g,v),m(h)},addRowIndex:u,blocks:r,drawerSlug:h,labels:s}),aa.default.createElement(ud,{addRow:y=>{x(y),f(h)},duplicateRow:()=>n(u,o),hasMaxRows:i,index:u,isSortable:a,moveRow:d,removeRow:c,rowCount:p}))}});var Rh=b(()=>{});var Gp,Dh,gi,Wp=b(()=>{"use client";Gp=F(l("react"),1);Ye();W();Rh();Dh="section-title",gi=e=>{let{customOnChange:t,customValue:o,path:r,readOnly:n}=e,{setValue:i,value:a}=ae({path:r}),{t:s}=M(),d=[Dh].filter(Boolean).join(" "),c=t||(p=>{p.stopPropagation(),p.preventDefault(),i(p.target.value)});return Gp.default.createElement("div",{className:d,"data-value":o||a},Gp.default.createElement("input",{className:`${Dh}__input`,id:r,name:r,onChange:c,placeholder:s("general:untitled"),readOnly:n,type:"text",value:o||a||""}))}});var Mh,_r,Rn,Ih,Ah=b(()=>{"use client";Mh=l("@payloadcms/translations"),_r=F(l("react"),1);xl();Ur();$s();lt();Nn();W();Nh();Wp();Rn="blocks-field",Ih=({addRow:e,attributes:t,block:o,blocks:r,duplicateRow:n,errorCount:i,forceRender:a,hasMaxRows:s,isSortable:d,labels:c,listeners:p,moveRow:u,path:m,permissions:f,readOnly:h,removeRow:g,row:x,rowCount:y,rowIndex:v,schemaPath:E,setCollapse:w,setNodeRef:C,transform:S})=>{let L=`${m}.${v}`,{i18n:N}=M(),T=tt()&&i>0,k=[`${Rn}__row`,T?`${Rn}__row--has-errors`:`${Rn}__row--no-errors`].filter(Boolean).join(" ");return _r.default.createElement("div",{id:`${m.split(".").join("-")}-row-${v}`,key:`${m}-row-${v}`,ref:C,style:{transform:S}},_r.default.createElement(Ko,{actions:h?void 0:_r.default.createElement(Lh,{addRow:e,blockType:x.blockType,blocks:r,duplicateRow:n,fieldMap:o.fieldMap,hasMaxRows:s,isSortable:d,labels:c,moveRow:u,removeRow:g,rowCount:y,rowIndex:v}),className:k,collapsibleStyle:T?"error":"default",dragHandleProps:d?{id:x.id,attributes:t,listeners:p}:void 0,header:_r.default.createElement("div",{className:`${Rn}__block-header`},_r.default.createElement("span",{className:`${Rn}__block-number`},String(v+1).padStart(2,"0")),_r.default.createElement(Ar,{className:`${Rn}__block-pill ${Rn}__block-pill-${x.blockType}`,pillStyle:"white"},(0,Mh.getTranslation)(o.labels.singular,N)),_r.default.createElement(gi,{path:`${L}.blockName`,readOnly:h}),T&&_r.default.createElement(Rt,{count:i,i18n:N,withMessage:!0})),isCollapsed:x.collapsed,key:x.id,onToggle:P=>w(x.id,P)},_r.default.createElement(Dt,{className:`${Rn}__fields`,fieldMap:o.fieldMap,forceRender:a,margins:"small",path:L,permissions:f?.blocks?.[o.slug]?.fields,readOnly:h,schemaPath:`${E}.${o.slug}`})))}});var Oh=b(()=>{});var _d,ue,Qo,AE,$h,Bh=b(()=>{"use client";_d=l("@payloadcms/translations"),ue=F(l("react"),1);Zs();xn();Lp();rd();kn();Ws();Ur();Re();lt();Op();Ye();We();et();yr();fr();W();$p();dt();ht();rt();Be();Ah();vd();Oh();Qo="blocks-field",AE=e=>{let{i18n:t,t:o}=M(),{name:r,CustomDescription:n,CustomError:i,CustomLabel:a,blocks:s,className:d,descriptionProps:c,errorProps:p,forceRender:u=!1,isSortable:m=!0,label:f,labelProps:h,labels:g,localized:x,maxRows:y,minRows:v,path:E,readOnly:w,required:C,validate:S}=e,{indexPath:L,readOnly:N}=j(),_=v??C?1:0,{setDocFieldPreferences:T}=Ge(),{addFieldRow:k,dispatchFields:P,setModified:R}=Lt(),{code:D}=vt(),{localization:I}=J(),A=si("blocks-drawer"),O=tt(),B={plural:o("fields:blocks"),singular:o("fields:block"),...g},$=(()=>{if(I&&I.fallback){let z=I.defaultLocale||"en";return D===z}return!0})(),H=(0,ue.useCallback)((z,xe)=>{if(!$&&z===null)return!0;if(typeof S=="function")return S(z,{...xe,maxRows:y,minRows:_,required:C})},[y,_,C,S,$]),{path:te}=j(),{errorPaths:ne,formInitializing:pe,formProcessing:Te,path:G,permissions:K,rows:Q=[],schemaPath:he,showError:Qe,valid:V,value:Qt}=ae({hasRows:!0,path:te??E??r,validate:H}),Z=w||N||Te||pe,de=(0,ue.useCallback)(async(z,xe)=>{await k({data:{blockType:xe},path:G,rowIndex:z,schemaPath:`${he}.${xe}`}),R(!0),setTimeout(()=>{ia(`${G}-row-${z+1}`)},0)},[k,G,R,he]),go=(0,ue.useCallback)(z=>{P({type:"DUPLICATE_ROW",path:G,rowIndex:z}),R(!0),setTimeout(()=>{ia(`${G}-row-${z+1}`)},0)},[P,G,R]),Jt=(0,ue.useCallback)(z=>{P({type:"REMOVE_ROW",path:G,rowIndex:z}),R(!0)},[G,P,R]),Je=(0,ue.useCallback)((z,xe)=>{P({type:"MOVE_ROW",moveFromIndex:z,moveToIndex:xe,path:G}),R(!0)},[P,G,R]),De=(0,ue.useCallback)(z=>{P({type:"SET_ALL_ROWS_COLLAPSED",collapsed:z,path:G,setDocFieldPreferences:T})},[P,G,T]),Yt=(0,ue.useCallback)((z,xe)=>{P({type:"SET_ROW_COLLAPSED",collapsed:xe,path:G,rowID:z,setDocFieldPreferences:T})},[P,G,T]),yt=y&&Q.length>=y,Ue=ne.length,Bt=O&&Ue+(V?0:1)>0,St=Q.length<_||C&&Q.length===0,Ct=Z&&Q.length===0;return ue.default.createElement("div",{className:[Y,Qo,d,Bt?`${Qo}--has-error`:`${Qo}--has-no-error`].filter(Boolean).join(" "),id:`field-${G.replace(/\./g,"__")}`},Qe&&ue.default.createElement(me,{CustomError:i,path:G,...p||{}}),ue.default.createElement("header",{className:`${Qo}__header`},ue.default.createElement("div",{className:`${Qo}__header-wrap`},ue.default.createElement("div",{className:`${Qo}__heading-with-error`},ue.default.createElement("h3",null,ue.default.createElement(se,{CustomLabel:a,as:"span",label:f,required:C,unstyled:!0,...h||{}})),Bt&&Ue>0&&ue.default.createElement(Rt,{count:Ue,i18n:t,withMessage:!0})),Q.length>0&&ue.default.createElement("ul",{className:`${Qo}__header-actions`},ue.default.createElement("li",null,ue.default.createElement("button",{className:`${Qo}__header-action`,onClick:()=>De(!0),type:"button"},o("fields:collapseAll"))),ue.default.createElement("li",null,ue.default.createElement("button",{className:`${Qo}__header-action`,onClick:()=>De(!1),type:"button"},o("fields:showAll"))))),ue.default.createElement(ce,{CustomDescription:n,...c||{}})),ue.default.createElement(md,{fieldValue:Qt,localized:x,path:G}),(Q.length>0||!V&&(Ct||St))&&ue.default.createElement(ra,{className:`${Qo}__rows`,ids:Q.map(z=>z.id),onDragEnd:({moveFromIndex:z,moveToIndex:xe})=>Je(z,xe)},Q.map((z,xe)=>{let{blockType:cr}=z,ge=s.find(je=>je.slug===cr);if(ge){let je=ne.filter(Me=>Me.startsWith(`${G}.${xe}`)).length;return ue.default.createElement(td,{disabled:Z||!m,id:z.id,key:z.id},Me=>ue.default.createElement(Ih,{...Me,addRow:de,block:ge,blocks:s,duplicateRow:go,errorCount:je,forceRender:u,hasMaxRows:yt,indexPath:L,isSortable:m,labels:B,moveRow:Je,path:G,permissions:K,readOnly:Z,removeRow:Jt,row:z,rowCount:Q.length,rowIndex:xe,schemaPath:he,setCollapse:Yt}))}return null}),!$&&ue.default.createElement(ue.default.Fragment,null,St&&ue.default.createElement(En,{type:"error"},o("validation:requiresAtLeast",{count:_,label:(0,_d.getTranslation)(_>1?B.plural:B.singular,t)||o(_>1?"general:row":"general:rows")})),Ct&&ue.default.createElement(En,null,o("validation:fieldHasNo",{label:(0,_d.getTranslation)(B.plural,t)})))),!Z&&!yt&&ue.default.createElement(ue.Fragment,null,ue.default.createElement(No,{className:`${Qo}__drawer-toggler`,slug:A},ue.default.createElement(Ve,{buttonStyle:"icon-label",el:"span",icon:"plus",iconPosition:"left",iconStyle:"with-border"},o("fields:addLabel",{label:(0,_d.getTranslation)(B.singular,t)}))),ue.default.createElement(fi,{addRow:de,addRowIndex:Q?.length||0,blocks:s,drawerSlug:A,labels:B})))},$h=oe(AE)});var Hh=b(()=>{});var Kp,eo,hi=b(()=>{"use client";Kp=F(l("react"),1);Hh();eo=({animationDelay:e="0ms",height:t="60px",width:o="100%"})=>Kp.createElement("div",{className:"shimmer-effect",style:{height:typeof t=="number"?`${t}px`:t,width:typeof o=="number"?`${o}px`:o}},Kp.createElement("div",{className:"shimmer-effect__shine",style:{animationDelay:e}}))});var Dn,OE,$E,zh,Uh=b(()=>{"use client";Dn=F(l("react"),1),OE={autoMode:!0,setTheme:()=>null,theme:"light"},$E=(0,Dn.createContext)(OE),zh=()=>(0,Dn.useContext)($E)});var jh=b(()=>{});var Vh={};mr(Vh,{default:()=>UE});var qp,Qp,BE,HE,zE,UE,Gh=b(()=>{"use client";qp=F(l("@monaco-editor/react"),1),Qp=F(l("react"),1);Uh();hi();jh();BE=qp.default.default||qp.default,HE="code-editor",zE=e=>{let{className:t,height:o,options:r,readOnly:n,...i}=e,{theme:a}=zh(),s=[HE,t,i?.defaultLanguage?`language--${i.defaultLanguage}`:""].filter(Boolean).join(" ");return Qp.default.createElement(BE,{className:s,height:o,loading:Qp.default.createElement(eo,{height:o}),options:{detectIndentation:!0,minimap:{enabled:!1},readOnly:!!n,scrollBeyondLastLine:!1,tabSize:2,wordWrap:"on",...r},theme:a==="dark"?"vs-dark":"vs",...i})},UE=zE});var Mn,jE,wd,Jp=b(()=>{"use client";Mn=F(l("react"),1);hi();jE=(0,Mn.lazy)(()=>Promise.resolve().then(()=>(Gh(),Vh))),wd=e=>{let{height:t="35vh"}=e;return Mn.default.createElement(Mn.Suspense,{fallback:Mn.default.createElement(eo,{height:t})},Mn.default.createElement(jE,{...e,height:t}))}});var Wh=b(()=>{});var jr,VE,GE,WE,Kh,qh=b(()=>{"use client";jr=F(l("react"),1);Jp();Re();Ye();We();dt();ht();rt();Be();Wh();VE={js:"javascript",ts:"typescript"},GE="code-field",WE=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,editorOptions:c={},errorProps:p,label:u,labelProps:m,language:f="javascript",path:h,readOnly:g,required:x,style:y,validate:v,width:E}=e,w=(0,jr.useCallback)((D,I)=>{if(typeof v=="function")return v(D,{...I,required:x})},[v,x]),{path:C,readOnly:S}=j(),{formInitializing:L,formProcessing:N,path:_,setValue:T,showError:k,value:P}=ae({path:C??h??t,validate:w}),R=g||S||N||L;return jr.default.createElement("div",{className:[Y,GE,s,k&&"error",R&&"read-only"].filter(Boolean).join(" "),style:{...y,width:E}},jr.default.createElement(se,{CustomLabel:a,label:u,required:x,...m||{}}),jr.default.createElement("div",{className:`${Y}__wrap`},jr.default.createElement(me,{CustomError:i,path:_,...p||{}}),r,jr.default.createElement(wd,{defaultLanguage:VE[f]||f,onChange:R?()=>null:D=>T(D),options:c,readOnly:R,value:P||""}),o),n||jr.default.createElement(ce,{...d||{}}))},Kh=oe(WE)});var kd,Qh=b(()=>{kd=(e,t)=>t.reduce((r,n)=>{let i="fieldMap"in n.fieldComponentProps?n.fieldComponentProps.fieldMap:void 0;if(i)if(n.isFieldAffectingData){let a="name"in n?n.name:"unnamed";r.push(e?`${e}.${a}.`:`${a}.`)}else r.push(...kd(e,i));else if(n.type==="tabs")"tabs"in n.fieldComponentProps&&n.fieldComponentProps.tabs?.forEach(a=>{let s=e;"name"in a&&(s=e?`${e}.${a.name}`:a.name),r.push(...kd(s,a.fieldMap))});else if(n.isFieldAffectingData){let a="name"in n?n.name:"unnamed";r.push(e?`${e}.${a}`:a)}return r},[])});var Jh,Yh=b(()=>{Jh=({formState:e,pathSegments:t})=>{let o={},r=0;return Object.entries(e).forEach(([n])=>{if(t?.some(a=>a.endsWith(".")?n.startsWith(a):n===a)){let a=e[n];o[n]=a,"valid"in a&&!a.valid&&(r+=1)}}),{errorCount:r,fieldState:o}}});var Td,Yp=b(()=>{"use client";ul();lt();Qh();Yh();Td=({fieldMap:e,path:t,setErrorCount:o})=>{let[r]=yl(),n=tt(),i=kd(t,e);return Mr(()=>{if(n){let{errorCount:a}=Jh({formState:r,pathSegments:i});o(a)}},250,[r,n,e]),null}});var Xh=b(()=>{});var bt,Rl,KE,Zh,eb=b(()=>{"use client";bt=F(l("react"),1);xl();Ur();Re();Nn();Up();Yp();We();yr();oi();W();Be();Xh();lt();dt();Rl="collapsible-field",KE=e=>{let{CustomDescription:t,CustomLabel:o,className:r,descriptionProps:n,fieldMap:i,initCollapsed:a=!1,label:s,path:d,readOnly:c}=e,{indexPath:p,path:u,readOnly:m,schemaPath:f,siblingPermissions:h}=j(),g=$r(),x=Or(),y=u??d,{i18n:v}=M(),{getPreference:E,setPreference:w}=So(),{preferencesKey:C}=Ge(),[S,L]=(0,bt.useState)(),N=`collapsible-${p.replace(/\./g,"__")}`,[_,T]=(0,bt.useState)(0),k=_>0,P=(0,bt.useCallback)(async D=>{let I=await E(C);C&&w(C,{...I,...y?{fields:{...I?.fields||{},[y]:{...I?.fields?.[y],collapsed:D}}}:{fields:{...I?.fields||{},[N]:{...I?.fields?.[N],collapsed:D}}}})},[C,N,E,w,y]);if((0,bt.useEffect)(()=>{(async()=>{if(C){let I=await E(C),A=y?I?.fields?.[y]?.collapsed:I?.fields?.[N]?.collapsed;L(A!==void 0?!!A:typeof a=="boolean"?a:!1)}else L(typeof a=="boolean"?a:!1)})()},[E,C,N,a,y]),typeof S!="boolean")return null;let R=c||m||x||g;return bt.default.createElement(bt.Fragment,null,bt.default.createElement(Td,{fieldMap:i,path:y,setErrorCount:T}),bt.default.createElement("div",{className:[Y,Rl,r,k?`${Rl}--has-error`:`${Rl}--has-no-error`].filter(Boolean).join(" "),id:`field-${N}${y?`-${y.replace(/\./g,"__")}`:""}`},bt.default.createElement(Ko,{className:`${Rl}__collapsible`,collapsibleStyle:k?"error":"default",header:bt.default.createElement("div",{className:`${Rl}__row-label-wrap`},bt.default.createElement(fd,{RowLabelComponent:o,i18n:v,path:y,rowLabel:s}),k&&bt.default.createElement(Rt,{count:_,i18n:v,withMessage:!0})),initCollapsed:S,onToggle:P},bt.default.createElement(Dt,{fieldMap:i,forceRender:!0,indexPath:p,margins:"small",path:y,permissions:h,readOnly:R,schemaPath:f})),bt.default.createElement(ce,{CustomDescription:t,...n||{}})))},Zh=oe(KE)});var tb=b(()=>{});var In,ob,rb=b(()=>{"use client";In=F(l("react"),1);lt();Ye();W();ht();rt();Be();tb();ob=e=>{let{disabled:t}=e,o=Br(([c])=>c?.password),{t:r}=M(),n=(0,In.useCallback)(c=>c?c===o?.value?!0:r("fields:passwordsDoNotMatch"):r("validation:required"),[o,r]),i="confirm-password",{setValue:a,showError:s,value:d}=ae({disableFormData:!0,path:i,validate:n});return In.default.createElement("div",{className:[Y,"confirm-password",s&&"error"].filter(Boolean).join(" ")},In.default.createElement(se,{htmlFor:"field-confirm-password",label:r("authentication:confirmPassword"),required:!0}),In.default.createElement("div",{className:`${Y}__wrap`},In.default.createElement(me,{path:i}),In.default.createElement("input",{autoComplete:"off",disabled:!!t,id:"field-confirm-password",name:"confirm-password",onChange:a,type:"password",value:d||""})))}});var An,qE,nb,ib=b(()=>{"use client";An=F(l("react"),1);hi();qE=(0,An.lazy)(()=>Promise.resolve().then(()=>(Uf(),zf))),nb=e=>An.default.createElement(An.Suspense,{fallback:An.default.createElement(eo,{height:50})},An.default.createElement(qE,{...e}))});var ab=b(()=>{});var sb,Vr,lb,QE,db,cb=b(()=>{"use client";sb=l("@payloadcms/translations"),Vr=F(l("react"),1);ib();Ye();W();rt();Be();ab();Re();We();dt();ht();lb="date-time-field",QE=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,date:d,descriptionProps:c,errorProps:p,label:u,labelProps:m,path:f,placeholder:h,readOnly:g,required:x,style:y,validate:v,width:E}=e,{i18n:w}=M(),C=(0,Vr.useCallback)((I,A)=>{if(typeof v=="function")return v(I,{...A,required:x})},[v,x]),{path:S,readOnly:L}=j(),{formInitializing:N,formProcessing:_,path:T,setValue:k,showError:P,value:R}=ae({path:S??f??t,validate:C}),D=g||L||_||N;return Vr.default.createElement("div",{className:[Y,lb,s,P&&`${lb}--has-error`,D&&"read-only"].filter(Boolean).join(" "),style:{...y,width:E}},Vr.default.createElement(se,{CustomLabel:a,label:u,required:x,...m||{}}),Vr.default.createElement("div",{className:`${Y}__wrap`,id:`field-${T.replace(/\./g,"__")}`},Vr.default.createElement(me,{CustomError:i,path:T,...p||{}}),r,Vr.default.createElement(nb,{...d,onChange:I=>{D||k(I?.toISOString()||null)},placeholder:(0,sb.getTranslation)(h,w),readOnly:D,value:R}),o),n!==void 0?n:Vr.default.createElement(ce,{...c||{}}))},db=oe(QE)});var pb=b(()=>{});var mb,Gr,JE,ub,fb=b(()=>{"use client";mb=l("@payloadcms/translations"),Gr=F(l("react"),1);Re();Ye();We();W();dt();ht();rt();Be();pb();JE=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,autoComplete:s,className:d,descriptionProps:c,errorProps:p,label:u,labelProps:m,path:f,placeholder:h,readOnly:g,required:x,style:y,validate:v,width:E}=e,{i18n:w}=M(),C=(0,Gr.useCallback)((I,A)=>{if(typeof v=="function")return v(I,{...A,required:x})},[v,x]),{path:S,readOnly:L}=j(),{formInitializing:N,formProcessing:_,path:T,setValue:k,showError:P,value:R}=ae({path:S??f??t,validate:C}),D=g||L||_||N;return Gr.default.createElement("div",{className:[Y,"email",d,P&&"error",D&&"read-only"].filter(Boolean).join(" "),style:{...y,width:E}},Gr.default.createElement(se,{CustomLabel:a,label:u,required:x,...m||{}}),Gr.default.createElement("div",{className:`${Y}__wrap`},Gr.default.createElement(me,{CustomError:i,path:T,...p||{}}),r,Gr.default.createElement("input",{autoComplete:s,disabled:D,id:`field-${T.replace(/\./g,"__")}`,name:T,onChange:k,placeholder:(0,mb.getTranslation)(h,w),type:"email",value:R||""}),o),n!==void 0?n:Gr.default.createElement(ce,{...c||{}}))},ub=oe(JE)});var la,gb,hb,Xp,Zp=b(()=>{"use client";la=F(l("react"),1),gb=(0,la.createContext)(!1),hb=({children:e,withinRow:t=!0})=>la.default.createElement(gb.Provider,{value:t},e),Xp=()=>(0,la.useContext)(gb)});var sa,bb,xb,yb,em=b(()=>{"use client";sa=F(l("react"),1),bb=(0,sa.createContext)(!1),xb=({children:e,withinTab:t=!0})=>sa.default.createElement(bb.Provider,{value:t},e),yb=()=>(0,sa.useContext)(bb)});var Cb=b(()=>{});var da,vb,_b,wb,kb=b(()=>{"use client";da=F(l("react"),1),vb=(0,da.createContext)(!1),_b=({children:e,withinGroup:t=!0})=>da.default.createElement(vb.Provider,{value:t},e),wb=()=>(0,da.useContext)(vb)});var Tb,vo,Jo,YE,Eb,Pb=b(()=>{"use client";Tb=l("@payloadcms/translations"),vo=F(l("react"),1);Ds();Ur();Re();lt();Nn();Ye();We();W();dt();Zp();em();Be();Cb();kb();Jo="group-field",YE=e=>{let{CustomDescription:t,CustomLabel:o,className:r,descriptionProps:n,fieldMap:i,hideGutter:a,label:s,readOnly:d,style:c,width:p}=e,{path:u,permissions:m,readOnly:f,schemaPath:h}=j(),{i18n:g}=M(),{isWithinCollapsible:x}=ai(),y=wb(),v=Xp(),E=yb(),{errorPaths:w}=ae({path:u}),C=$r(),S=Or(),L=tt(),N=w.length,_=L&&N>0,T=d||f||S||C;return vo.default.createElement(vo.Fragment,null,vo.default.createElement("div",{className:[Y,Jo,!(x||y||v)&&`${Jo}--top-level`,x&&`${Jo}--within-collapsible`,y&&`${Jo}--within-group`,v&&`${Jo}--within-row`,E&&`${Jo}--within-tab`,!a&&y&&`${Jo}--gutter`,_&&`${Jo}--has-error`,r].filter(Boolean).join(" "),id:`field-${u?.replace(/\./g,"__")}`,style:{...c,width:p}},vo.default.createElement(_b,null,vo.default.createElement("div",{className:`${Jo}__wrap`},vo.default.createElement("div",{className:`${Jo}__header`},(o||t||s)&&vo.default.createElement("header",null,o!==void 0?o:s?vo.default.createElement("h3",{className:`${Jo}__title`},(0,Tb.getTranslation)(s,g)):null,t!==void 0?t:vo.default.createElement(ce,{...n||{}})),_&&vo.default.createElement(Rt,{count:N,i18n:g,withMessage:!0})),vo.default.createElement(Dt,{fieldMap:i,margins:"small",path:u,permissions:m?.fields,readOnly:T,schemaPath:h})))))},Eb=oe(YE)});var Fb=b(()=>{});var Mt,XE,ZE,Sb,Lb=b(()=>{"use client";Mt=F(l("react"),1);Jp();Ye();We();rt();Be();Fb();Re();dt();ht();XE="json-field",ZE=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,editorOptions:c,errorProps:p,jsonSchema:u,label:m,labelProps:f,path:h,readOnly:g,required:x,style:y,validate:v,width:E}=e,[w,C]=(0,Mt.useState)(),[S,L]=(0,Mt.useState)(),[N,_]=(0,Mt.useState)(!1),T=(0,Mt.useCallback)((pe,Te)=>{if(typeof v=="function")return v(pe,{...Te,jsonError:S,required:x})},[v,x,S]),{path:k,readOnly:P}=j(),{formInitializing:R,formProcessing:D,initialValue:I,path:A,setValue:O,showError:B,value:$}=ae({path:k??h??t,validate:T}),H=g||P||D||R,te=(0,Mt.useCallback)((pe,Te)=>{if(!u)return;let G=Te.languages.json.jsonDefaults.diagnosticsOptions.schemas||[],K=Te.Uri.parse(u.uri),Q=Te.editor.createModel(JSON.stringify($,null,2),"json",K);Te.languages.json.jsonDefaults.setDiagnosticsOptions({enableSchemaRequest:!0,schemas:[...G,u],validate:!0}),pe.setModel(Q)},[u,$]),ne=(0,Mt.useCallback)(pe=>{if(!H){C(pe);try{O(pe?JSON.parse(pe):null),L(void 0)}catch(Te){O(pe||null),L(Te)}}},[H,O,C]);return(0,Mt.useEffect)(()=>{N||$===void 0||(C($||I?JSON.stringify($||I,null,2):""),_(!0))},[I,$,N]),Mt.default.createElement("div",{className:[Y,XE,s,B&&"error",H&&"read-only"].filter(Boolean).join(" "),style:{...y,width:E}},Mt.default.createElement(se,{CustomLabel:a,label:m,required:x,...f||{}}),Mt.default.createElement("div",{className:`${Y}__wrap`},Mt.default.createElement(me,{CustomError:i,path:A,...p||{}}),r,Mt.default.createElement(wd,{defaultLanguage:"json",onChange:ne,onMount:te,options:c,readOnly:H,value:w}),o),n!==void 0?n:Mt.default.createElement(ce,{...d||{}}))},Sb=oe(ZE)});var Nb=b(()=>{});var tm,Rb,om,Db=b(()=>{"use client";tm=F(l("react"),1);Rr();Nb();Rb="clear-indicator",om=e=>{let{clearValue:t,innerProps:{ref:o,...r}}=e;return tm.default.createElement("div",{className:Rb,ref:typeof o=="string"?null:o,...r,onKeyDown:n=>{n.key==="Enter"&&(t(),n.stopPropagation())},role:"button",tabIndex:0},tm.default.createElement(zt,{className:`${Rb}__icon`}))}});var Ed,Mb,rm,Ib=b(()=>{"use client";Ed=F(l("react"),1),Mb=l("react-select"),rm=e=>{let{children:t,innerProps:o,selectProps:{customProps:{disableKeyDown:r,disableMouseDown:n}={}}={}}=e;return Ed.default.createElement(Ed.default.Fragment,null,Ed.default.createElement(Mb.components.Control,{...e,innerProps:{...o,onKeyDown:i=>{if(r){i.stopPropagation();let a=new CustomEvent("bypassKeyDown",{detail:i});document.dispatchEvent(a)}},onMouseDown:i=>{n||o.onMouseDown(i)}}},t))}});var Ab=b(()=>{});var nm,Ob,im,$b=b(()=>{"use client";Ie();nm=F(l("react"),1);Ab();Ob="dropdown-indicator",im=e=>{let{innerProps:{ref:t,...o}}=e;return nm.default.createElement("button",{className:Ob,ref:t,...o,onKeyDown:r=>{r.key==="Enter"&&(r.key=" ")},type:"button"},nm.default.createElement(bo,{className:`${Ob}__icon`}))}});var Pd,Bb,am,Hb=b(()=>{"use client";Pd=F(l("react"),1),Bb=l("react-select"),am=e=>Pd.default.createElement(Pd.default.Fragment,null,Pd.default.createElement(Bb.components.Input,{...e,"aria-activedescendant":void 0}))});var zb=b(()=>{});function lm(e,t){return typeof t=="function"?t(e):e.value}var Fd,jb,Ub,sm,Vb=b(()=>{"use client";Fd=F(l("react"),1),jb=l("react-select");Os();zb();Ub="multi-value";sm=e=>{let{className:t,data:o,innerProps:r,isDisabled:n,selectProps:{customProps:{disableMouseDown:i}={},getOptionValue:a,isSortable:s}={}}=e,{attributes:d,isDragging:c,listeners:p,setNodeRef:u,transform:m}=Zi({id:lm(o,a),disabled:!s}),f=[Ub,t,!n&&s&&"draggable",c&&`${Ub}--is-dragging`].filter(Boolean).join(" ");return Fd.default.createElement(Fd.default.Fragment,null,Fd.default.createElement(jb.components.MultiValue,{...e,className:f,innerProps:{...s?{...d,...p}:{},...r,onMouseDown:h=>{i||h.stopPropagation()},ref:u,style:s?{transform:m,...d?.style}:{}}}))}});var Gb=b(()=>{});var dm,Kb,Wb,cm,qb=b(()=>{"use client";dm=F(l("react"),1),Kb=l("react-select");Gb();Wb="multi-value-label",cm=e=>{let{selectProps:{customProps:{draggableProps:t}={}}={}}=e;return dm.default.createElement("div",{className:Wb},dm.default.createElement(Kb.components.MultiValueLabel,{...e,innerProps:{className:`${Wb}__text`,...t||{}}}))}});var Qb=b(()=>{});var Dl,pm,mm,Jb=b(()=>{"use client";Dl=F(l("react"),1);Rr();W();Dr();Qb();pm="multi-value-remove",mm=e=>{let{innerProps:{className:t,onClick:o,onTouchEnd:r}}=e,[n,i]=Dl.default.useState(!1),{t:a}=M();return Dl.default.createElement("button",{"aria-label":a("general:remove"),className:[pm,t].filter(Boolean).join(" "),onClick:s=>{i(!1),o(s)},onKeyDown:s=>{s.key==="Enter"&&s.stopPropagation()},onMouseDown:s=>s.stopPropagation(),onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onTouchEnd:r,type:"button"},Dl.default.createElement(Ut,{className:`${pm}__tooltip`,show:n},a("general:remove")),Dl.default.createElement(zt,{className:`${pm}__icon`}))}});var Sd,Yb,eP,um,Xb=b(()=>{"use client";Sd=F(l("react"),1),Yb=l("react-select"),eP="react-select--single-value",um=e=>{let{children:t,className:o}=e;return Sd.default.createElement(Sd.default.Fragment,null,Sd.default.createElement(Yb.components.SingleValue,{...e,className:[eP,o].filter(Boolean).join(" ")},t))}});var Zb=b(()=>{});var fm,ex,tP,gm,tx=b(()=>{"use client";fm=F(l("react"),1),ex=l("react-select");Zb();tP="value-container",gm=e=>{let{selectProps:{customProps:t}={}}=e;return fm.default.createElement("div",{className:tP,ref:t?.droppableRef},fm.default.createElement(ex.components.ValueContainer,{...e}))}});var ox=b(()=>{});var rx,hm,so,nx,ix,oP,ax,rP,wr,ca=b(()=>{"use client";rx=l("@dnd-kit/sortable"),hm=l("@payloadcms/translations"),so=F(l("react"),1),nx=F(l("react-select"),1),ix=F(l("react-select/creatable"),1);W();rd();hi();Db();Ib();$b();Hb();Vb();qb();Jb();Xb();tx();ox();oP=e=>({label:e,value:e}),ax=e=>{let{i18n:t,t:o}=M(),[r,n]=so.default.useState(""),i=(0,so.useId)(),[a,s]=so.default.useState(!1);(0,so.useEffect)(()=>{s(!0)},[]);let{className:d,components:c,customProps:p,disabled:u=!1,filterOption:m=void 0,getOptionValue:f,isClearable:h=!0,isCreatable:g,isLoading:x,isSearchable:y=!0,noOptionsMessage:v=()=>o("general:noOptions"),numberOnly:E=!1,onChange:w,onMenuClose:C,onMenuOpen:S,options:L,placeholder:N=o("general:selectValue"),showError:_,value:T}=e,k=()=>o("general:loading")+"...",P=[d,"react-select",_&&"react-select--error"].filter(Boolean).join(" ");if(!a)return so.default.createElement(eo,{height:"calc(var(--base) * 2 + 2px)"});if(!g)return so.default.createElement(nx.default,{captureMenuScroll:!0,customProps:p,isLoading:x,placeholder:(0,hm.getTranslation)(N,t),...e,className:P,classNamePrefix:"rs",components:{ClearIndicator:om,Control:rm,DropdownIndicator:im,Input:am,MultiValue:sm,MultiValueLabel:cm,MultiValueRemove:mm,SingleValue:um,ValueContainer:gm,...c},filterOption:m,getOptionValue:f,instanceId:i,isClearable:h,isDisabled:u,isSearchable:y,loadingMessage:k,menuPlacement:"auto",noOptionsMessage:v,onChange:w,onMenuClose:C,onMenuOpen:S,options:L,value:T});let R=D=>{if(E===!0){let I=["Tab","Escape","Backspace","Enter","ArrowRight","ArrowLeft","ArrowUp","ArrowDown"],A=!/\D/.test(D.key),O=I.includes(D.key);if(!A&&!O){D.preventDefault();return}}if(!(!T||!r||r.trim()==="")&&!(m&&!m(null,r)))switch(D.key){case"Enter":case"Tab":w([...T,oP(r)]),n(""),D.preventDefault();break;default:break}};return so.default.createElement(ix.default,{captureMenuScroll:!0,isLoading:x,placeholder:(0,hm.getTranslation)(N,t),...e,className:P,classNamePrefix:"rs",components:{ClearIndicator:om,Control:rm,DropdownIndicator:im,Input:am,MultiValue:sm,MultiValueLabel:cm,MultiValueRemove:mm,SingleValue:um,ValueContainer:gm,...c},filterOption:m,inputValue:r,instanceId:i,isClearable:h,isDisabled:u,isSearchable:y,loadingMessage:k,menuPlacement:"auto",noOptionsMessage:v,onChange:w,onInputChange:D=>n(D),onKeyDown:R,onMenuClose:C,onMenuOpen:S,options:L,value:T})},rP=e=>{let{getOptionValue:t,onChange:o,value:r}=e,n=[];return r&&(n=(Array.isArray(r)?r:[r]).map(i=>lm(i,t))),so.default.createElement(ra,{className:"react-select-container",ids:n,onDragEnd:({moveFromIndex:i,moveToIndex:a})=>{let s=r;r&&Array.isArray(r)&&(s=(0,rx.arrayMove)(r,i,a)),o(s)}},so.default.createElement(ax,{...e}))},wr=e=>{let{isMulti:t,isSortable:o}=e;return t&&o?so.default.createElement(rP,{...e}):so.default.createElement(ax,{...e})}});var lx=b(()=>{});var sx,dx,It,nP,cx,px=b(()=>{"use client";sx=l("@payloadcms/translations"),dx=l("payload/shared"),It=F(l("react"),1);ca();Re();Ye();We();W();dt();ht();rt();Be();lx();nP=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,hasMany:p=!1,label:u,labelProps:m,max:f=1/0,maxRows:h=1/0,min:g=-1/0,onChange:x,path:y,placeholder:v,readOnly:E,required:w,step:C=1,style:S,validate:L,width:N}=e,{i18n:_,t:T}=M(),k=(0,It.useCallback)((G,K)=>{if(typeof L=="function")return L(G,{...K,max:f,min:g,required:w})},[L,g,f,w]),{path:P,readOnly:R}=j(),{formInitializing:D,formProcessing:I,path:A,setValue:O,showError:B,value:$}=ae({path:P??y??t,validate:k}),H=E||R||I||D,te=(0,It.useCallback)(G=>{let K=parseFloat(G.target.value),Q=K;Number.isNaN(K)&&(Q=void 0),typeof x=="function"&&x(Q),O(Q)},[x,O]),[ne,pe]=(0,It.useState)([]),Te=(0,It.useCallback)(G=>{if(!H){let K;G?Array.isArray(G)?K=G.map(Q=>Number(Q.value?.value||Q.value)):K=[Number(G.value?.value||G.value)]:K=[],O(K)}},[H,O]);return(0,It.useEffect)(()=>{p&&Array.isArray($)&&pe($.map((G,K)=>({id:`${G}${K}`,label:`${G}`,value:{toString:()=>`${G}${K}`,value:G?.value||G}})))},[$,p]),It.default.createElement("div",{className:[Y,"number",s,B&&"error",H&&"read-only",p&&"has-many"].filter(Boolean).join(" "),style:{...S,width:N}},It.default.createElement(se,{CustomLabel:a,label:u,required:w,...m||{}}),It.default.createElement("div",{className:`${Y}__wrap`},It.default.createElement(me,{CustomError:i,path:A,...c||{}}),p?It.default.createElement(wr,{className:`field-${A.replace(/\./g,"__")}`,disabled:H,filterOption:(G,K)=>{let Q=Array.isArray($)&&$.length>=h;return(0,dx.isNumber)(K)&&!Q},isClearable:!0,isCreatable:!0,isMulti:!0,isSortable:!0,noOptionsMessage:()=>Array.isArray($)&&$.length>=h?T("validation:limitReached",{max:h,value:$.length+1}):null,onChange:Te,options:[],placeholder:T("general:enterAValue"),showError:B,value:ne}):It.default.createElement("div",null,r,It.default.createElement("input",{disabled:H,id:`field-${A.replace(/\./g,"__")}`,max:f,min:g,name:A,onChange:te,onWheel:G=>{G.target.blur()},placeholder:(0,sx.getTranslation)(v,_),step:C,type:"number",value:typeof $=="number"?$:""}),o),n!==void 0?n:It.default.createElement(ce,{...d||{}})))},cx=oe(nP)});var mx=b(()=>{});var On,iP,ux,fx=b(()=>{"use client";On=F(l("react"),1);Ye();We();ht();rt();Be();mx();iP=e=>{let{name:t,CustomError:o,CustomLabel:r,autoComplete:n,className:i,disabled:a,errorProps:s,label:d,labelProps:c,path:p,required:u,style:m,validate:f,width:h}=e,g=(0,On.useCallback)((L,N)=>{if(typeof f=="function")return f(L,{...N,required:u})},[f,u]),{formInitializing:x,formProcessing:y,path:v,setValue:E,showError:w,value:C}=ae({path:p||t,validate:g}),S=a||x||y;return On.default.createElement("div",{className:[Y,"password",i,w&&"error",S&&"read-only"].filter(Boolean).join(" "),style:{...m,width:h}},On.default.createElement(se,{CustomLabel:r,label:d,required:u,...c||{}}),On.default.createElement("div",{className:`${Y}__wrap`},On.default.createElement(me,{CustomError:o,path:v,...s||{}}),On.default.createElement("input",{autoComplete:n,disabled:S,id:`field-${v.replace(/\./g,"__")}`,name:v,onChange:E,type:"password",value:C||""})))},ux=oe(iP)});var gx=b(()=>{});var Ld,Gt,hx,aP,bx,xx=b(()=>{"use client";Ld=l("@payloadcms/translations"),Gt=F(l("react"),1);Ye();We();W();Be();gx();Re();dt();ht();rt();hx="point",aP=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,label:p,labelProps:u,path:m,placeholder:f,readOnly:h,required:g,step:x,style:y,validate:v,width:E}=e,{i18n:w,t:C}=M(),S=(0,Gt.useCallback)((A,O)=>{if(typeof v=="function")return v(A,{...O,required:g})},[v,g]),{path:L,readOnly:N}=j(),_=h||N,{path:T,setValue:k,showError:P,value:R=[null,null]}=ae({path:L??m??t,validate:S}),D=(0,Gt.useCallback)((A,O)=>{let B=parseFloat(A.target.value);Number.isNaN(B)&&(B=A.target.value);let $=[...R];$[O]=B,k($)},[k,R]),I=A=>{let O=C(A==="longitude"?"fields:longitude":"fields:latitude"),B=p?(0,Ld.getTranslation)(p,w):"";return{...u,label:`${B}${B?" - ":""}${O}`}};return Gt.default.createElement("div",{className:[Y,hx,s,P&&"error",_&&"read-only"].filter(Boolean).join(" "),style:{...y,width:E}},Gt.default.createElement("ul",{className:`${hx}__wrap`},Gt.default.createElement("li",null,a!==void 0?a:Gt.default.createElement(se,{...I("longitude")}),Gt.default.createElement("div",{className:"input-wrapper"},r,Gt.default.createElement("input",{disabled:_,id:`field-longitude-${T.replace(/\./g,"__")}`,name:`${T}.longitude`,onChange:A=>D(A,0),placeholder:(0,Ld.getTranslation)(f,w),step:x,type:"number",value:R&&typeof R[0]=="number"?R[0]:""}),o)),Gt.default.createElement("li",null,a!==void 0?a:Gt.default.createElement(se,{...I("latitude")}),Gt.default.createElement("div",{className:"input-wrapper"},Gt.default.createElement(me,{CustomError:i,path:T,...c||{}}),r,Gt.default.createElement("input",{disabled:_,id:`field-latitude-${T.replace(/\./g,"__")}`,name:`${T}.latitude`,onChange:A=>D(A,1),placeholder:(0,Ld.getTranslation)(f,w),step:x,type:"number",value:R&&typeof R[1]=="number"?R[1]:""}),o))),n!==void 0?n:Gt.default.createElement(ce,{...d||{}}))},bx=oe(aP)});var yx=b(()=>{});var Cx,pa,Nd,vx,_x=b(()=>{"use client";Cx=l("@payloadcms/translations"),pa=F(l("react"),1);Hr();W();yx();Nd="radio-input",vx=e=>{let{isSelected:t,onChange:o,option:r,path:n,readOnly:i,uuid:a}=e,{i18n:s}=M(),d=gt(),c=`field-${n}-${r.value}${d>1?`-${d}`:""}${a?`-${a}`:""}`;return pa.default.createElement("label",{htmlFor:c},pa.default.createElement("div",{className:[Nd,t&&`${Nd}--is-selected`].filter(Boolean).join(" ")},pa.default.createElement("input",{checked:t,disabled:i,id:c,name:n,onChange:()=>typeof o=="function"?o(r.value):null,type:"radio"}),pa.default.createElement("span",{className:`${Nd}__styled-radio`}),pa.default.createElement("span",{className:`${Nd}__label`},(0,Cx.getTranslation)(r.label,s))))}});var wx=b(()=>{});var bm,Yo,Rd,lP,kx,Tx=b(()=>{"use client";bm=l("payload/shared"),Yo=F(l("react"),1);lt();Ye();We();rt();Be();_x();wx();Re();dt();ht();Rd="radio-group",lP=e=>{let{name:t,CustomDescription:o,CustomError:r,CustomLabel:n,className:i,descriptionProps:a,errorProps:s,label:d,labelProps:c,layout:p="horizontal",onChange:u,options:m=[],path:f,readOnly:h,required:g,style:x,validate:y,value:v,width:E}=e,{uuid:w}=Lt(),C=(0,Yo.useCallback)((A,O)=>{if(typeof y=="function")return y(A,{...O,options:m,required:g})},[y,m,g]),{path:S,readOnly:L}=j(),{formInitializing:N,formProcessing:_,path:T,setValue:k,showError:P,value:R}=ae({path:S??f??t,validate:C}),D=h||L||_||N,I=R||v;return Yo.default.createElement("div",{className:[Y,Rd,i,`${Rd}--layout-${p}`,P&&"error",D&&`${Rd}--read-only`].filter(Boolean).join(" "),style:{...x,width:E}},Yo.default.createElement(me,{CustomError:r,path:T,...s||{},alignCaret:"left"}),Yo.default.createElement(se,{CustomLabel:n,label:d,required:g,...c||{}}),Yo.default.createElement("div",{className:`${Y}__wrap`},Yo.default.createElement("ul",{className:`${Rd}--group`,id:`field-${T.replace(/\./g,"__")}`},m.map(A=>{let O="";(0,bm.optionIsObject)(A)?O=A.value:O=A;let B=String(O)===String(I),$=`field-${T}-${O}${w?`-${w}`:""}`;return Yo.default.createElement("li",{key:`${T} - ${O}`},Yo.default.createElement(vx,{id:$,isSelected:B,onChange:()=>{typeof u=="function"&&u(O),D||k(O)},option:(0,bm.optionIsObject)(A)?A:{label:A,value:A},path:T,readOnly:D,uuid:w}))})),o!==void 0?o:Yo.default.createElement(ce,{...a||{}})))},kx=oe(lP)});var Ex=b(()=>{});var xm,ke,Ml,Px,Fx=b(()=>{"use client";xm=l("@payloadcms/translations"),ke=F(l("react"),1);xn();zr();tp();np();Dr();ks();ur();W();Ex();Gs();Ml="relationship-add-new",Px=({hasMany:e,path:t,relationTo:o,setValue:r,value:n})=>{let i=oa(o),{permissions:a}=ut(),[s,d]=(0,ke.useState)(!1),[c,p]=(0,ke.useState)(),u=i.length>1,[m,f]=(0,ke.useState)(()=>u?void 0:i[0]),[h,g]=(0,ke.useState)(!1),{i18n:x,t:y}=M(),[v,E]=(0,ke.useState)(!1),[w,C,{isDrawerOpen:S,toggleDrawer:L}]=Nt({collectionSlug:m?.slug}),N=(0,ke.useCallback)(({doc:T,operation:k})=>{if(k==="create"){let P=Array.isArray(o)?{relationTo:m?.slug,value:T.id}:T.id;(Array.isArray(o)&&Array.isArray(n)?!n.some(D=>D&&typeof D=="object"&&D.value===T.id):n!==T.id)&&r(e?[...Array.isArray(n)?n:[],P]:P),p(void 0)}},[o,m,e,r,n]),_=(0,ke.useCallback)(T=>{g(T)},[]);return(0,ke.useEffect)(()=>{a&&(i.length===1?d(a.collections[i[0]?.slug]?.create?.permission):d(i.some(T=>a.collections[T?.slug]?.create?.permission)))},[a,i]),(0,ke.useEffect)(()=>{u&&c&&f(i.find(T=>T?.slug===c))},[c,u,i]),(0,ke.useEffect)(()=>{u&&m&&(L(),p(void 0))},[L,u,m]),(0,ke.useEffect)(()=>{u&&!S&&f(void 0)},[S,u]),s?ke.default.createElement("div",{className:Ml,id:`${t}-add-new`},i.length===1&&ke.default.createElement(ke.Fragment,null,ke.default.createElement(C,{className:`${Ml}__add-button`,onClick:()=>E(!1),onMouseEnter:()=>E(!0),onMouseLeave:()=>E(!1)},ke.default.createElement(Ut,{className:`${Ml}__tooltip`,show:v},y("fields:addNewLabel",{label:(0,xm.getTranslation)(i[0].labels.singular,x)})),ke.default.createElement(ei,null)),ke.default.createElement(w,{onSave:N})),i.length>1&&ke.default.createElement(ke.Fragment,null,ke.default.createElement(Rs,{button:ke.default.createElement(Ve,{buttonStyle:"none",className:`${Ml}__add-button`,tooltip:h?void 0:y("fields:addNew")},ke.default.createElement(ei,null)),buttonType:"custom",horizontalAlign:"center",onToggleOpen:_,render:({close:T})=>ke.default.createElement(Zc,null,i.map(k=>a.collections[k?.slug].create.permission?ke.default.createElement(ep,{className:`${Ml}__relation-button--${k?.slug}`,key:k?.slug,onClick:()=>{T(),p(k?.slug)}},(0,xm.getTranslation)(k?.labels?.singular,x)):null)),size:"medium"}),m&&a.collections[m?.slug]?.create?.permission&&ke.default.createElement(w,{onSave:N}))):null}});var ym,Sx=b(()=>{ym=({hasMany:e,relationTo:t,value:o})=>{let r=Array.isArray(t),n;if(Array.isArray(t)?n=t.reduce((a,s)=>({...a,[s]:[]}),{}):n={[t]:[]},o===null)return n;let i=(a,s)=>{(typeof s=="string"||typeof s=="number")&&typeof a=="string"&&(n[a]?n[a].push(s):n[a]=[s])};return e&&Array.isArray(o)?o.forEach(a=>{r&&typeof a=="object"&&"relationTo"in a&&"value"in a&&i(a.relationTo,a.value),!r&&typeof t=="string"&&i(t,a)}):r&&Array.isArray(t)?typeof o=="object"&&"relationTo"in o&&"value"in o&&i(o.relationTo,o.value):i(t,o),n}});var Lx,Nx=b(()=>{Lx=({options:e,value:t})=>{if(t||typeof t=="number"){if(Array.isArray(t))return t.map(r=>{let n;return e.forEach(i=>{n||(n=i.options.find(a=>typeof r=="object"?a.value===r.value&&a.relationTo===r.relationTo:r===a.value))}),n});let o;return e.forEach(r=>{o||(o=r.options.find(n=>typeof t=="object"?n.value===t.value&&n.relationTo===t.relationTo:t===n.value))}),o}}});var Rx=b(()=>{});var Mx,Ix,Dx,Ax,Ox=b(()=>{Mx=l("@payloadcms/translations");Cl();Ix=e=>e.reduce((t,o)=>o.options?[...t,...Ix(o.options)]:[...t,{id:o.value,relationTo:o.relationTo}],[]),Dx=e=>e.sort((t,o)=>typeof t?.label?.localeCompare=="function"&&typeof o?.label?.localeCompare=="function"?t.label.localeCompare(o.label):0),Ax=(e,t)=>{switch(t.type){case"CLEAR":return[];case"UPDATE":{let{collection:o,config:r,doc:n,i18n:i}=t,a=o.slug,s=[...e],d=xr({collectionConfig:o,data:n,dateFormat:r.admin.dateFormat,fallback:`${i.t("general:untitled")} - ID: ${n.id}`,i18n:i}),p=s.find(u=>u.label===o.labels.plural)?.options?.find(u=>u.value===n.id);return p&&(p.label=d,p.relationTo=a),s}case"ADD":{let{collection:o,config:r,docs:n,i18n:i,ids:a=[],sort:s}=t,d=o.slug,c=Ix(e),p=[...e],u=p.find(f=>f.label===o.labels.plural),m=n.reduce((f,h)=>{if(c.filter(g=>g.id===h.id&&g.relationTo===d).length===0){c.push({id:h.id,relationTo:d});let g=xr({collectionConfig:o,data:h,dateFormat:r.admin.dateFormat,fallback:`${i.t("general:untitled")} - ID: ${h.id}`,i18n:i});return[...f,{label:g,relationTo:d,value:h.id}]}return f},[]);if(a.forEach(f=>{c.filter(h=>h.id===f&&h.relationTo===d).length===0&&(c.push({id:f,relationTo:d}),m.push({label:`${i.t("general:untitled")} - ID: ${f}`,relationTo:d,value:f}))}),u){let f=[...u.options,...m];u.options=s?Dx(f):f}else p.push({label:(0,Mx.getTranslation)(o.labels.plural,i),options:s?Dx(m):m});return p}default:return e}}});var $x=b(()=>{});var to,Bx,ma,Hx,zx=b(()=>{"use client";to=F(l("react"),1),Bx=l("react-select");zr();Dr();cl();ur();W();$x();ma="relationship--multi-value-label",Hx=e=>{let{data:{label:t,relationTo:o,value:r},selectProps:{customProps:{draggableProps:n,setDrawerIsOpen:i}={}}={}}=e,{permissions:a}=ut(),[s,d]=(0,to.useState)(!1),{t:c}=M(),p=!!a?.collections?.[o]?.read?.permission,[u,m,{isDrawerOpen:f}]=Nt({id:r?.toString(),collectionSlug:o});return(0,to.useEffect)(()=>{typeof i=="function"&&i(f)},[f,i]),to.default.createElement("div",{className:ma},to.default.createElement("div",{className:`${ma}__content`},to.default.createElement(Bx.components.MultiValueLabel,{...e,innerProps:{className:`${ma}__text`,...n||{}}})),o&&p&&to.default.createElement(to.Fragment,null,to.default.createElement(m,{"aria-label":`Edit ${t}`,className:`${ma}__drawer-toggler`,onClick:()=>d(!1),onKeyDown:h=>{h.key==="Enter"&&h.stopPropagation()},onMouseDown:h=>h.stopPropagation(),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTouchEnd:h=>h.stopPropagation()},to.default.createElement(Ut,{className:`${ma}__tooltip`,show:s},c("general:editLabel",{label:""})),to.default.createElement(bn,{className:`${ma}__icon`})),to.default.createElement(u,{onSave:null})))}});var Ux=b(()=>{});var kt,jx,ua,Vx,Gx=b(()=>{"use client";kt=F(l("react"),1),jx=l("react-select");zr();Dr();cl();ur();W();Ux();ua="relationship--single-value",Vx=e=>{let{children:t,data:{label:o,relationTo:r,value:n},selectProps:{customProps:{onSave:i,setDrawerIsOpen:a}={}}={}}=e,[s,d]=(0,kt.useState)(!1),{t:c}=M(),{permissions:p}=ut(),u=!!p?.collections?.[r]?.read?.permission,[m,f,{isDrawerOpen:h}]=Nt({id:n.toString(),collectionSlug:r});return(0,kt.useEffect)(()=>{typeof a=="function"&&a(h)},[h,a]),kt.default.createElement(kt.default.Fragment,null,kt.default.createElement(jx.components.SingleValue,{...e,className:ua},kt.default.createElement("div",{className:`${ua}__label`},kt.default.createElement("div",{className:`${ua}__label-text`},kt.default.createElement("div",{className:`${ua}__text`},t),r&&u&&kt.default.createElement(kt.Fragment,null,kt.default.createElement(f,{"aria-label":c("general:editLabel",{label:o}),className:`${ua}__drawer-toggler`,onClick:()=>d(!1),onKeyDown:g=>{g.key==="Enter"&&g.stopPropagation()},onMouseDown:g=>g.stopPropagation(),onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onTouchEnd:g=>g.stopPropagation()},kt.default.createElement(Ut,{className:`${ua}__tooltip`,show:s},c("general:edit")),kt.default.createElement(bn,null))))),r&&u&&kt.default.createElement(m,{onSave:i})))}});var Wx,Il,ye,sP,Dd,dP,Kx,qx=b(()=>{"use client";Wx=l("payload/shared"),Il=F(l("qs-esm"),1),ye=F(l("react"),1);ca();Re();Ye();We();uf();ur();et();fr();W();dt();ht();rt();Be();Fx();Sx();Nx();Rx();Ox();zx();Gx();sP=10,Dd="relationship",dP=e=>{let{name:t,CustomDescription:o,CustomError:r,CustomLabel:n,allowCreate:i=!0,className:a,descriptionProps:s,errorProps:d,hasMany:c,isSortable:p=!0,label:u,labelProps:m,path:f,readOnly:h,relationTo:g,required:x,sortOptions:y,style:v,validate:E,width:w}=e,C=J(),{collections:S,routes:{api:L},serverURL:N}=C,{i18n:_,t:T}=M(),{permissions:k}=ut(),{code:P}=vt(),R=Array.isArray(g),[D,I]=(0,ye.useReducer)(Ax,[]),[A,O]=(0,ye.useState)(-1),[B,$]=(0,ye.useState)({}),[H,te]=(0,ye.useState)(""),[ne,pe]=(0,ye.useState)(""),[Te,G]=(0,ye.useState)(!1),[K,Q]=(0,ye.useState)(!1),he=(0,ye.useRef)(!1),Qe=(0,ye.useRef)(!1),V=(0,ye.useCallback)((U,ie)=>{if(typeof E=="function")return E(U,{...ie,required:x})},[E,x]),{path:Qt,readOnly:Z}=j(),{filterOptions:de,formInitializing:go,formProcessing:Jt,initialValue:Je,path:De,setValue:Yt,showError:yt,value:Ue}=ae({path:Qt??f??t,validate:V}),Bt=h||Z||go,St=(0,ye.useRef)(Ue);St.current=Ue;let[Ct,z]=(0,ye.useState)(!1),xe=(0,ye.useCallback)(async({lastFullyLoadedRelation:U,lastLoadedPage:ie,onSuccess:Ee,search:ve,sort:Se,value:Le})=>{if(!k)return;let Ne=typeof U<"u"?U:-1,Ht=Array.isArray(g)?g:[g],pr=Ne===-1?Ht:Ht.slice(Ne+1),Vi=0,Gi=ym({hasMany:c,relationTo:g,value:Le});H||(await pr.reduce(async(Fe,mt)=>{let Wo=de?.[mt],fn;if(ne!==ve?fn=1:fn=ie[mt]+1,await Fe,Wo===!1)return O(Ht.indexOf(mt)),Promise.resolve();if(Vi<10){let ho=S.find(gn=>gn.slug===mt),jc=ho?.admin?.useAsTitle||"id",al=ho?.defaultSort||"id";typeof y=="string"?al=y:y?.[mt]&&(al=y[mt]);let Wi={depth:0,draft:!0,limit:sP,locale:P,page:fn,sort:al,where:{and:[{id:{not_in:Gi[mt]}}]}};ve&&Wi.where.and.push({[jc]:{like:ve}}),Wo&&typeof Wo!="boolean"&&Wi.where.and.push(Wo);let Nr;if(Object.keys(Gi).length>100?Nr=await fetch(`${N}${L}/${mt}`,{body:Il.stringify(Wi),credentials:"include",headers:{"Accept-Language":_.language,"Content-Type":"application/x-www-form-urlencoded","X-HTTP-Method-Override":"GET"},method:"POST"}):Nr=await fetch(`${N}${L}/${mt}?${Il.stringify(Wi)}`,{credentials:"include",headers:{"Accept-Language":_.language}}),Nr.ok){let gn=await Nr.json();$(Ki=>({...Ki,[mt]:fn})),gn.nextPage||O(Ht.indexOf(mt)),gn.docs.length>0&&(Vi+=gn.docs.length,I({type:"ADD",collection:ho,config:C,docs:gn.docs,i18n:_,sort:Se}))}else Nr.status===403?(O(Ht.indexOf(mt)),I({type:"ADD",collection:ho,config:C,docs:[],i18n:_,ids:Gi[mt],sort:Se})):te(T("error:unspecific"))}},Promise.resolve()),typeof Ee=="function"&&Ee())},[k,g,c,H,ne,S,P,de,N,y,L,_,C,T]),cr=mf((U,ie)=>{xe({lastLoadedPage:{},search:U,sort:!0,value:ie}),pe(U)},300),ge=(0,ye.useCallback)((U,ie)=>{ne!==U&&($({}),cr(U,ie,U!==""))},[ne,cr]);(0,ye.useEffect)(()=>{let U=ym({hasMany:c,relationTo:g,value:Ue});Object.entries(U).reduce(async(ie,[Ee,ve])=>{await ie;let Se=ve.filter(Le=>!D.find(Ne=>Ne?.options?.find(Ht=>Ht.value===Le&&Ht.relationTo===Ee)));if(Se.length>0){let Le={depth:0,draft:!0,limit:Se.length,locale:P,where:{id:{in:Se}}};if(!H){let Ne;Object.keys(U).length>100?Ne=await fetch(`${N}${L}/${Ee}`,{body:Il.stringify(Le),credentials:"include",headers:{"Accept-Language":_.language,"Content-Type":"application/x-www-form-urlencoded","X-HTTP-Method-Override":"GET"},method:"POST"}):Ne=await fetch(`${N}${L}/${Ee}?${Il.stringify(Le)}`,{credentials:"include",headers:{"Accept-Language":_.language}});let Ht=S.find(Vi=>Vi.slug===Ee),pr=[];Ne.ok&&(pr=(await Ne.json()).docs),I({type:"ADD",collection:Ht,config:C,docs:pr,i18n:_,ids:Se,sort:!0})}}},Promise.resolve())},[D,Ue,c,H,S,R,N,L,_,g,P,C]),(0,ye.useEffect)(()=>{let ie=(Array.isArray(g)?g:[g]).reduce((Ee,ve)=>(S.find(Ne=>Ne.slug===ve)?.admin?.useAsTitle||"id")==="id"&&Ee,!0);Q(!ie)},[g,S]),(0,ye.useEffect)(()=>{Qe.current&&he.current&&(G(!0),xe({lastLoadedPage:{},onSuccess:()=>{Qe.current=!0,G(!1)},value:St.current})),I({type:"CLEAR"}),O(-1),$({}),Qe.current=!1},[g,de,P,he,xe,St,Qe,De]);let je=(0,ye.useCallback)(U=>{I({type:"UPDATE",collection:U.collectionConfig,config:C,doc:U.doc,i18n:_})},[_,C]),Me=(0,ye.useCallback)((U,ie)=>{if(!ie)return!0;let Ee=(0,Wx.wordBoundariesRegex)(ie||""),ve=250,Se=U.label;for(;Se.length>ve;){let Le=Se.indexOf(" ",ie.length);if(Ee.test(Se.slice(0,Le===-1?ie.length:Le+1)))return!0;Se=Se.slice(Le===-1?ie.length:Le+1)}return Ee.test(Se.slice(-ve))},[]),q=Lx({options:D,value:Ue});return!Array.isArray(q)&&q?.value==="null"&&(q.value=null),ye.default.createElement("div",{className:[Y,Dd,a,yt&&"error",H&&"error-loading",Bt&&`${Dd}--read-only`].filter(Boolean).join(" "),id:`field-${De.replace(/\./g,"__")}`,style:{...v,width:w}},ye.default.createElement(se,{CustomLabel:n,label:u,required:x,...m||{}}),ye.default.createElement("div",{className:`${Y}__wrap`},ye.default.createElement(me,{CustomError:r,path:De,...d||{}}),!H&&ye.default.createElement("div",{className:`${Dd}__wrap`},ye.default.createElement(wr,{backspaceRemovesValue:!Ct,components:{MultiValueLabel:Hx,SingleValue:Vx},customProps:{disableKeyDown:Ct,disableMouseDown:Ct,onSave:je,setDrawerIsOpen:z},disabled:Bt||Jt||Ct,filterOption:K?Me:void 0,getOptionValue:U=>{if(U)return c&&Array.isArray(g)?`${U.relationTo}_${U.value}`:U.value},isLoading:Te,isMulti:c,isSortable:p,onChange:Bt?void 0:U=>{U===null?Yt(c?[]:null):c&&Array.isArray(U)?Yt(U?U.map(ie=>R?{relationTo:ie.relationTo,value:ie.value}:ie.value):null):R&&!Array.isArray(U)?Yt({relationTo:U.relationTo,value:U.value}):Array.isArray(U)||Yt(U.value)},onInputChange:U=>ge(U,Ue),onMenuClose:()=>{he.current=!1},onMenuOpen:()=>{he.current=!0,Qe.current||(G(!0),xe({lastLoadedPage:{},onSuccess:()=>{Qe.current=!0,G(!1)},value:Je}))},onMenuScrollToBottom:()=>{xe({lastFullyLoadedRelation:A,lastLoadedPage:B,search:ne,sort:!1,value:Je})},options:D,showError:yt,value:q??null}),!Bt&&i&&ye.default.createElement(Px,{dispatchOptions:I,hasMany:c,options:D,path:De,relationTo:g,setValue:Yt,value:Ue})),H&&ye.default.createElement("div",{className:`${Dd}__error-loading`},H),o!==void 0?o:ye.default.createElement(ce,{...s||{}})))},Kx=oe(dP)});var Qx,Jx=b(()=>{Qx=()=>null});var Yx=b(()=>{});var Md,Xx,cP,Zx,e0=b(()=>{"use client";Md=F(l("react"),1);Re();Nn();We();Be();Yx();Zp();Xx="row",cP=e=>{let{className:t,fieldMap:o,forceRender:r=!1}=e,{indexPath:n,path:i,readOnly:a,schemaPath:s,siblingPermissions:d}=j();return Md.default.createElement(hb,null,Md.default.createElement("div",{className:[Y,Xx,t].filter(Boolean).join(" ")},Md.default.createElement(Dt,{fieldMap:o,forceRender:r,path:i,readOnly:a,schemaPath:s,className:`${Xx}__fields`,fieldMap:o,forceRender:r,indexPath:n,margins:!1,permissions:d})))},Zx=oe(cP)});var t0=b(()=>{});var Id,bi,o0,r0=b(()=>{"use client";Id=l("@payloadcms/translations"),bi=F(l("react"),1);ca();W();dt();ht();rt();Be();t0();o0=e=>{let{AfterInput:t,BeforeInput:o,CustomDescription:r,CustomError:n,CustomLabel:i,className:a,descriptionProps:s,errorProps:d,hasMany:c=!1,isClearable:p=!0,isSortable:u=!0,label:m,labelProps:f,onChange:h,options:g,path:x,readOnly:y,required:v,showError:E,style:w,value:C,width:S}=e,{i18n:L}=M(),N;if(c&&Array.isArray(C))N=C.map(_=>{let T=g.find(k=>k.value===_);return{label:T?(0,Id.getTranslation)(T.label,L):_,value:T?.value??_}});else if(C){let _=g.find(T=>T.value===C);N={label:_?(0,Id.getTranslation)(_.label,L):C,value:_?.value??C}}return bi.default.createElement("div",{className:[Y,"select",a,E&&"error",y&&"read-only"].filter(Boolean).join(" "),id:`field-${x.replace(/\./g,"__")}`,style:{...w,width:S}},bi.default.createElement(se,{CustomLabel:i,label:m,required:v,...f||{}}),bi.default.createElement("div",{className:`${Y}__wrap`},bi.default.createElement(me,{CustomError:n,path:x,...d||{}}),o,bi.default.createElement(wr,{disabled:y,isClearable:p,isMulti:c,isSortable:u,onChange:h,options:g.map(_=>({..._,label:(0,Id.getTranslation)(_.label,L)})),showError:E,value:N}),t),r!==void 0?r:bi.default.createElement(ce,{...s||{}}))}});var fa,pP,mP,n0,i0=b(()=>{"use client";fa=F(l("react"),1);Re();Ye();We();r0();pP=e=>e.map(t=>typeof t=="object"&&(t.value||t.value==="")?t:{label:t,value:t}),mP=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,hasMany:p=!1,isClearable:u=!0,isSortable:m=!0,label:f,labelProps:h,onChange:g,options:x=[],path:y,readOnly:v,required:E,style:w,validate:C,width:S}=e,L=fa.default.useMemo(()=>pP(x),[x]),N=(0,fa.useCallback)(($,H)=>{if(typeof C=="function")return C($,{...H,hasMany:p,options:L,required:E})},[C,E,p,L]),{path:_,readOnly:T}=j(),{formInitializing:k,formProcessing:P,path:R,setValue:D,showError:I,value:A}=ae({path:_??y??t,validate:N}),O=v||T||P||k,B=(0,fa.useCallback)($=>{if(!O){let H=null;$&&p?Array.isArray($)?H=$.map(te=>te.value):H=[]:$&&!Array.isArray($)&&(H=$.value),typeof g=="function"&&g(H),D(H)}},[O,p,D,g]);return fa.default.createElement(o0,{AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,hasMany:p,isClearable:u,isSortable:m,label:f,labelProps:h,name:t,onChange:B,options:L,path:R,readOnly:O,required:E,showError:I,style:w,value:A,width:S})},n0=oe(mP)});var a0=b(()=>{});var l0,$n,Cm,s0,d0=b(()=>{"use client";l0=l("@payloadcms/translations"),$n=F(l("react"),1);Ur();Yp();W();a0();Cm="tabs-field__tab-button",s0=({isActive:e,parentPath:t,setIsActive:o,tab:r})=>{let{name:n,label:i}=r,{i18n:a}=M(),[s,d]=(0,$n.useState)(void 0),c="name"in r,p=`${t?`${t}.`:""}${"name"in r?n:""}`,u=s>0;return $n.default.createElement($n.default.Fragment,null,$n.default.createElement(Td,{fieldMap:r.fieldMap,path:p,setErrorCount:d}),$n.default.createElement("button",{className:[Cm,u&&`${Cm}--has-error`,e&&`${Cm}--active`].filter(Boolean).join(" "),onClick:o,type:"button"},i?(0,l0.getTranslation)(i,a):c&&n,u&&$n.default.createElement(Rt,{count:s,i18n:a})))}});var c0=b(()=>{});var vm,p0,Tt,xi,uP,m0,u0=b(()=>{"use client";vm=l("@payloadcms/translations"),p0=l("payload/shared"),Tt=F(l("react"),1);Ds();Re();Nn();We();yr();oi();W();dt();Be();d0();c0();em();xi="tabs-field",uP=e=>{let{name:t,CustomDescription:o,className:r,descriptionProps:n,forceRender:i=!1,path:a,readOnly:s,tabs:d=[]}=e,{indexPath:c,path:p,readOnly:u,schemaPath:m,siblingPermissions:f}=j(),h=s||u,g=p??a??t,{getPreference:x,setPreference:y}=So(),{preferencesKey:v}=Ge(),{i18n:E}=M(),{isWithinCollapsible:w}=ai(),[C,S]=(0,Tt.useState)(0),L=`tabs-${c}`;(0,Tt.useEffect)(()=>{v&&(async()=>{let P=await x(v),R=g?P?.fields?.[g]?.tabIndex:P?.fields?.[L]?.tabIndex;S(R||0)})()},[g,x,v,L]);let N=(0,Tt.useCallback)(async k=>{S(k);let P=await x(v);v&&y(v,{...P,...g?{fields:{...P?.fields||{},[g]:{...P?.fields?.[g],tabIndex:k}}}:{fields:{...P?.fields,[L]:{...P?.fields?.[L],tabIndex:k}}}})},[v,x,y,g,L]),_=d[C];function T(){let k=g;return g&&_.name?k=`${g}.${_.name}`:!g&&_.name&&(k=_.name),k}return Tt.default.createElement("div",{className:[Y,r,xi,w&&`${xi}--within-collapsible`].filter(Boolean).join(" ")},Tt.default.createElement(xb,null,Tt.default.createElement("div",{className:`${xi}__tabs-wrap`},Tt.default.createElement("div",{className:`${xi}__tabs`},d.map((k,P)=>Tt.default.createElement(s0,{isActive:C===P,key:P,parentPath:g,setIsActive:()=>N(P),tab:k})))),Tt.default.createElement("div",{className:`${xi}__content-wrap`},_&&Tt.default.createElement(Tt.default.Fragment,null,Tt.default.createElement("div",{className:[`${xi}__tab`,_.label&&`${xi}__tabConfigLabel-${(0,p0.toKebabCase)((0,vm.getTranslation)(_.label,E))}`].filter(Boolean).join(" ")},o||Tt.default.createElement(ce,{...n||{}}),Tt.default.createElement(Dt,{fieldMap:_.fieldMap,forceRender:i,key:_.label?(0,vm.getTranslation)(_.label,E):_.name,margins:"small",path:T(),permissions:"name"in _&&f?.[_.name]?.fields?f[_.name]?.fields:f,readOnly:h,schemaPath:`${m?`${m}`:""}${_.name?`.${_.name}`:""}`}))))))},m0=oe(uP)});var _m=b(()=>{});var f0,Wr,g0,h0=b(()=>{"use client";f0=l("@payloadcms/translations"),Wr=F(l("react"),1);ca();W();dt();ht();rt();Be();_m();g0=e=>{let{AfterInput:t,BeforeInput:o,CustomDescription:r,CustomError:n,CustomLabel:i,className:a,descriptionProps:s,errorProps:d,hasMany:c,inputRef:p,label:u,labelProps:m,maxRows:f,onChange:h,onKeyDown:g,path:x,placeholder:y,readOnly:v,required:E,rtl:w,showError:C,style:S,value:L,valueToRender:N,width:_}=e,{i18n:T,t:k}=M();return Wr.default.createElement("div",{className:[Y,"text",a,C&&"error",v&&"read-only",c&&"has-many"].filter(Boolean).join(" "),style:{...S,width:_}},Wr.default.createElement(se,{CustomLabel:i,label:u,required:E,...m||{}}),Wr.default.createElement("div",{className:`${Y}__wrap`},Wr.default.createElement(me,{CustomError:n,path:x,...d||{}}),c?Wr.default.createElement(wr,{className:`field-${x.replace(/\./g,"__")}`,disabled:v,filterOption:()=>f?!(Array.isArray(L)&&f&&L.length>=f):!0,isClearable:!0,isCreatable:!0,isMulti:!0,isSortable:!0,noOptionsMessage:()=>Array.isArray(L)&&L.length>=f?k("validation:limitReached",{max:f,value:L.length+1}):null,onChange:h,options:[],placeholder:k("general:enterAValue"),showError:C,value:N}):Wr.default.createElement("div",null,o,Wr.default.createElement("input",{"data-rtl":w,disabled:v,id:`field-${x?.replace(/\./g,"__")}`,name:x,onChange:h,onKeyDown:g,placeholder:(0,f0.getTranslation)(y,T),ref:p,type:"text",value:L||""}),t),r!==void 0?r:Wr.default.createElement(ce,{...s||{}})))}});var Kr,fP,b0,x0=b(()=>{"use client";Kr=F(l("react"),1);Re();Ye();We();et();fr();Be();h0();_m();fP=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,hasMany:p,inputRef:u,label:m,labelProps:f,localized:h,maxLength:g,maxRows:x,minLength:y,minRows:v,path:E,placeholder:w,readOnly:C,required:S,rtl:L,style:N,validate:_,width:T}=e,k=vt(),{localization:P}=J(),R=(0,Kr.useCallback)((Q,he)=>{if(typeof _=="function")return _(Q,{...he,maxLength:g,minLength:y,required:S})},[_,y,g,S]),{path:D,readOnly:I}=j(),{formInitializing:A,formProcessing:O,path:B,setValue:$,showError:H,value:te}=ae({path:D??E??t,validate:R}),ne=C||I||O||A,pe=ld({fieldLocalized:h,fieldRTL:L,locale:k,localizationConfig:P||void 0}),[Te,G]=(0,Kr.useState)([]),K=(0,Kr.useCallback)(Q=>{if(!ne){let he;Q?Array.isArray(Q)?he=Q.map(Qe=>Qe.value?.value||Qe.value):he=[Q.value?.value||Q.value]:he=[],$(he)}},[ne,$]);return(0,Kr.useEffect)(()=>{p&&Array.isArray(te)&&G(te.map((Q,he)=>({id:`${Q}${he}`,label:`${Q}`,value:{toString:()=>`${Q}${he}`,value:Q?.value||Q}})))},[te,p]),Kr.default.createElement(g0,{AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,hasMany:p,inputRef:u,label:m,labelProps:f,maxRows:x,minRows:v,onChange:p?K:Q=>{$(Q.target.value)},path:B,placeholder:w,readOnly:ne,required:S,rtl:pe,showError:H,style:N,value:te||"",valueToRender:Te,width:T})},b0=oe(fP)});var wm=b(()=>{});var y0,kr,C0,v0=b(()=>{"use client";y0=l("@payloadcms/translations"),kr=F(l("react"),1);W();dt();ht();rt();Be();wm();C0=e=>{let{AfterInput:t,BeforeInput:o,CustomDescription:r,CustomError:n,CustomLabel:i,className:a,descriptionProps:s,errorProps:d,label:c,labelProps:p,onChange:u,path:m,placeholder:f,readOnly:h,required:g,rows:x,rtl:y,showError:v,style:E,value:w,width:C}=e,{i18n:S}=M();return kr.default.createElement("div",{className:[Y,"textarea",a,v&&"error",h&&"read-only"].filter(Boolean).join(" "),style:{...E,width:C}},kr.default.createElement(se,{CustomLabel:i,label:c,required:g,...p||{}}),kr.default.createElement("div",{className:`${Y}__wrap`},kr.default.createElement(me,{CustomError:n,path:m,...d||{}}),o,kr.default.createElement("label",{className:"textarea-outer",htmlFor:`field-${m.replace(/\./g,"__")}`},kr.default.createElement("div",{className:"textarea-inner"},kr.default.createElement("div",{className:"textarea-clone","data-value":w||f||""}),kr.default.createElement("textarea",{className:"textarea-element","data-rtl":y,disabled:h,id:`field-${m.replace(/\./g,"__")}`,name:m,onChange:u,placeholder:(0,y0.getTranslation)(f,S),rows:x,value:w||""}))),t,r!==void 0?r:kr.default.createElement(ce,{...s||{}})))}});var _0,Ad,gP,w0,k0=b(()=>{"use client";_0=l("@payloadcms/translations"),Ad=F(l("react"),1);Re();Ye();We();et();W();Be();v0();wm();gP=e=>{let{name:t,AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,label:p,labelProps:u,locale:m,localized:f,maxLength:h,minLength:g,path:x,placeholder:y,readOnly:v,required:E,rows:w,rtl:C,style:S,validate:L,width:N}=e,{i18n:_}=M(),{localization:T}=J(),k=ld({fieldLocalized:f,fieldRTL:C,locale:m,localizationConfig:T||void 0}),P=(0,Ad.useCallback)((ne,pe)=>{if(typeof L=="function")return L(ne,{...pe,maxLength:h,minLength:g,required:E})},[L,E,h,g]),{path:R,readOnly:D}=j(),{formInitializing:I,formProcessing:A,path:O,setValue:B,showError:$,value:H}=ae({path:R??x??t,validate:P}),te=v||D||A||I;return Ad.default.createElement(C0,{AfterInput:o,BeforeInput:r,CustomDescription:n,CustomError:i,CustomLabel:a,className:s,descriptionProps:d,errorProps:c,label:p,labelProps:u,onChange:ne=>{B(ne.target.value)},path:O,placeholder:(0,_0.getTranslation)(y,_),readOnly:te,required:E,rows:w,rtl:k,showError:$,style:S,value:H,width:N})},w0=oe(gP)});var T0,E0=b(()=>{T0=()=>null});var P0=b(()=>{});var F0,Wt,Od,S0,L0=b(()=>{"use client";F0=l("payload/shared"),Wt=F(l("react"),1);cl();sg();zr();Dr();P0();Od="file-meta",S0=e=>{let{id:t,collection:o,filename:r,filesize:n,height:i,mimeType:a,url:s,width:d}=e,[c,p]=(0,Wt.useState)(!1),u=!!(t&&o),[m,f]=Nt({id:t,collectionSlug:o});return Wt.default.createElement("div",{className:Od},Wt.default.createElement("div",{className:`${Od}__url`},u&&Wt.default.createElement(m,null),Wt.default.createElement("a",{href:s,rel:"noopener noreferrer",target:"_blank"},r),Wt.default.createElement(lg,{defaultMessage:"Copy URL",value:s}),u&&Wt.default.createElement(f,{className:`${Od}__edit`,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1)},Wt.default.createElement(bn,null),Wt.default.createElement(Ut,{show:c},"Edit"))),Wt.default.createElement("div",{className:`${Od}__size-type`},(0,F0.formatFilesize)(n),d&&i&&Wt.default.createElement(Wt.default.Fragment,null,"\xA0-\xA0",d,"x",i),a&&Wt.default.createElement(Wt.default.Fragment,null,"\xA0-\xA0",a)))}});var N0=b(()=>{});var Al,Ol,km=b(()=>{Al=F(l("react"),1),Ol=()=>Al.default.createElement("svg",{height:"150",viewBox:"0 0 150 150",width:"150",xmlns:"http://www.w3.org/2000/svg"},Al.default.createElement("rect",{fill:"#333333",height:"150",transform:"translate(0 0.5)",width:"150"}),Al.default.createElement("path",{d:"M82.8876 50.5H55.5555V100.5H94.4444V61.9818H82.8876V50.5Z",fill:"white"}),Al.default.createElement("path",{d:"M82.8876 61.9818H94.4444L82.8876 50.5V61.9818Z",fill:"#9A9A9A"}))});var Bn,R0,n9,$d,Tm=b(()=>{"use client";Bn=F(l("react"),1);N0();km();hi();R0="thumbnail",n9=Bn.default.createContext({className:"",filename:"",size:"medium",src:""}),$d=e=>{let{className:t="",doc:{filename:o}={},fileSrc:r,imageCacheTag:n,size:i}=e,[a,s]=Bn.default.useState(void 0),d=[R0,`${R0}--size-${i||"medium"}`,t].join(" ");return Bn.default.useEffect(()=>{if(!r){s(!1);return}let c=new Image;c.src=r,c.onload=()=>{s(!0)},c.onerror=()=>{s(!1)}},[r]),Bn.default.createElement("div",{className:d},a===void 0&&Bn.default.createElement(eo,{height:"100%"}),a&&Bn.default.createElement("img",{alt:o,src:`${r}${n?`?${n}`:""}`}),a===!1&&Bn.default.createElement(Ol,null))}});var D0=b(()=>{});var Pm,Do,hP,Em,bP,xP,M0,I0=b(()=>{"use client";Pm=l("payload/shared"),Do=F(l("react"),1),hP=l("sonner");W();kn();D0();Em="file-field",bP="edit-upload",xP="preview-sizes",M0=({customActions:e,enableAdjustments:t,enablePreviewSizes:o,mimeType:r})=>{let{t:n}=M(),i=(0,Pm.isImage)(r)&&r!=="image/svg+xml";return!i&&(!e||e.length===0)?null:Do.default.createElement("div",{className:`${Em}__upload-actions`},i&&Do.default.createElement(Do.default.Fragment,null,o&&Do.default.createElement(No,{className:`${Em}__previewSizes`,slug:xP},n("upload:previewSizes")),t&&Do.default.createElement(No,{className:`${Em}__edit`,slug:bP},n("upload:editImage"))),e&&e.map((a,s)=>Do.default.createElement(Do.default.Fragment,{key:s},a)))}});var A0=b(()=>{});var Hn,Fm,O0,$0=b(()=>{"use client";Hn=F(l("react"),1);I0();xn();Tm();L0();A0();Fm="file-details",O0=e=>{let{collectionSlug:t,customUploadActions:o,doc:r,enableAdjustments:n,handleRemove:i,hasImageSizes:a,imageCacheTag:s,uploadConfig:d}=e,{id:c,filename:p,filesize:u,height:m,mimeType:f,thumbnailURL:h,url:g,width:x}=r;return Hn.default.createElement("div",{className:Fm},Hn.default.createElement("header",null,Hn.default.createElement($d,{collectionSlug:t,doc:r,fileSrc:h||g,imageCacheTag:s,uploadConfig:d}),Hn.default.createElement("div",{className:`${Fm}__main-detail`},Hn.default.createElement(S0,{collection:t,filename:p,filesize:u,height:m,id:c,mimeType:f,url:g,width:x}),Hn.default.createElement(M0,{customActions:o,enableAdjustments:n,enablePreviewSizes:a&&r.filename,mimeType:f})),i&&Hn.default.createElement(Ve,{buttonStyle:"icon-label",className:`${Fm}__remove`,icon:"x",iconStyle:"with-border",onClick:i,round:!0})))}});var B0=b(()=>{});var $l,yP,H0,z0=b(()=>{"use client";$l=F(l("react"),1),yP=(0,$l.createContext)({}),H0=({children:e,...t})=>$l.default.createElement(yP.Provider,{value:t},e)});var U0,j0,Sm,co,V0,G0,W0,Lm=b(()=>{"use client";U0=l("next/navigation.js"),j0=l("payload/shared"),Sm=F(l("qs-esm"),1),co=F(l("react"),1);oi();Jc();V0=(0,co.createContext)({}),G0=()=>(0,co.useContext)(V0),W0=({children:e,data:t,defaultLimit:o,defaultSort:r,handlePageChange:n,handlePerPageChange:i,handleSearchChange:a,handleSortChange:s,handleWhereChange:d,modifySearchParams:c,preferenceKey:p})=>{let u=(0,U0.useRouter)(),{setPreference:m}=So(),f=co.default.useRef(!1),{searchParams:h}=Ps(),g=co.default.useCallback(async C=>{if(!c)return;let S={},L=!1;"limit"in C&&(S.limit=C.limit,L=!0),"sort"in C&&(S.sort=C.sort,L=!0),L&&p&&await m(p,S);let N={limit:"limit"in C?C.limit:h?.limit,page:"page"in C?C.page:h?.page,search:"search"in C?C.search:h?.search,sort:"sort"in C?C.sort:h?.sort,where:"where"in C?C.where:h?.where};u.replace(`${Sm.stringify(N,{addQueryPrefix:!0})}`)},[p,c,u,m,h]),x=co.default.useCallback(async C=>{typeof n=="function"&&n(C),await g({page:String(C)})},[g,n]),y=co.default.useCallback(async C=>{typeof i=="function"&&i(C),await g({limit:String(C)})},[g,i]),v=co.default.useCallback(async C=>{typeof a=="function"&&a(C),await g({search:C})},[g,a]),E=co.default.useCallback(async C=>{typeof s=="function"&&s(C),await g({sort:C})},[g,s]),w=co.default.useCallback(async C=>{typeof d=="function"&&d(C),await g({where:C})},[g,d]);return co.default.useEffect(()=>{if(!f.current){if(c){let C=!1;(0,j0.isNumber)(o)&&!("limit"in h)&&(h.limit=String(o),C=!0),r&&!("sort"in h)&&(h.sort=r,C=!0),C&&u.replace(`?${Sm.stringify(h)}`)}f.current=!0}},[r,o,u,c,h]),co.default.createElement(V0.Provider,{value:{data:t,handlePageChange:x,handlePerPageChange:y,handleSearchChange:v,handleSortChange:E,handleWhereChange:w,refineListData:g}},e)}});var K0=b(()=>{});var CP,qr,Xo,q0,Q0=b(()=>{"use client";CP=l("@payloadcms/translations"),qr=F(l("react"),1);W();K0();Xo="loading-overlay",q0=({animationDuration:e,loadingText:t,overlayType:o,show:r=!0})=>{let{t:n}=M();return qr.default.createElement("div",{className:[Xo,r?`${Xo}--entering`:`${Xo}--exiting`,o?`${Xo}--${o}`:""].filter(Boolean).join(" "),style:{animationDuration:e||"500ms"}},qr.default.createElement("div",{className:`${Xo}__bars`},qr.default.createElement("div",{className:`${Xo}__bar`}),qr.default.createElement("div",{className:`${Xo}__bar`}),qr.default.createElement("div",{className:`${Xo}__bar`}),qr.default.createElement("div",{className:`${Xo}__bar`}),qr.default.createElement("div",{className:`${Xo}__bar`})),qr.default.createElement("span",{className:`${Xo}__text`},t||n("general:loading")))}});var J0=b(()=>{});var X0,Y0,Z0,ey=b(()=>{"use client";X0=F(l("react"),1);cd();lp();W();J0();Y0="select-all",Z0=()=>{let{selectAll:e,toggleAll:t}=As(),{i18n:o}=M();return X0.default.createElement(na,{"aria-label":e==="none"?o.t("general:selectAllRows"):o.t("general:deselectAllRows"),checked:e==="allInPage"||e==="allAvailable",className:[Y0,`${Y0}__checkbox`].join(" "),id:"select-all",name:"select-all",onToggle:()=>t(),partialChecked:e==="some"})}});var Nm,vP,Qr,Bd=b(()=>{"use client";Nm=F(l("react"),1),vP=Nm.default.createContext({}),Qr=()=>Nm.default.useContext(vP)});var ty=b(()=>{});var ry,oy,ny,iy=b(()=>{"use client";ry=F(l("react"),1);Bd();cd();lp();ty();oy="select-row",ny=()=>{let{selected:e,setSelection:t}=As(),{rowData:o}=Qr();return ry.default.createElement(na,{checked:e?.[o?.id],className:[oy,`${oy}__checkbox`].join(" "),onToggle:()=>t(o.id)})}});var ay=b(()=>{});var Tr,Jr,ly,sy=b(()=>{"use client";Tr=F(l("react"),1);qi();Lm();Jc();W();ay();Jr="sort-column",ly=e=>{let{name:t,Label:o,disable:r=!1,label:n}=e,{searchParams:i}=Ps(),{refineListData:a}=G0(),{t:s}=M(),{sort:d}=i,c=`-${t}`,p=t,u=[`${Jr}__asc`];d===p&&u.push(`${Jr}--active`);let m=[`${Jr}__desc`];d===c&&m.push(`${Jr}--active`);let f=(0,Tr.useCallback)(h=>{a({sort:h})},[a]);return Tr.default.createElement("div",{className:Jr},Tr.default.createElement("span",{className:`${Jr}__label`},o),!r&&Tr.default.createElement("div",{className:`${Jr}__buttons`},Tr.default.createElement("button",{"aria-label":s("general:sortByLabelDirection",{direction:s("general:ascending"),label:n}),className:[...u,`${Jr}__button`].filter(Boolean).join(" "),onClick:()=>f(p),type:"button"},Tr.default.createElement(bo,{direction:"up"})),Tr.default.createElement("button",{"aria-label":s("general:sortByLabelDirection",{direction:s("general:descending"),label:n}),className:[...m,`${Jr}__button`].filter(Boolean).join(" "),onClick:()=>f(c),type:"button"},Tr.default.createElement(bo,null))))}});var dy=b(()=>{});var Rm,Hd,Dm=b(()=>{"use client";Rm=F(l("react"),1);dy();Hd=({cellData:e,nowrap:t})=>{let o=e.length>100?`${e.substring(0,100)}\u2026`:e;return Rm.default.createElement("code",{className:"code-cell",style:t?{whiteSpace:"nowrap"}:{}},Rm.default.createElement("span",null,o))}});var cy,py,my,uy=b(()=>{"use client";cy=l("@payloadcms/translations"),py=F(l("react"),1);W();my=({cellData:e,labels:t})=>{let{i18n:o}=M(),n=`${(e??[]).length} ${(0,cy.getTranslation)(t?.plural||o.t("general:rows"),o)}`;return py.default.createElement("span",null,n)}});var Bl,fy,gy,hy=b(()=>{"use client";Bl=l("@payloadcms/translations"),fy=F(l("react"),1);W();gy=({blocks:e,cellData:t,labels:o})=>{let{i18n:r}=M(),n=Array.isArray(t)?t.map(({blockType:c})=>c):[],i=e?.map(c=>({slug:c.slug,label:(0,Bl.getTranslation)(c.labels.singular,r)})),a=`0 ${(0,Bl.getTranslation)(o?.plural,r)}`,s=c=>c.map(p=>i.filter(m=>m.slug===p)?.[0]?.label).join(", "),d=5;if(n.length>d){let c=n.length-d;a=`${n.length} ${(0,Bl.getTranslation)(o?.plural,r)} - ${r.t("fields:itemsAndMore",{count:c,items:s(n.slice(0,d))})}`}else n.length>0&&(a=`${n.length} ${(0,Bl.getTranslation)(n.length===1?o?.singular:o?.plural,r)} - ${s(n)}`);return fy.default.createElement("span",null,a)}});var by=b(()=>{});var Mm,xy,yy=b(()=>{"use client";Mm=F(l("react"),1);W();by();xy=({cellData:e})=>{let{t}=M();return Mm.default.createElement("code",{className:"bool-cell"},Mm.default.createElement("span",null,t(`general:${e}`).toLowerCase()))}});var Cy,vy,_y=b(()=>{"use client";Cy=F(l("react"),1);et();W();dp();vy=({cellData:e,dateDisplayFormat:t})=>{let{admin:{dateFormat:o}}=J(),{i18n:r}=M();return Cy.default.createElement("span",null,e&&Bs({date:e,i18n:r,pattern:t||o}))}});var wy=b(()=>{});var zd,Im,ky,Ty=b(()=>{"use client";zd=F(l("react"),1);Tm();wy();Im="file",ky=({cellData:e,customCellContext:t,rowData:o})=>{let{collectionSlug:r,uploadConfig:n}=t;return zd.default.createElement("div",{className:Im},zd.default.createElement($d,{className:`${Im}__thumbnail`,collectionSlug:r,doc:{...o,filename:e},fileSrc:o?.thumbnailURL||o?.url,size:"small",uploadConfig:n}),zd.default.createElement("span",{className:`${Im}__filename`},String(e)))}});var Ey=b(()=>{});var Am,Py,Fy=b(()=>{"use client";Am=F(l("react"),1);Ey();Py=({cellData:e})=>{let t=e?.length>100?`${e.substring(0,100)}\u2026`:e;return Am.default.createElement("code",{className:"json-cell"},Am.default.createElement("span",null,JSON.stringify(t)))}});var Sy,Ly=b(()=>{Sy=!!(typeof window<"u"&&window.document&&window.document.createElement)});var Yr,_P,Ny,Ry=b(()=>{"use client";Yr=F(l("react"),1),_P=(0,Yr.createContext)({}),Ny=()=>(0,Yr.useContext)(_P)});var Dy=b(()=>{});var My,Er,wP,Ud,Om,Iy=b(()=>{"use client";My=l("@payloadcms/translations"),Er=F(l("react"),1);sl();et();W();Ly();Cl();Ry();Dy();wP="relationship-cell",Ud=3,Om=({cellData:e,label:t,relationTo:o})=>{let r=J(),{collections:n,routes:i}=r,[a,s]=hn(),[d,c]=(0,Er.useState)([]),{documents:p,getRelationships:u}=Ny(),[m,f]=(0,Er.useState)(!1),{i18n:h,t:g}=M(),x=Sy?s?.boundingClientRect?.top<window.innerHeight:!1;return(0,Er.useEffect)(()=>{if((e||typeof e=="number")&&x&&!m){let y=[],v=Array.isArray(e)?e:[e];v.slice(0,v.length<Ud?v.length:Ud).forEach(E=>{typeof E=="object"&&"relationTo"in E&&"value"in E&&y.push(E),(typeof E=="number"||typeof E=="string")&&typeof o=="string"&&y.push({relationTo:o,value:E})}),u(y),f(!0),c(y)}},[e,o,n,x,i.api,m,u]),(0,Er.useEffect)(()=>{m&&f(!1)},[e]),Er.default.createElement("div",{className:wP,ref:a},d.map(({relationTo:y,value:v},E)=>{let w=p[y][v],C=n.find(({slug:L})=>L===y),S=xr({collectionConfig:C,data:w||null,dateFormat:r.admin.dateFormat,fallback:`${g("general:untitled")} - ID: ${v}`,i18n:h});return Er.default.createElement(Er.default.Fragment,{key:E},w===!1&&`${g("general:untitled")} - ID: ${v}`,w===null&&`${g("general:loading")}...`,w?S:null,d.length>E+1&&", ")}),Array.isArray(e)&&e.length>Ud&&g("fields:itemsAndMore",{count:e.length-Ud,items:""}),d.length===0&&g("general:noLabel",{label:(0,My.getTranslation)(t||"",h)}))}});var Ay,Oy,$y,$m,By=b(()=>{"use client";Ay=l("@payloadcms/translations"),Oy=l("payload/shared"),$y=F(l("react"),1);W();$m=({cellData:e,options:t})=>{let{i18n:o}=M(),r=i=>i.map(a=>{let s=t.filter(d=>d.value===a)?.[0]?.label;return(0,Ay.getTranslation)(s,o)}).join(", "),n="";return(0,Oy.optionsAreObjects)(t)?n=Array.isArray(e)?r(e):r([e]):n=Array.isArray(e)?e.join(", "):e,$y.default.createElement("span",null,n)}});var Hy,zy,Uy=b(()=>{"use client";Hy=F(l("react"),1),zy=({cellData:e})=>{let t=e?.length>100?`${e.substring(0,100)}\u2026`:e;return Hy.default.createElement("span",null,t)}});var Bm,jy=b(()=>{"use client";uy();hy();yy();Dm();_y();Ty();Fy();Iy();By();Uy();Bm={File:ky,array:my,blocks:gy,checkbox:xy,code:Hd,date:vy,json:Py,radio:$m,relationship:Om,select:$m,textarea:zy,upload:Om}});var Hm,yi,Vy,kP,Gy,Wy=b(()=>{"use client";Hm=F(l("next/link.js"),1),yi=F(l("react"),1),Vy=l("@payloadcms/translations");et();W();Bd();Dm();jy();kP=Hm.default.default||Hm.default,Gy=e=>{let{name:t,className:o,fieldType:r,isFieldAffectingData:n,label:i,onClick:a}=e,{i18n:s}=M(),{routes:{admin:d}}=J(),c=Qr(),{cellData:p,cellProps:u,columnIndex:m,customCellContext:f,rowData:h}=c||{},{className:g,link:x,onClick:y}=u||{},v=o||g,E=a||y,w="span",C={className:v};if((x!==void 0?x:m===0)&&(w=kP,C.href=f?.collectionSlug?`${d}/collections/${f?.collectionSlug}/${h.id}`:""),typeof E=="function"&&(w="button",C.type="button",C.onClick=()=>{E({cellData:p,collectionSlug:f?.collectionSlug,rowData:h})}),t==="id")return yi.default.createElement(w,{...C},yi.default.createElement(Hd,{cellData:`ID: ${p}`,name:t,nowrap:!0,rowData:h,schemaPath:c?.cellProps?.schemaPath}));let L=typeof p<"u"&&Bm[r],N=null;if(L)N=yi.default.createElement(L,{cellData:p,customCellContext:f,rowData:h,...e});else if(!L)if(f.uploadConfig&&n&&t==="filename"){let _=Bm.File;N=yi.default.createElement(_,{cellData:p,customCellContext:f,rowData:h,...e})}else return yi.default.createElement(w,{...C},(p===""||typeof p>"u")&&"label"in e&&s.t("general:noLabel",{label:(0,Vy.getTranslation)(i||"data",s)}),typeof p=="string"&&p,typeof p=="number"&&p,typeof p=="object"&&JSON.stringify(p));return yi.default.createElement(w,{...C},N)}});var ga,TP,zm,Ky=b(()=>{"use client";ga=F(l("react"),1);rt();Mf();ey();iy();sy();Wy();TP=e=>e.type==="ui",zm=e=>{let{cellProps:t,columnPreferences:o,columns:r,enableRowSelections:n,fieldMap:i,useAsTitle:a}=e,s=Ss(i),d=s.findIndex(f=>f.name==="id");if(d>-1){let f=s.splice(d,1)[0];s.unshift(f)}let c=a?s.findIndex(f=>f.name===a):-1;if(c>-1){let f=s.splice(c,1)[0];s.unshift(f)}let p=o||r;p&&(s=s.sort((f,h)=>{let g=p.findIndex(y=>"name"in f&&y.accessor===f.name),x=p.findIndex(y=>"name"in h&&y.accessor===h.name);return g===-1&&x===-1?0:g===-1?1:x===-1?-1:g-x}));let u=[],m=s.reduce((f,h,g)=>{let x=o?.find(_=>"name"in h&&_.accessor===h.name),y=!1;x?y=x.active:r&&Array.isArray(r)&&r.length>0?y=r.find(_=>_.accessor===h.name)?.active:u.length<4&&(y=!0),y&&!u.includes(g)&&u.push(g);let v=u[0]===g,E="name"in h?h.name:void 0,w=h.CustomCell!==void 0?h.CustomCell:ga.default.createElement(Gy,{...h.cellComponentProps}),C=h&&"fieldComponentProps"in h&&"CustomLabel"in h.fieldComponentProps&&h.fieldComponentProps.CustomLabel!==void 0?h.fieldComponentProps.CustomLabel:void 0,S=ga.default.createElement(se,{CustomLabel:C,label:h.fieldComponentProps?.label,...h.fieldComponentProps?.labelProps||{},unstyled:!0}),L=h&&h.type&&(h.type==="array"||h.type==="group"||h.type==="blocks"),N=ga.default.createElement(ly,{Label:S,disable:L||TP(h)||void 0,label:"fieldComponentProps"in h&&"label"in h.fieldComponentProps?h.fieldComponentProps.label:void 0,name:"name"in h?h.name:void 0});if(h){let _={name:E,type:h.type,Label:S,accessor:E,active:y,admin:{disableListColumn:h.disableListColumn,disableListFilter:h.disableListFilter},cellProps:{...h.cellComponentProps,...t?.[g],link:v,relationTo:h.type==="relationship"&&"relationTo"in h.fieldComponentProps?h.fieldComponentProps.relationTo:void 0},components:{Cell:w,Heading:N}};f.push(_)}return f},[]);return n&&m.unshift({name:"",accessor:"_select",active:!0,components:{Cell:ga.default.createElement(ny,null),Heading:ga.default.createElement(Z0,null)},label:null}),m}});var qy,Qy=b(()=>{"use client";qy=e=>{let t=r=>r.type!=="ui"&&r.disabled===!0||r?.disableListColumn===!0;return e.reduce((r,n)=>{if(t(n))return r;let i=n.type==="tabs"&&"tabs"in n.fieldComponentProps?{...n,fieldComponentProps:{...n.fieldComponentProps,tabs:n.fieldComponentProps.tabs.map(a=>({...a,fieldMap:a.fieldMap.filter(s=>!t(s))}))}}:n;return[...r,i]},[])}});function Jy(e){return"name"in e&&e.type!=="ui"}var Um,Yy,Xy=b(()=>{Um=(e,t)=>e.reduce((o,r)=>Jy(r)&&r.name===t?o:!Jy(r)&&"fieldMap"in r.fieldComponentProps?[...o,...Um(r.fieldComponentProps.fieldMap,t)]:r.type==="tabs"&&"tabs"in r.fieldComponentProps?[...o,...r.fieldComponentProps.tabs.reduce((n,i)=>[...n,..."name"in i?[i.name]:Um(i.fieldMap,t)],[])]:[...o,r.name],[]),Yy=(e,t,o)=>{let r=[];if(Array.isArray(o)&&o.length>=1)r=o;else{t&&r.push(t);let n=Um(e,t);r=r.concat(n),r=r.slice(0,4)}return r.map(n=>({accessor:n,active:!0}))}});var oo,EP,Zy,eC=b(()=>{"use client";oo=F(l("react"),1);Ns();et();oi();Ky();Qy();Xy();EP=(0,oo.createContext)({}),Zy=({cellProps:e,children:t,collectionSlug:o,enableRowSelections:r=!1,listPreferences:n,preferenceKey:i})=>{let a=J(),{componentMap:s}=Xi(),{fieldMap:d}=s.collections[o],c=a.collections.find(L=>L.slug===o),{admin:{defaultColumns:p,useAsTitle:u}}=c,m=oo.default.useRef(o),{getPreference:f,setPreference:h}=So(),[g]=(0,oo.useState)(()=>Yy(qy(d),u,p)),[x,y]=oo.default.useState(()=>zm({cellProps:e,columnPreferences:n?.columns,columns:g,enableRowSelections:r,fieldMap:d,useAsTitle:u})),v=oo.default.useCallback(L=>{let N=L.map(_=>({accessor:_?.accessor,active:_?.active}));h(i,{columns:N},!0)},[i,h]),E=L=>{let N=!1;return L.map(T=>{let k=T.active&&!N&&T.accessor!=="_select";return k&&(N=!0),{...T,cellProps:{...T.cellProps,link:k}}})},w=(0,oo.useCallback)(L=>{let{fromIndex:N,toIndex:_}=L,T=[...x],[k]=T.splice(N,1);T.splice(_,0,k);let P=E(T);y(P),v(P)},[x,v]),C=(0,oo.useCallback)(L=>{let N=x.map(T=>({...T,active:T?.name===L?!T.active:T.active})),_=E(N);y(_),v(_)},[x,v]),S=oo.default.useCallback(L=>{let N=x.map(T=>({...T,active:L.includes(T.accessor)})),_=E(N);v(_)},[x,v]);return oo.default.useEffect(()=>{(async()=>{if(m.current!==o||!n){let _=await f(i);m.current=o,_?.columns&&y(zm({cellProps:e,columnPreferences:_?.columns,columns:g,enableRowSelections:!0,fieldMap:d,useAsTitle:u}))}})()},[i,f,o,d,e,p,u,n,g]),oo.default.createElement(EP.Provider,{value:{columns:x,moveColumn:w,setActiveColumns:S,toggleColumn:C}},t)}});var oC,jd,fe,tC,rC,nC=b(()=>{"use client";oC=l("@faceless-ui/modal"),jd=l("@payloadcms/translations"),fe=F(l("react"),1);rt();Yc();Rr();ur();Ns();et();z0();Lm();oi();W();zr();Q0();$s();ca();eC();Wf();Vd();tC=(e,t)=>("and"in e?e.and.push(t):"or"in e?e={and:[e,t]}:e={and:[e,t]},e),rC=({collectionSlugs:e,customHeader:t,drawerSlug:o,filterOptions:r,onSelect:n,selectedCollection:i})=>{let{i18n:a,t:s}=M(),{permissions:d}=ut(),{setPreference:c}=So(),{closeModal:p,isModalOpen:u}=(0,oC.useModal)(),[m,f]=(0,fe.useState)(),[h,g]=(0,fe.useState)(null),[x,y]=(0,fe.useState)(1),[v,E]=(0,fe.useState)(null),[w,C]=(0,fe.useState)(""),{componentMap:S}=Xi(),{collections:L,routes:{api:N},serverURL:_}=J(),T=L.filter(({slug:Z})=>e.includes(Z)),[k,P]=(0,fe.useState)(()=>T.find(({slug:Z})=>Z===i)||T?.[0]),{List:R}=S.collections?.[k?.slug]||{},[D,I]=(0,fe.useState)(()=>k?{label:(0,jd.getTranslation)(k.labels.singular,a),value:k.slug}:void 0);(0,fe.useEffect)(()=>{},[k]),(0,fe.useEffect)(()=>{if(i){let Z=T.find(({slug:de})=>de===i)||T?.[0];P(Z)}},[i,T,n,s]);let A=`${k.slug}-list`,[O,B,{drawerSlug:$}]=Nt({collectionSlug:k.slug});(0,fe.useEffect)(()=>{D&&!Array.isArray(D)&&P(T.find(({slug:Z})=>D.value===Z))},[D,T]);let te=d?.collections?.[k?.slug]?.create?.permission,pe=u(o)?`${_}${N}/${k.slug}`:null,[Te,G]=(0,fe.useReducer)(Z=>Z+1,0),[{data:K,isError:Q,isLoading:he},{setParams:Qe}]=ni(pe,{}),V=T.length>1;(0,fe.useEffect)(()=>{let{slug:Z,admin:{listSearchableFields:de,useAsTitle:go}={},versions:Jt}=k,Je={},De={...v||{}},Yt=r?.[Z];if(r&&typeof Yt!="boolean"&&(De=tC(De,Yt)),w){let yt=(de||[go]).map(Ue=>({[Ue]:{like:w}}),[]);if(yt.length>0){let Ue={or:[...yt]};De=tC(De,Ue)}}x&&(Je.page=x),h&&(Je.sort=h),Te&&(Je.cacheBust=Te),De&&(Je.where=De),Jt?.drafts&&(Je.draft="true"),Qe(Je)},[x,h,v,w,Te,r,k,s,Qe]),(0,fe.useEffect)(()=>{c(A,{limit:m,sort:h},!0)},[h,m,c,A]);let Qt=(0,fe.useCallback)(({doc:Z})=>{typeof n=="function"&&n({collectionSlug:k.slug,docID:Z.id}),G(),p($),p(o)},[p,$,o,n,k]);return!k||Q?null:he?fe.default.createElement(q0,null):fe.default.createElement(H0,{Header:fe.default.createElement("header",{className:`${_o}__header`},fe.default.createElement("div",{className:`${_o}__header-wrap`},fe.default.createElement("div",{className:`${_o}__header-content`},fe.default.createElement("h2",{className:`${_o}__header-text`},t||(0,jd.getTranslation)(k?.labels?.plural,a)),te&&fe.default.createElement(B,{className:`${_o}__create-new-button`},fe.default.createElement(Ar,null,s("general:createNew")))),fe.default.createElement("button",{"aria-label":s("general:close"),className:`${_o}__header-close`,onClick:()=>{p(o)},type:"button"},fe.default.createElement(zt,null))),k?.admin?.description&&fe.default.createElement("div",{className:`${_o}__sub-header`},fe.default.createElement(Gf,{description:k.admin.description})),V&&fe.default.createElement("div",{className:`${_o}__select-collection-wrap`},fe.default.createElement(se,{label:s("upload:selectCollectionToBrowse")}),fe.default.createElement(wr,{className:`${_o}__select-collection`,onChange:I,options:T.map(Z=>({label:(0,jd.getTranslation)(Z.labels.singular,a),value:Z.slug})),value:D}))),collectionConfig:k,collectionSlug:k.slug,hasCreatePermission:te,newDocumentURL:null},fe.default.createElement(W0,{data:K,defaultLimit:m||k?.admin?.pagination?.defaultLimit,defaultSort:h,handlePageChange:y,handlePerPageChange:f,handleSearchChange:C,handleSortChange:g,handleWhereChange:E,modifySearchParams:!1,preferenceKey:A},fe.default.createElement(Zy,{cellProps:[{className:`${_o}__first-cell`,link:!1,onClick:({collectionSlug:Z,rowData:de})=>{typeof n=="function"&&n({collectionSlug:Z,docID:de.id})}}],collectionSlug:k.slug,preferenceKey:A},R,fe.default.createElement(O,{onSave:Qt}))))}});var iC=b(()=>{});var aC,Xe,_o,PP,FP,SP,Ci,Vd=b(()=>{"use client";aC=l("@faceless-ui/modal"),Xe=F(l("react"),1);B0();et();Hr();kn();nC();iC();_o="list-drawer",PP=({depth:e,uuid:t})=>`list-drawer_${e}_${t}`,FP=({children:e,className:t,disabled:o,drawerSlug:r,...n})=>Xe.default.createElement(No,{className:[t,`${_o}__toggler`].filter(Boolean).join(" "),disabled:o,slug:r,...n},e),SP=e=>{let{drawerSlug:t}=e;return Xe.default.createElement(Cr,{Header:null,className:_o,gutter:!1,slug:t},Xe.default.createElement(rC,{...e}))},Ci=({collectionSlugs:e,filterOptions:t,selectedCollection:o,uploads:r})=>{let{collections:n}=J(),i=gt(),a=(0,Xe.useId)(),{closeModal:s,modalState:d,openModal:c,toggleModal:p}=(0,aC.useModal)(),[u,m]=(0,Xe.useState)(!1),[f,h]=(0,Xe.useState)(e),g=PP({depth:i,uuid:a});(0,Xe.useEffect)(()=>{m(!!d[g]?.isOpen)},[d,g]),(0,Xe.useEffect)(()=>{if(!f||f.length===0){let S=n.filter(({upload:L})=>r?!!L:!0);h(S.map(({slug:L})=>L))}},[f,r,n]);let x=(0,Xe.useCallback)(()=>{p(g)},[p,g]),y=(0,Xe.useCallback)(()=>{s(g)},[g,s]),v=(0,Xe.useCallback)(()=>{c(g)},[g,c]),E=(0,Xe.useMemo)(()=>S=>Xe.default.createElement(SP,{...S,closeDrawer:y,collectionSlugs:f,drawerSlug:g,filterOptions:t,key:g,selectedCollection:o,uploads:r}),[g,f,r,y,o,t]),w=(0,Xe.useMemo)(()=>S=>Xe.default.createElement(FP,{...S,drawerSlug:g}),[g]),C=(0,Xe.useMemo)(()=>({closeDrawer:y,drawerDepth:i,drawerSlug:g,isDrawerOpen:u,openDrawer:v,toggleDrawer:x}),[i,g,u,x,y,v]);return[E,w,C]}});var jm=b(()=>{});var lC,Ae,Hl,sC,dC=b(()=>{"use client";lC=l("@payloadcms/translations"),Ae=F(l("react"),1);xn();zr();$0();Vd();W();dt();ht();rt();Be();jm();Hl="upload",sC=e=>{let{CustomDescription:t,CustomError:o,CustomLabel:r,api:n="/api",className:i,collection:a,customUploadActions:s,descriptionProps:d,errorProps:c,filterOptions:p,label:u,labelProps:m,onChange:f,readOnly:h,relationTo:g,required:x,serverURL:y,showError:v,style:E,value:w,width:C}=e,{i18n:S,t:L}=M(),[N,_]=(0,Ae.useState)(void 0),[T,k]=(0,Ae.useState)(!1),[P]=(0,Ae.useState)([a?.slug]),[R,D,{closeDrawer:I}]=Nt({collectionSlug:P[0]}),[A,O,{closeDrawer:B}]=Ci({collectionSlugs:P,filterOptions:p});(0,Ae.useEffect)(()=>{w!==null&&typeof w<"u"&&w!==""?(async()=>{let ne=await fetch(`${y}${n}/${g}/${w}`,{credentials:"include",headers:{"Accept-Language":S.language}});if(ne.ok){let pe=await ne.json();_(pe)}else k(!0),_(void 0)})():_(void 0)},[w,g,n,y,S]);let $=(0,Ae.useCallback)(te=>{k(!1),f(te.doc),I()},[f,I]),H=(0,Ae.useCallback)(te=>{k(!1),f({id:te.docID}),B()},[f,B]);return a.upload?Ae.default.createElement("div",{className:[Y,Hl,i,v&&"error",h&&"read-only"].filter(Boolean).join(" "),style:{...E,width:C}},Ae.default.createElement(se,{CustomLabel:r,label:u,required:x,...m||{}}),Ae.default.createElement("div",{className:`${Y}__wrap`},Ae.default.createElement(me,{CustomError:o,...c||{}}),a?.upload&&Ae.default.createElement(Ae.default.Fragment,null,N&&!T&&Ae.default.createElement(O0,{collectionSlug:g,customUploadActions:s,doc:N,handleRemove:h?void 0:()=>{f(null)},uploadConfig:a.upload}),(!N||T)&&Ae.default.createElement("div",{className:`${Hl}__wrap`},Ae.default.createElement("div",{className:`${Hl}__buttons`},Ae.default.createElement(D,{className:`${Hl}__toggler`,disabled:h},Ae.default.createElement(Ve,{buttonStyle:"secondary",disabled:h,el:"div"},L("fields:uploadNewLabel",{label:(0,lC.getTranslation)(a.labels.singular,S)}))),Ae.default.createElement(O,{className:`${Hl}__toggler`,disabled:h},Ae.default.createElement(Ve,{buttonStyle:"secondary",disabled:h,el:"div"},L("fields:chooseFromExisting"))))),t!==void 0?t:Ae.default.createElement(ce,{...d||{}})),!h&&Ae.default.createElement(R,{onSave:$}),!h&&Ae.default.createElement(A,{onSelect:H}))):null}});var zl,LP,cC,pC=b(()=>{"use client";zl=F(l("react"),1);Re();Ye();We();et();dC();jm();LP=e=>{let{CustomDescription:t,CustomError:o,CustomLabel:r,className:n,descriptionProps:i,errorProps:a,label:s,labelProps:d,path:c,readOnly:p,relationTo:u,required:m,style:f,validate:h,width:g}=e,{collections:x,routes:{api:y},serverURL:v}=J(),E=x.find(A=>A.slug===u),w=(0,zl.useCallback)((A,O)=>{if(typeof h=="function")return h(A,{...O,required:m})},[h,m]),{path:C,readOnly:S}=j(),{filterOptions:L,formInitializing:N,formProcessing:_,path:T,setValue:k,showError:P,value:R}=ae({path:C??c,validate:w}),D=p||S||_||N,I=(0,zl.useCallback)(A=>{let O=A?.id||A;k(O)},[k]);return E.upload?zl.default.createElement(sC,{CustomDescription:t,CustomError:o,CustomLabel:r,api:y,className:n,collection:E,descriptionProps:i,errorProps:a,filterOptions:L,label:s,labelProps:d,onChange:I,path:T,readOnly:D,relationTo:u,required:m,serverURL:v,showError:P,style:f,value:R,width:g}):null},cC=oe(LP)});var mC,uC=b(()=>{fh();Bh();Ap();qh();eb();rb();cb();fb();Pb();Fp();Lb();px();fx();xx();Tx();qx();Jx();e0();i0();u0();x0();k0();E0();pC();Be();mC={array:uh,blocks:$h,checkbox:pd,code:Kh,collapsible:Zh,confirmPassword:ob,date:db,email:ub,group:Eb,hidden:Xs,json:Sb,number:cx,password:ux,point:bx,radio:kx,relationship:Kx,richText:Qx,row:Zx,select:n0,tabs:m0,text:b0,textarea:w0,ui:T0,upload:cC}});var Ul,NP,fC,gC=b(()=>{"use client";Ul=F(l("react"),1);uC();NP=(0,Ul.createContext)(mC),fC=()=>(0,Ul.useContext)(NP)});var Vm,hC,bC=b(()=>{"use client";Vm=F(l("react"),1);Fp();gC();Vs();Re();hC=({name:e,type:t,CustomField:o,custom:r,disabled:n,fieldComponentProps:i,indexPath:a,isHidden:s,path:d,permissions:c,readOnly:p,schemaPath:u,siblingPermissions:m})=>{let f=ta(),{readOnly:h}=j(),g=fC(),x=[d,e].filter(Boolean).join("."),y=[u,e].filter(Boolean).join(".");if(c?.read?.permission===!1||n)return null;let v=p;h&&v!==!1&&(v=!0),c?.[f]?.permission===!1&&(v=!0);let E=s?Xs:g[t];return o===void 0&&!E?null:Vm.default.createElement(Bg,{custom:r,indexPath:a,path:x,permissions:c,readOnly:v,schemaPath:y,siblingPermissions:m,type:t},o!==void 0?o:Vm.default.createElement(E,{...i}))}});var xC=b(()=>{});var jl,Gm,Dt,Nn=b(()=>{"use client";jl=F(l("react"),1);sl();W();bC();xC();Gm="render-fields",Dt=e=>{let{className:t,fieldMap:o,forceRender:r,indexPath:n,margins:i,path:a,permissions:s,schemaPath:d}=e,{i18n:c}=M(),[p,u]=jl.default.useState(!!r),[m,f]=hn({rootMargin:"1000px"},!!r),h=!!f?.isIntersecting,g=f?.boundingClientRect?.top<0,x=r||h||g;return jl.default.useEffect(()=>{x&&!p&&u(!0)},[x,p]),!o||Array.isArray(o)&&o.length===0?null:(c||console.error("Need to implement i18n when calling RenderFields"),o?jl.default.createElement("div",{className:[Gm,t,i&&`${Gm}--margins-${i}`,i===!1&&`${Gm}--margins-none`].filter(Boolean).join(" "),ref:m},p&&o?.map((y,v)=>{let{type:E,CustomField:w,custom:C,disabled:S,fieldComponentProps:L,fieldComponentProps:{readOnly:N},isHidden:_}=y,T=typeof r=="number"&&v<=r||!0,k="name"in y?y.name:void 0;return jl.default.createElement(hC,{CustomField:w,custom:C,disabled:S,fieldComponentProps:{...L,forceRender:T},indexPath:n!==void 0?`${n}.${v}`:`${v}`,isHidden:_,key:v,name:k,path:a,permissions:s?.[k],readOnly:N,schemaPath:d,siblingPermissions:s,type:E})})):null)}});var yC,CC=b(()=>{yC={413:"Your request was too large to submit successfully."}});var ha,ba,vC=b(()=>{ha=(e,t)=>{let o={},r=Object.entries(t).reduce((n,[i,a])=>{let s=n;if(i.indexOf(`${e}.`)===0){let[d]=i.replace(`${e}.`,"").split(".");s[d]||(s[d]={}),s[d][i.replace(`${e}.${String(d)}.`,"")]={...a}}else o[i]=a;return s},[]);return{remainingFields:o,rows:r}},ba=(e,t)=>t.reduce((o,r,n)=>({...o,...Object.entries(r).reduce((i,[a,s])=>({...i,[`${e}.${n}.${a}`]:{...s}}),{})}),{})});function wC(e,t){switch(t.type){case"REPLACE_STATE":{if(t.optimize!==!1){let o={};return Object.entries(t.state).forEach(([r,n])=>{let i=e[r],a=n;(0,_C.dequal)(i,a)?i&&(o[r]=i):o[r]=a}),o}return t.state}case"REMOVE":{let o={...e};return o[t.path]&&delete o[t.path],o}case"ADD_SERVER_ERRORS":{let o={...e},r=[];return t.errors.forEach(({field:n,message:i})=>{o[n]={...o[n]||{initialValue:null,value:null},errorMessage:i,valid:!1};let a=n.split(".");a.length>1&&r.push({fieldErrorPath:n,parentPath:a.slice(0,a.length-1).join(".")})}),o=Object.entries(o).reduce((n,[i,a])=>{let s=r.reduce((c,{fieldErrorPath:p,parentPath:u})=>(u.startsWith(i)&&c.push(p),c),[]),d=!1;if(s.length>0){let c=Array.isArray(a.errorPaths)?a.errorPaths:[];s.forEach(p=>{c.includes(p)||(c.push(p),d=!0)}),d&&(n[i]={...a,errorPaths:c})}return d||(n[i]=a),n},{}),o}case"UPDATE":{let o=Object.entries(t).reduce((n,[i,a])=>["disableFormData","errorMessage","initialValue","rows","valid","validate","value"].includes(i)?{...n,[i]:a}:n,e[t.path]||{});return{...e,[t.path]:o}}case"REMOVE_ROW":{let{path:o,rowIndex:r}=t,{remainingFields:n,rows:i}=ha(o,e),a=[...e[o]?.rows||[]];return i.splice(r,1),a.splice(r,1),{...n,[o]:{...e[o],disableFormData:i.length>0,rows:a,value:i.length},...ba(o,i)}}case"ADD_ROW":{let{blockType:o,path:r,rowIndex:n,subFieldState:i={}}=t,a=typeof n=="number"?n:e[r]?.rows?.length||0,s=[...e[r]?.rows||[]],d={id:i?.id?.value||new Gd().toHexString(),blockType:o||void 0,collapsed:!1};s.splice(a,0,d),o&&(i.blockType={initialValue:o,valid:!0,value:o});let{remainingFields:c,rows:p}=ha(r,e);return p.splice(a,0,i),{...c,...ba(r,p),[r]:{...e[r],disableFormData:!0,rows:s,value:p.length}}}case"REPLACE_ROW":{let{blockType:o,path:r,rowIndex:n,subFieldState:i={}}=t,{remainingFields:a,rows:s}=ha(r,e),d=Math.max(0,Math.min(n,s?.length-1||0)),c=[...e[r]?.rows||[]];return c[d]={id:new Gd().toHexString(),blockType:o||void 0,collapsed:!1},o&&(i.blockType={initialValue:o,valid:!0,value:o}),s[d]=i,{...a,...ba(r,s),[r]:{...e[r],disableFormData:!0,rows:c,value:s.length}}}case"DUPLICATE_ROW":{let{path:o,rowIndex:r}=t,{remainingFields:n,rows:i}=ha(o,e),a=[...e[o].rows||[]],s=(0,Km.deepCopyObject)(a[r]);s.id&&(s.id=new Gd().toHexString());let d=(0,Km.deepCopyObject)(i[r]);return d.id&&(d.id=new Gd().toHexString()),Object.keys(d).length>0&&(i.splice(r+1,0,d),a.splice(r+1,0,s)),{...n,...ba(o,i),[o]:{...e[o],disableFormData:!0,rows:a,value:i.length}}}case"MOVE_ROW":{let{moveFromIndex:o,moveToIndex:r,path:n}=t,{remainingFields:i,rows:a}=ha(n,e),s=a[o];a.splice(o,1),a.splice(r,0,s);let d=[...e[n]?.rows||[]],c={...d[o]};return d.splice(o,1),d.splice(r,0,c),{...i,...ba(n,a),[n]:{...e[n],rows:d}}}case"SET_ROW_COLLAPSED":{let{collapsed:o,path:r,rowID:n,setDocFieldPreferences:i}=t,a=e[r],{collapsedRowIDs:s,matchedIndex:d}=e[r].rows.reduce((p,u,m)=>{let f=u.id===n;return f&&(p.matchedIndex=m),(!f&&u.collapsed||f&&o)&&p.collapsedRowIDs.push(u.id),p},{collapsedRowIDs:[],matchedIndex:void 0});return d>-1&&(a.rows[d].collapsed=o,i(r,{collapsed:s})),{...e,[r]:{...a}}}case"SET_ALL_ROWS_COLLAPSED":{let{collapsed:o,path:r,setDocFieldPreferences:n}=t,{collapsedRowIDs:i,rows:a}=e[r].rows.reduce((s,d)=>(o&&s.collapsedRowIDs.push(d.id),s.rows.push({...d,collapsed:o}),s),{collapsedRowIDs:[],rows:[]});return n(r,{collapsed:i}),{...e,[r]:{...e[r],rows:a}}}default:return e}}var Wm,_C,Km,Gd,kC=b(()=>{Wm=F(l("bson-objectid"),1),_C=l("dequal/lite"),Km=l("payload/shared");vC();Gd=Wm.default.default||Wm.default});var RP,DP,MP,IP,AP,OP,$P,BP,HP,Wd,TC=b(()=>{RP=()=>{},DP=()=>{},MP=()=>{},IP=()=>{},AP=()=>{},OP=()=>{},$P=()=>{},BP=()=>{},HP=()=>{},Wd={addFieldRow:()=>{},buildRowErrors:()=>{},createFormData:AP,disabled:!1,dispatchFields:MP,fields:{},formRef:null,getData:()=>{},getDataByPath:()=>{},getField:()=>{},getFields:()=>({}),getSiblingData:DP,initializing:void 0,removeFieldRow:()=>{},replaceFieldRow:()=>{},replaceState:()=>{},reset:HP,setDisabled:()=>{},setModified:OP,setProcessing:$P,setSubmitted:BP,submit:RP,validateForm:IP}});function EC(e,t){if(e.length!==t.length)return!1;let o=e.slice().sort(),r=t.slice().sort();for(let n=0;n<o.length;n++)if(o[n]!==r[n])return!1;return!0}var PC=b(()=>{});var FC,SC=b(()=>{PC();FC=(e,t)=>{if(!e)return{changed:!1,result:void 0};let o=[],r=[];return Array.isArray(t)&&t?.length&&t.forEach(n=>r.push(n)),Array.isArray(e)&&e?.length&&e.forEach(n=>o.push(n)),EC(o,r)?{changed:!1,result:e}:{changed:!0,result:r}}});var LC,zP,NC,RC=b(()=>{LC=l("dequal/lite");SC();zP=["passesCondition","valid","errorMessage"],NC=(e,t)=>{let o=!1,r={};return e&&Object.entries(e).forEach(([n,i])=>{if(!t[n])return;let a=FC(i.errorPaths,t[n].errorPaths);a.result&&(a.changed&&(o=a.changed),i.errorPaths=a.result),(t[n]?.filterOptions||i.filterOptions)&&((0,LC.dequal)(t[n]?.filterOptions,i.filterOptions)||(o=!0,i.filterOptions=t[n].filterOptions)),zP.forEach(s=>{t[n]?.[s]!==i[s]&&(o=!0,s in t[n]?i[s]=t[n][s]:delete i[s])}),r[n]={...i}}),{changed:o,newState:r}}});var DC,MC,IC,Pr,qm,le,Kd,UP,Vl,AC=b(()=>{"use client";DC=l("dequal/lite"),MC=l("next/navigation.js"),IC=l("object-to-formdata"),Pr=l("payload/shared"),qm=F(l("qs-esm"),1),le=F(l("react"),1),Kd=l("sonner");gf();ul();ur();et();yr();kp();fr();Vs();W();Qc();zs();lt();CC();kC();TC();RC();UP="form",Vl=e=>{let{id:t,collectionSlug:o,globalSlug:r}=Ge(),{action:n,beforeSubmit:i,children:a,className:s,disableSuccessStatus:d,disableValidationOnSubmit:c,disabled:p,handleResponse:u,initialState:m,isInitializing:f,onChange:h,onSubmit:g,onSuccess:x,redirect:y,submitted:v,uuid:E,waitForAutocomplete:w}=e,C="method"in e?e?.method:void 0,S=(0,MC.useRouter)(),{code:L}=vt(),{i18n:N,t:_}=M(),{refreshCookie:T,user:k}=ut(),P=ta(),{formQueryParams:R}=Ks(),D=J(),{routes:{api:I},serverURL:A}=D,[O,B]=(0,le.useState)(p||!1),[$,H]=(0,le.useState)(!1),[te,ne]=(0,le.useState)(!1),[pe,Te]=(0,le.useState)(f),[G,K]=(0,le.useState)(!1),[Q,he]=(0,le.useState)(!1),Qe=(0,le.useRef)(null),V=(0,le.useRef)({}),Qt=(0,le.useReducer)(wC,{},()=>m),[Z,de]=Qt;V.current.fields=Z;let go=(0,le.useCallback)(async()=>{let q={},U=!0,Ee=V.current.getData(),ve=Object.entries(V.current.fields).map(async([Se,Le])=>{let Ne=Le;if(Le.passesCondition!==!1){let Ht=Ne.valid;if(typeof Le.validate=="function"){let pr=Le.value;Le?.rows&&Array.isArray(Le.rows)&&(pr=V.current.getDataByPath(Se)),Ht=await Le.validate(pr,{id:t,config:D,data:Ee,operation:P,siblingData:V.current.getSiblingData(Se),t:_,user:k}),typeof Ht=="string"?(Ne.errorMessage=Ht,Ne.valid=!1):(Ne.valid=!0,Ne.errorMessage=void 0)}Ne.valid===!1&&(U=!1)}q[Se]=Ne});return await Promise.all(ve),(0,DC.dequal)(V.current.fields,q)||de({type:"REPLACE_STATE",state:q}),U},[t,k,P,_,de,D]),Jt=(0,le.useCallback)(async(q={},U)=>{let{action:ie,method:Ee=C,overrides:ve={},skipValidation:Se}=q;if(O){U&&U.preventDefault();return}let Le,Ne,Ht=new Promise((Fe,mt)=>{Le=Fe,Ne=mt}),pr=ie||typeof n=="string"||typeof n=="function";if(y||d||!pr?(Le=Fe=>Kd.toast.success(Fe),Ne=Fe=>Kd.toast.error(Fe)):Kd.toast.promise(Ht,{error:Fe=>Fe,loading:_("general:submitting"),success:Fe=>Fe}),U&&(U.stopPropagation(),U.preventDefault()),K(!0),B(!0),w&&await(0,Pr.wait)(100),Array.isArray(i)){let Fe;if(await i.reduce(async(Wo,fn)=>{await Wo,Fe=await fn({formState:Z})},Promise.resolve()),!Object.entries(Fe).every(([,Wo])=>Wo.valid))return K(!1),he(!0),B(!1),de({type:"REPLACE_STATE",state:Fe})}if(!(Se||c?!0:await V.current.validateForm())){Ne(_("error:correctInvalidFields")),K(!1),he(!0),B(!1);return}if(g){let Fe={...(0,Pr.reduceFieldsToValues)(Z,!0),...ve};g(Z,Fe)}if(!pr){K(!1),he(!0),B(!1);return}let Gi=V.current.createFormData(ve);try{let Fe,mt=ie||(typeof n=="string"?`${n}${qm.stringify(R,{addQueryPrefix:!0})}`:null);if(mt?Fe=await Es[Ee.toLowerCase()](mt,{body:Gi,headers:{"Accept-Language":N.language}}):typeof n=="function"&&(Fe=await n(Gi)),ne(!1),B(!1),typeof u=="function"){u(Fe,Le,Ne);return}let Wo=Fe.headers.get("content-type"),fn=Wo&&Wo.indexOf("application/json")!==-1,ho={};if(fn&&(ho=await Fe.json()),Fe.status<400)typeof x=="function"&&await x(ho),he(!1),K(!1),y?S.push(y):d||Le(ho.message||_("general:submissionSuccessful"));else{if(K(!1),he(!0),V.current={...V.current},ho.message){Ne(ho.message);return}if(Array.isArray(ho.errors)){let[al,Wi]=ho.errors.reduce(([Nr,gn],Ki)=>{let pf=[],Vc=[];return Ki?.message&&Vc.push(Ki),Array.isArray(Ki?.data?.errors)&&Ki.data?.errors.forEach(Gc=>{Gc?.field?pf.push(Gc):Vc.push(Gc)}),[[...Nr,...pf],[...gn,...Vc]]},[[],[]]);de({type:"ADD_SERVER_ERRORS",errors:al}),Wi.forEach(Nr=>{Ne(Nr.message||_("error:unknown"))});return}let jc=yC?.[Fe.status]||Fe?.statusText||_("error:unknown");Ne(jc)}}catch(Fe){console.error("Error submitting form",Fe),K(!1),he(!0),B(!1),Ne(Fe.message)}},[i,n,d,c,O,de,Z,u,C,g,x,y,S,_,N,w,R]),Je=(0,le.useCallback)(()=>V.current.fields,[]),De=(0,le.useCallback)(q=>V.current.fields[q],[]),Yt=(0,le.useCallback)(()=>(0,Pr.reduceFieldsToValues)(V.current.fields,!0),[]),yt=(0,le.useCallback)(q=>(0,Pr.getSiblingData)(V.current.fields,q),[]),Ue=(0,le.useCallback)(q=>(0,Pr.getDataByPath)(V.current.fields,q),[]),Bt=(0,le.useCallback)((q={})=>{let U=(0,Pr.reduceFieldsToValues)(V.current.fields,!0),ie=U?.file;ie&&delete U.file;let Ee={...U,...q},ve={_payload:JSON.stringify(Ee),file:ie};return(0,IC.serialize)(ve,{indices:!0,nullsAsUndefineds:!1})},[]),St=(0,le.useCallback)(async q=>{let U=await yo({apiRoute:I,body:{id:t,collectionSlug:o,data:q,globalSlug:r,operation:P,schemaPath:o||r},serverURL:A});V.current={...Wd},ne(!1),de({type:"REPLACE_STATE",state:U})},[I,o,de,r,t,P,A]),Ct=(0,le.useCallback)(q=>{V.current={...Wd},ne(!1),de({type:"REPLACE_STATE",state:q})},[de]),z=(0,le.useCallback)(async({data:q,schemaPath:U})=>await yo({apiRoute:I,body:{collectionSlug:o,data:q,globalSlug:r,schemaPath:U},serverURL:A}),[I,o,r,A]),xe=(0,le.useCallback)(async({data:q,path:U,rowIndex:ie,schemaPath:Ee})=>{let ve=await z({data:q,schemaPath:Ee});de({type:"ADD_ROW",blockType:q?.blockType,path:U,rowIndex:ie,subFieldState:ve})},[z,de]),cr=(0,le.useCallback)(({path:q,rowIndex:U})=>{de({type:"REMOVE_ROW",path:q,rowIndex:U})},[de]),ge=(0,le.useCallback)(async({data:q,path:U,rowIndex:ie,schemaPath:Ee})=>{let ve=await z({data:q,schemaPath:Ee});de({type:"REPLACE_ROW",blockType:q?.blockType,path:U,rowIndex:ie,subFieldState:ve})},[z,de]);(0,le.useEffect)(()=>{f!==void 0&&Te(f)},[f]),V.current.submit=Jt,V.current.getFields=Je,V.current.getField=De,V.current.getData=Yt,V.current.getSiblingData=yt,V.current.getDataByPath=Ue,V.current.validateForm=go,V.current.createFormData=Bt,V.current.setModified=ne,V.current.setProcessing=K,V.current.setSubmitted=he,V.current.disabled=O,V.current.setDisabled=B,V.current.formRef=Qe,V.current.reset=St,V.current.replaceState=Ct,V.current.dispatchFields=de,V.current.addFieldRow=xe,V.current.removeFieldRow=cr,V.current.replaceFieldRow=ge,V.current.uuid=E,V.current.initializing=pe,(0,le.useEffect)(()=>{H(!0)},[]),(0,le.useEffect)(()=>{typeof p=="boolean"&&B(p)},[p]),(0,le.useEffect)(()=>{typeof v=="boolean"&&he(v)},[v]),(0,le.useEffect)(()=>{m&&(V.current={...Wd},de({type:"REPLACE_STATE",optimize:!1,state:m}))},[m,de]),Mr(()=>{T()},15e3,[Z]),(0,le.useEffect)(()=>{V.current={...V.current},ne(!1)},[L]);let je=[s,UP].filter(Boolean).join(" ");ff(()=>{te&&(async()=>{if(Array.isArray(h)){let U=V.current.fields;for(let ve of h)U=await ve({formState:U});let{changed:ie,newState:Ee}=NC(V.current.fields||{},U);ie&&de({type:"REPLACE_STATE",optimize:!1,state:Ee})}})()},150,[V.current.fields,de,h,te]);let Me=typeof n=="string"?`${n}${qm.stringify(R,{addQueryPrefix:!0})}`:"";return le.default.createElement("form",{action:C?Me:n,className:je,method:C,noValidate:!0,onSubmit:q=>V.current.submit({},q),ref:Qe},le.default.createElement(cp.Provider,{value:V.current},le.default.createElement(pp.Provider,{value:{fields:Z,...V.current}},le.default.createElement(mp.Provider,{value:Q},le.default.createElement(gp.Provider,{value:!$||$&&pe},le.default.createElement(up.Provider,{value:G},le.default.createElement(fp.Provider,{value:te},le.default.createElement(Hs.Provider,{value:Qt},a))))))))}});var Mo,OC=b(()=>{Mo=l("@faceless-ui/modal")});var xa,jP,VP,Qm,Gl,Jm=b(()=>{"use client";xa=F(l("react"),1),jP=xa.default.createContext({addClientFunction:()=>null,removeClientFunction:()=>null}),VP=xa.default.createContext({}),Qm=(e,t)=>{let{addClientFunction:o,removeClientFunction:r}=xa.default.useContext(jP);xa.default.useEffect(()=>(o({func:t,key:e}),()=>{r({func:t,key:e})}),[t,e,o,r])},Gl=()=>xa.default.useContext(VP)});var ya,GP,Ym,$C=b(()=>{"use client";ya=F(l("react"),1),GP=(0,ya.createContext)({}),Ym=()=>(0,ya.useContext)(GP)});var Ca,WP,Wl,BC=b(()=>{Ca=F(l("@faceless-ui/scroll-info"),1),{ScrollInfoProvider:WP}=Ca&&"ScrollInfoProvider"in Ca?Ca:{ScrollInfoProvider:void 0},{useScrollInfo:Wl}=Ca&&"useScrollInfo"in Ca?Ca:{useScrollInfo:void 0}});var KP,Ie=b(()=>{"use client";Yc();ul();xn();xl();zr();kn();Ws();Ur();Vd();OC();$s();hi();Bd();KP=l("sonner");vd();Wp();dt();ht();rt();Re();lt();AC();Nn();vg();Ye();We();km();qi();ur();Jm();Jm();et();yr();Hr();$C();BC();W()});function Ql({editorConfig:e}){return e.features.nodes.map(t=>"node"in t?t.node:t)}var Qd=b(()=>{});var ru=b(()=>{zs()});function YP(){return Math.random().toString(36).substring(2,12)+Math.random().toString(36).substring(2,12)}var ZC,Io,tv,ev,nu,be,Et=b(()=>{"use client";ZC=l("@lexical/react/LexicalComposerContext.js"),Io=l("react"),tv=l("react/jsx-runtime");ev=(0,Io.createContext)({editorConfig:null,field:null,uuid:null}),nu=({children:e,editorConfig:t,editorContainerRef:o,fieldProps:r,parentContext:n})=>{let[i]=(0,ZC.useLexicalComposerContext)(),[a]=(0,Io.useState)(YP()),s=(0,Io.useRef)(new Map),[d,c]=(0,Io.useState)(null),p=(0,Io.useRef)(new Set),u=(0,Io.useMemo)(()=>({blurEditor:m=>{p.current.clear()},childrenEditors:s,editor:i,editorConfig:t,editorContainerRef:o,field:r,focusEditor:m=>{let f=m.uuid;p.current.has(f)||(p.current.add(f),c(m),n?.uuid&&n.focusEditor(m),s.current.forEach((h,g)=>{h.focusEditor(m)}),p.current.clear())},focusedEditor:d,parentEditor:n,registerChild:(m,f)=>{if(!s.current.has(m)){let h=new Map(s.current);h.set(m,f),s.current=h}},unregisterChild:m=>{if(s.current.has(m)){let f=new Map(s.current);f.delete(m),s.current=f}},uuid:a}),[i,s,t,o,r,d,n,a]);return(0,tv.jsx)(ev.Provider,{value:u,children:e})},be=()=>{let e=(0,Io.useContext)(ev);if(e===void 0)throw new Error("useEditorConfigContext must be used within an EditorConfigProvider");return e}});function ov({fields:e}){for(let t in e){let o=e[t];Array.isArray(o.rows)&&"value"in o&&(o.disableFormData=!0)}return e}var rv=b(()=>{});var nv,iv,av,lv=b(()=>{Ie();nv=l("payload/shared"),iv=l("react");rv();av=e=>{let{onChange:t}=e,[o]=yl(),r=ov({fields:o}),n=(0,nv.reduceFieldsToValues)(r,!0);return(0,iv.useEffect)(()=>{t&&t({fullFieldsWithValues:r,newFormData:n})},[n,t,r]),null}});var sv,dv,cv,iu,Un,Ao,pv,mv=b(()=>{sv=l("@lexical/react/LexicalComposerContext.js"),dv=l("@payloadcms/translations");Ie();cv=l("dequal/lite"),iu=l("lexical"),Un=F(l("react"),1);lv();Ao=l("react/jsx-runtime"),pv=e=>{let{baseClass:t,field:o,formData:r,formSchema:n,nodeKey:i,reducedBlock:{labels:a},schemaPath:s}=e,{i18n:d}=M(),[c]=(0,sv.useLexicalComposerContext)(),{getDocPreferences:p,setDocFieldPreferences:u}=Ge(),[m,f]=Un.default.useState(()=>{let S=!1;return p().then(L=>{let _=L?.fields[o.name]?.collapsed;_&&_.includes(r.id)&&(S=!0,f(!0))}),S}),h=tt(),[g,x]=Un.default.useState(0),y=h&&g>0,v=[`${t}__row`,y?`${t}__row--has-errors`:`${t}__row--no-errors`].filter(Boolean).join(" "),E=(0,Un.useCallback)(({fullFieldsWithValues:S,newFormData:L})=>{L={...L,id:r.id,blockType:r.blockType};function N(_){for(let T in _){let k=_[T];Array.isArray(k)&&!k?.length?delete _[T]:k&&typeof k=="object"?N(k):k==null&&delete _[T]}}if(N(L),N(r),(0,cv.dequal)(r,L)||setTimeout(()=>{c.update(()=>{let _=(0,iu.$getNodeByKey)(i);_&&_.setFields(L)})},0),h){let _=0;for(let T of Object.values(S))T?.valid===!1&&_++;x(_)}},[c,i,h,r]),w=(0,Un.useCallback)(S=>{p().then(L=>{let _=L?.fields[o.name]?.collapsed,T=_&&_?.length?_:[];S?T.includes(r.id)||T.push(r.id):T.includes(r.id)&&T.splice(T.indexOf(r.id),1),u(o.name,{collapsed:T,hello:"hi"})})},[p,o.name,u,r.id]),C=(0,Un.useCallback)(()=>{c.update(()=>{(0,iu.$getNodeByKey)(i).remove()})},[c,i]);return(0,Ao.jsxs)(Un.default.Fragment,{children:[(0,Ao.jsx)(Ko,{className:v,collapsibleStyle:y?"error":"default",header:(0,Ao.jsxs)("div",{className:`${t}__block-header`,children:[(0,Ao.jsxs)("div",{children:[(0,Ao.jsx)(Ar,{className:`${t}__block-pill ${t}__block-pill-${r?.blockType}`,pillStyle:"white",children:typeof a.singular=="string"?(0,dv.getTranslation)(a.singular,d):"[Singular Label]"}),(0,Ao.jsx)(gi,{path:"blockName",readOnly:o?.readOnly}),y&&(0,Ao.jsx)(Rt,{count:g,i18n:d,withMessage:!0})]}),c.isEditable()&&(0,Ao.jsx)(Ve,{buttonStyle:"icon-label",className:`${t}__removeButton`,disabled:o?.readOnly,icon:"x",onClick:S=>{S.preventDefault(),C()},round:!0,tooltip:"Remove Block"})]}),isCollapsed:m,onToggle:S=>{w(S),f(S)},children:(0,Ao.jsx)(Dt,{className:`${t}__fields`,fieldMap:Array.isArray(n)?n:[],forceRender:!0,margins:"small",path:"",readOnly:!1,schemaPath:s})},0),(0,Ao.jsx)(av,{onChange:E})]})}});var uv=b(()=>{});var hv={};mr(hv,{BlockComponent:()=>XP});var Vn,fv,gv,er,jn,XP,bv=b(()=>{"use client";Ie();Vn=l("react"),fv=l("@payloadcms/translations");ru();gv=l("uuid");Et();mv();uv();er=l("react/jsx-runtime"),jn="lexical-block",XP=e=>{let{formData:t,nodeKey:o}=e,r=J(),n=tt(),{id:i}=Ge(),{path:a,schemaPath:s}=j(),{editorConfig:d,field:c}=be(),[p,u]=(0,Vn.useState)(!1),{field:{richTextComponentMap:m}}=be(),f=`lexical_internal_feature.blocks.fields.${t?.blockType}`,h=`${s}.lexical_internal_feature.blocks.${t?.blockType}`,g=d?.resolvedFeatureMap?.get("blocks")?.sanitizedClientFeatureProps?.reducedBlocks?.find(C=>C.slug===t?.blockType),x=m.get(f);(0,Vn.useEffect)(()=>{t&&(async()=>{let S=await yo({apiRoute:r.routes.api,body:{id:i,data:t,operation:"update",schemaPath:h},serverURL:r.serverURL});S&&u({...S,blockName:{initialValue:"",passesCondition:!0,valid:!0,value:t.blockName}})})()},[r.routes.api,r.serverURL,h,i]);let y=(0,Vn.useCallback)(async({formState:C})=>({...await yo({apiRoute:r.routes.api,body:{id:i,formState:C,operation:"update",schemaPath:h},serverURL:r.serverURL}),blockName:{initialValue:"",passesCondition:!0,valid:!0,value:t.blockName}}),[r.routes.api,r.serverURL,h,i,t.blockName]),{i18n:v}=M(),E=[`${jn}__row`,`${jn}__row--no-errors`].filter(Boolean).join(" "),w=(0,Vn.useMemo)(()=>g&&p!==!1?(0,er.jsx)(Vl,{beforeSubmit:[y],fields:x,initialState:p,onChange:[y],submitted:n,uuid:(0,gv.v4)(),children:(0,er.jsx)(pv,{baseClass:jn,field:c,formData:t,formSchema:Array.isArray(x)?x:[],nodeKey:o,path:`${a}.lexical_internal_feature.blocks.${t.blockType}`,reducedBlock:g,schemaPath:h})}):(0,er.jsx)(Ko,{className:E,collapsibleStyle:"default",header:(0,er.jsx)("div",{className:`${jn}__block-header`,children:(0,er.jsxs)("div",{children:[(0,er.jsx)(Ar,{className:`${jn}__block-pill ${jn}__block-pill-${t?.blockType}`,pillStyle:"white",children:typeof g.labels.singular=="string"?(0,fv.getTranslation)(g.labels.singular,v):"[Singular Label]"}),(0,er.jsx)(gi,{path:"blockName",readOnly:c?.readOnly})]})}),children:(0,er.jsx)(eo,{height:"35vh"})},0),[E,x,c,o,v,n,p,g,y,h,a]);return(0,er.jsx)("div",{className:jn+" "+jn+"-"+t.blockType,children:w})}});var __={};mr(__,{HorizontalRuleComponent:()=>_F});function _F({nodeKey:e}){let[t]=(0,C_.useLexicalComposerContext)(),[o,r,n]=(0,v_.useLexicalNodeSelection)(e),i=(0,rs.useCallback)(a=>{if(o&&(0,Kt.$isNodeSelection)((0,Kt.$getSelection)())){a.preventDefault();let s=(0,Kt.$getNodeByKey)(e);if(Ra(s))return s.remove(),!0}return!1},[o,e]);return(0,rs.useEffect)(()=>(0,Na.mergeRegister)(t.registerCommand(Kt.CLICK_COMMAND,a=>{let s=t.getElementByKey(e);return a.target===s?(a.shiftKey||n(),r(!o),!0):!1},Kt.COMMAND_PRIORITY_LOW),t.registerCommand(Kt.KEY_DELETE_COMMAND,i,Kt.COMMAND_PRIORITY_LOW),t.registerCommand(Kt.KEY_BACKSPACE_COMMAND,i,Kt.COMMAND_PRIORITY_LOW)),[n,t,o,e,i,r]),(0,rs.useEffect)(()=>{let a=t.getElementByKey(e);a!==null&&(o?(0,Na.addClassNamesToElement)(a,y_):(0,Na.removeClassNamesFromElement)(a,y_))},[t,o,e]),null}var C_,v_,Na,Kt,rs,y_,w_=b(()=>{"use client";C_=l("@lexical/react/LexicalComposerContext.js"),v_=l("@lexical/react/useLexicalNodeSelection.js"),Na=l("@lexical/utils"),Kt=l("lexical"),rs=l("react");ns();y_="selected"});function kF(){return{node:Ma()}}function Ma(){return(0,Da.$applyNodeReplacement)(new Gn)}function Ra(e){return e instanceof Gn}var k_,Da,T_,E_,wF,is,Gn,ns=b(()=>{k_=l("@lexical/utils"),Da=l("lexical"),T_=F(l("react"),1),E_=l("react/jsx-runtime"),wF=T_.lazy(()=>Promise.resolve().then(()=>(w_(),__)).then(e=>({default:e.HorizontalRuleComponent}))),is=(0,Da.createCommand)("INSERT_HORIZONTAL_RULE_COMMAND"),Gn=class e extends Da.DecoratorNode{static clone(t){return new e(t.__key)}static getType(){return"horizontalrule"}static importDOM(){return{hr:()=>({conversion:kF,priority:0})}}static importJSON(t){return Ma()}createDOM(t){let o=document.createElement("hr");return(0,k_.addClassNamesToElement)(o,t.theme.hr),o}decorate(){return(0,E_.jsx)(wF,{nodeKey:this.__key})}exportDOM(){return{element:document.createElement("hr")}}exportJSON(){return{type:"horizontalrule",version:1}}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}}});var Oa,Z_,ls,ew,tw=b(()=>{"use client";Ie();ru();Oa=l("react"),Z_=l("uuid");Et();ls=l("react/jsx-runtime"),ew=({data:e,featureKey:t,handleDrawerSubmit:o,schemaPathSuffix:r})=>{let{t:n}=M(),{id:i}=Ge(),{schemaPath:a}=j(),s=J(),[d,c]=(0,Oa.useState)(!1),{field:{richTextComponentMap:p}}=be(),u=`lexical_internal_feature.${t}.fields${r?`.${r}`:""}`,m=`${a}.lexical_internal_feature.${t}${r?`.${r}`:""}`,f=p.get(u);(0,Oa.useEffect)(()=>{(async()=>{let x=await yo({apiRoute:s.routes.api,body:{id:i,data:e??{},operation:"update",schemaPath:m},serverURL:s.serverURL});c(x)})()},[s.routes.api,s.serverURL,m,i,e]);let h=(0,Oa.useCallback)(async({formState:g})=>await yo({apiRoute:s.routes.api,body:{id:i,formState:g,operation:"update",schemaPath:m},serverURL:s.serverURL}),[s.routes.api,s.serverURL,m,i]);return d===!1?null:(0,ls.jsxs)(Vl,{beforeSubmit:[h],disableValidationOnSubmit:!0,fields:Array.isArray(f)?f:[],initialState:d,onChange:[h],onSubmit:o,uuid:(0,Z_.v4)(),children:[(0,ls.jsx)(Dt,{fieldMap:Array.isArray(f)?f:[],forceRender:!0,path:"",readOnly:!1,schemaPath:m}),(0,ls.jsx)(_p,{children:n("fields:saveChanges")})]})}});var Eu,Pi,ss=b(()=>{"use client";Ie();tw();Eu=l("react/jsx-runtime"),Pi=({className:e,data:t,drawerSlug:o,drawerTitle:r,featureKey:n,handleDrawerSubmit:i,schemaPathSuffix:a})=>(0,Eu.jsx)(Cr,{className:e,slug:o,title:r??"",children:(0,Eu.jsx)(ew,{data:t,featureKey:n,handleDrawerSubmit:i,schemaPathSuffix:a})})});var Nw=b(()=>{});var Rw={};mr(Rw,{UnknownConvertedNodeComponent:()=>JF});var hc,JF,Dw=b(()=>{Nw();hc=l("react/jsx-runtime"),JF=e=>{let{data:t}=e;return(0,hc.jsxs)("div",{children:["Unknown converted payload-plugin-lexical node: ",(0,hc.jsx)("strong",{children:t?.nodeType})]})}});var jw=b(()=>{});var Vw={};mr(Vw,{UnknownConvertedNodeComponent:()=>uS});var bc,uS,Gw=b(()=>{jw();bc=l("react/jsx-runtime"),uS=e=>{let{data:t}=e;return(0,bc.jsxs)("div",{children:["Unknown converted Slate node: ",(0,bc.jsx)("strong",{children:t?.nodeType})]})}});var Yw,Li,xc=b(()=>{Yw=l("lexical"),Li=(0,Yw.createCommand)("INSERT_RELATIONSHIP_WITH_DRAWER_COMMAND")});var Xw=b(()=>{});var n1={};mr(n1,{RelationshipComponent:()=>yS});var e1,t1,o1,r1,Ot,po,Bo,nn,Zw,xS,yS,i1=b(()=>{"use client";e1=l("@lexical/react/LexicalComposerContext.js"),t1=l("@lexical/react/useLexicalNodeSelection.js"),o1=l("@lexical/utils"),r1=l("@payloadcms/translations");Ie();Ot=l("lexical"),po=F(l("react"),1);Et();xc();Ga();Xw();Bo=l("react/jsx-runtime"),nn="lexical-relationship",Zw={depth:0},xS=e=>{let{children:t,data:{relationTo:o,value:r},nodeKey:n}=e,i=(0,po.useRef)(null),[a]=(0,e1.useLexicalComposerContext)(),[s,d,c]=(0,t1.useLexicalNodeSelection)(n),{field:p}=be(),{collections:u,routes:{api:m},serverURL:f}=J(),[h,g]=(0,po.useState)(()=>u.find(R=>R.slug===o)),{i18n:x,t:y}=M(),[v,E]=(0,po.useReducer)(R=>R+1,0),[{data:w},{setParams:C}]=ni(`${f}${m}/${h.slug}/${r}`,{initialParams:Zw}),[S,L,{closeDrawer:N}]=Nt({id:r,collectionSlug:h.slug}),_=(0,po.useCallback)(()=>{a.update(()=>{(0,Ot.$getNodeByKey)(n).remove()})},[a,n]),T=po.default.useCallback(({doc:R})=>{C({...Zw,cacheBust:v}),N(),E()},[v,C,N]),k=(0,po.useCallback)(R=>{if(s&&(0,Ot.$isNodeSelection)((0,Ot.$getSelection)())){R.preventDefault();let I=(0,Ot.$getNodeByKey)(n);if(ms(I))return I.remove(),!0}return!1},[s,n]),P=(0,po.useCallback)(R=>{let D=R;return D.target===i.current||i.current?.contains(D.target)?(D.shiftKey?d(!s):s||(c(),d(!0)),!0):!1},[s,d,c]);return(0,po.useEffect)(()=>(0,o1.mergeRegister)(a.registerCommand(Ot.CLICK_COMMAND,P,Ot.COMMAND_PRIORITY_LOW),a.registerCommand(Ot.KEY_DELETE_COMMAND,k,Ot.COMMAND_PRIORITY_LOW),a.registerCommand(Ot.KEY_BACKSPACE_COMMAND,k,Ot.COMMAND_PRIORITY_LOW)),[c,a,s,n,k,d,P]),(0,Bo.jsxs)("div",{className:[nn,s&&`${nn}--selected`].filter(Boolean).join(" "),contentEditable:!1,ref:i,children:[(0,Bo.jsxs)("div",{className:`${nn}__wrap`,children:[(0,Bo.jsx)("p",{className:`${nn}__label`,children:y("fields:labelRelationship",{label:(0,r1.getTranslation)(h.labels.singular,x)})}),(0,Bo.jsx)(L,{className:`${nn}__doc-drawer-toggler`,children:(0,Bo.jsx)("p",{className:`${nn}__title`,children:w?w[h?.admin?.useAsTitle||"id"]:r})})]}),a.isEditable()&&(0,Bo.jsxs)("div",{className:`${nn}__actions`,children:[(0,Bo.jsx)(Ve,{buttonStyle:"icon-label",className:`${nn}__swapButton`,disabled:p?.readOnly,el:"div",icon:"swap",onClick:()=>{a.dispatchCommand(Li,{replace:{nodeKey:n}})},round:!0,tooltip:y("fields:swapRelationship")}),(0,Bo.jsx)(Ve,{buttonStyle:"icon-label",className:`${nn}__removeButton`,disabled:p?.readOnly,icon:"x",onClick:R=>{R.preventDefault(),_()},round:!0,tooltip:y("fields:removeRelationship")})]}),r&&(0,Bo.jsx)(S,{onSave:T}),t]})},yS=e=>(0,Bo.jsx)(xS,{...e})});function vS(e){let t=e.getAttribute("data-lexical-relationship-id"),o=e.getAttribute("data-lexical-relationship-relationTo");return t!=null&&o!=null?{node:Ni({relationTo:o,value:t})}:null}function Ni(e){return new an({data:e})}function ms(e){return e instanceof an}var a1,l1,s1,CS,an,Ga=b(()=>{a1=l("@lexical/react/LexicalDecoratorBlockNode.js"),l1=F(l("react"),1),s1=l("react/jsx-runtime"),CS=l1.lazy(()=>Promise.resolve().then(()=>(i1(),n1)).then(e=>({default:e.RelationshipComponent})));an=class e extends a1.DecoratorBlockNode{__data;constructor({data:t,format:o,key:r}){super(o,r),this.__data=t}static clone(t){return new e({data:t.__data,format:t.__format,key:t.__key})}static getType(){return"relationship"}static importDOM(){return{div:t=>!t.hasAttribute("data-lexical-relationship-relationTo")||!t.hasAttribute("data-lexical-relationship-id")?null:{conversion:vS,priority:2}}}static importJSON(t){t.version===1&&t?.value?.id&&(t.value=t.value.id);let o={relationTo:t.relationTo,value:t.value},r=Ni(o);return r.setFormat(t.format),r}static isInline(){return!1}decorate(t,o){return(0,s1.jsx)(CS,{className:o.theme.relationship??"LexicalEditorTheme__relationship",data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportDOM(){let t=document.createElement("div");t.setAttribute("data-lexical-relationship-id",String(this.__data?.value)),t.setAttribute("data-lexical-relationship-relationTo",this.__data?.relationTo);let o=document.createTextNode(this.getTextContent());return t.append(o),{element:t}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"relationship",version:2}}getData(){return this.getLatest().__data}getTextContent(){return`${this.__data?.relationTo} relation to ${this.__data?.value}`}setData(t){let o=this.getWritable();o.__data=t}}});var yc,_S,Wa,Cc=b(()=>{Ie();yc=F(l("react"),1),_S=(e,t)=>e.filter(({slug:o,admin:{enableRichTextRelationship:r},upload:n})=>t.visibleEntities.collections.includes(o)?t?.uploads?r&&!!n:n?!1:r:!1),Wa=e=>{let{children:t,uploads:o=!1,...r}=e,{collections:n}=J(),{user:i}=ut(),{visibleEntities:a}=Ym(),[s]=yc.useState(()=>_S(n,{uploads:o,user:i,visibleEntities:a}).map(({slug:d})=>d));return s.length?yc.cloneElement(t,{...r,enabledCollectionSlugs:s}):null}});var J1,Mi,Ec=b(()=>{"use client";J1=l("lexical"),Mi=(0,J1.createCommand)("INSERT_UPLOAD_WITH_DRAWER_COMMAND")});var Y1=b(()=>{});var ok={};mr(ok,{UploadComponent:()=>WS});var Z1,ek,tk,qu,Ft,uo,Ze,Uo,X1,GS,WS,rk=b(()=>{"use client";Z1=l("@lexical/react/LexicalComposerContext.js"),ek=l("@lexical/react/useLexicalNodeSelection.js"),tk=l("@lexical/utils"),qu=l("@payloadcms/translations");Ie();Ft=l("lexical"),uo=l("react");Et();ss();Cc();Ec();Xa();Y1();Ze=l("react/jsx-runtime"),Uo="lexical-upload",X1={depth:0},GS=e=>{let{data:{fields:t,relationTo:o,value:r},nodeKey:n}=e,{collections:i,routes:{api:a},serverURL:s}=J(),d=(0,uo.useRef)(null),{closeModal:c}=(0,Mo.useModal)(),[p]=(0,Z1.useLexicalComposerContext)(),[u,m,f]=(0,ek.useLexicalNodeSelection)(n),{editorConfig:h,field:g}=be(),{i18n:x,t:y}=M(),[v,E]=(0,uo.useReducer)(B=>B+1,0),[w]=(0,uo.useState)(()=>i.find(B=>B.slug===o)),C=si("upload-drawer"),[S,L,{closeDrawer:N}]=Nt({id:r,collectionSlug:w.slug}),[{data:_},{setParams:T}]=ni(`${s}${a}/${w.slug}/${r}`,{initialParams:X1}),k=_?.thumbnailURL||_?.url,P=(0,uo.useCallback)(()=>{p.update(()=>{(0,Ft.$getNodeByKey)(n).remove()})},[p,n]),R=(0,uo.useCallback)(B=>{T({...X1,cacheBust:v}),E(),N()},[T,v,N]),D=(0,uo.useCallback)(B=>{if(u&&(0,Ft.$isNodeSelection)((0,Ft.$getSelection)())){B.preventDefault();let $=(0,Ft.$getNodeByKey)(n);if(gs($))return $.remove(),!0}return!1},[u,n]),I=(0,uo.useCallback)(B=>B.target===d.current||d.current?.contains(B.target)?(B.shiftKey?m(!u):u||(f(),m(!0)),!0):!1,[u,m,f]);(0,uo.useEffect)(()=>(0,tk.mergeRegister)(p.registerCommand(Ft.CLICK_COMMAND,I,Ft.COMMAND_PRIORITY_LOW),p.registerCommand(Ft.KEY_DELETE_COMMAND,D,Ft.COMMAND_PRIORITY_LOW),p.registerCommand(Ft.KEY_BACKSPACE_COMMAND,D,Ft.COMMAND_PRIORITY_LOW)),[f,p,u,n,D,m,I]);let A=(h?.resolvedFeatureMap?.get("upload")?.sanitizedClientFeatureProps).collections?.[w.slug]?.hasExtraFields,O=(0,uo.useCallback)((B,$)=>{p.update(()=>{let H=(0,Ft.$getNodeByKey)(n);if(H){let te={...H.getData(),fields:$};H.setData(te)}}),c(C)},[c,p,C,n]);return(0,Ze.jsxs)("div",{className:[Uo,u&&`${Uo}--selected`].filter(Boolean).join(" "),contentEditable:!1,ref:d,children:[(0,Ze.jsxs)("div",{className:`${Uo}__card`,children:[(0,Ze.jsxs)("div",{className:`${Uo}__topRow`,children:[(0,Ze.jsx)("div",{className:`${Uo}__thumbnail`,children:k?(0,Ze.jsx)("img",{alt:_?.filename,"data-lexical-upload-id":r,"data-lexical-upload-relation-to":o,src:k}):(0,Ze.jsx)(Ol,{})}),(0,Ze.jsxs)("div",{className:`${Uo}__topRowRightPanel`,children:[(0,Ze.jsx)("div",{className:`${Uo}__collectionLabel`,children:(0,qu.getTranslation)(w.labels.singular,x)}),p.isEditable()&&(0,Ze.jsxs)("div",{className:`${Uo}__actions`,children:[A?(0,Ze.jsx)(No,{className:`${Uo}__upload-drawer-toggler`,disabled:g?.readOnly,slug:C,children:(0,Ze.jsx)(Ve,{buttonStyle:"icon-label",el:"div",icon:"edit",onClick:B=>{B.preventDefault()},round:!0,tooltip:y("fields:editRelationship")})}):null,(0,Ze.jsx)(Ve,{buttonStyle:"icon-label",disabled:g?.readOnly,el:"div",icon:"swap",onClick:()=>{p.dispatchCommand(Mi,{replace:{nodeKey:n}})},round:!0,tooltip:y("fields:swapUpload")}),(0,Ze.jsx)(Ve,{buttonStyle:"icon-label",className:`${Uo}__removeButton`,disabled:g?.readOnly,icon:"x",onClick:B=>{B.preventDefault(),P()},round:!0,tooltip:y("fields:removeUpload")})]})]})]}),(0,Ze.jsx)("div",{className:`${Uo}__bottomRow`,children:(0,Ze.jsx)(L,{className:`${Uo}__doc-drawer-toggler`,children:(0,Ze.jsx)("strong",{children:_?.filename})})})]}),r&&(0,Ze.jsx)(S,{onSave:R}),A?(0,Ze.jsx)(Pi,{data:t,drawerSlug:C,drawerTitle:y("general:editLabel",{label:(0,qu.getTranslation)(w.labels.singular,x)}),featureKey:"upload",handleDrawerSubmit:O,schemaPathSuffix:w.slug}):null]})},WS=e=>(0,Ze.jsx)(Wa,{...e,uploads:!0,children:(0,Ze.jsx)(GS,{...e})})});function qS(e){return e.parentElement!=null&&e.parentElement.tagName==="LI"&&e.previousSibling===null&&e.getAttribute("aria-roledescription")==="checkbox"}function QS(e){if(e.hasAttribute("data-lexical-upload-relation-to")&&e.hasAttribute("data-lexical-upload-id")){let o=e.getAttribute("data-lexical-upload-id"),r=e.getAttribute("data-lexical-upload-relation-to");if(o!=null&&r!=null)return{node:Ii({data:{fields:{},relationTo:r,value:o}})}}let t=e;return t.src.startsWith("file:///")||qS(t),null}function Ii({data:e}){return e?.id||(e.id=new Qu.default.default().toHexString()),(0,ik.$applyNodeReplacement)(new dn({data:e}))}function gs(e){return e instanceof dn}var nk,Qu,ik,ak,lk,KS,dn,Xa=b(()=>{nk=l("@lexical/react/LexicalDecoratorBlockNode.js"),Qu=F(l("bson-objectid"),1),ik=l("lexical"),ak=F(l("react"),1),lk=l("react/jsx-runtime"),KS=ak.lazy(()=>Promise.resolve().then(()=>(rk(),ok)).then(e=>({default:e.UploadComponent})));dn=class e extends nk.DecoratorBlockNode{__data;constructor({data:t,format:o,key:r}){super(o,r),this.__data=t}static clone(t){return new e({data:t.__data,format:t.__format,key:t.__key})}static getType(){return"upload"}static importDOM(){return{img:t=>({conversion:QS,priority:0})}}static importJSON(t){t.version===1&&t?.value?.id&&(t.value=t.value.id),t.version===2&&!t?.id&&(t.id=new Qu.default.default().toHexString(),t.version=3);let o={id:t.id,fields:t.fields,relationTo:t.relationTo,value:t.value},r=Ii({data:o});return r.setFormat(t.format),r}static isInline(){return!1}decorate(){return(0,lk.jsx)(KS,{data:this.__data,format:this.__format,nodeKey:this.getKey()})}exportDOM(){let t=document.createElement("img");return t.setAttribute("data-lexical-upload-id",String(this.__data?.value)),t.setAttribute("data-lexical-upload-relation-to",this.__data?.relationTo),{element:t}}exportJSON(){return{...super.exportJSON(),...this.getData(),type:"upload",version:3}}getData(){return this.getLatest().__data}setData(t){let o=this.getWritable();o.__data=t}updateDOM(){return!1}}});var Yu,Ai,gk=b(()=>{Yu=l("react/jsx-runtime"),Ai=({anchorElem:e,clientProps:t,plugin:o})=>o.position==="floatingAnchorElem"?o.Component&&(0,Yu.jsx)(o.Component,{anchorElem:e,clientProps:t}):o.Component&&(0,Yu.jsx)(o.Component,{clientProps:t})});var hk=b(()=>{});var bk,yk,xk,Ck=b(()=>{"use client";bk=l("@lexical/react/LexicalMarkdownShortcutPlugin.js");Et();yk=l("react/jsx-runtime"),xk=()=>{let{editorConfig:e}=be();return(0,yk.jsx)(bk.MarkdownShortcutPlugin,{transformers:e.features.markdownTransformers})}});function e2(e,t,o){let r=o;for(let n=r;n<=t.length;n++)e.substring(e.length-n)===t.substring(0,n)&&(r=n);return r}function t2(e){let t=(0,qe.$getSelection)();if(!(0,qe.$isRangeSelection)(t)||!t.isCollapsed())return null;let o=t.anchor;if(o.type!=="text")return null;let r=o.getNode();if(!r.isSimpleText())return null;let n=o.offset,i=r.getTextContent().slice(0,n),a=e.replaceableString.length,s=e2(i,e.matchingString,a),d=n-s;if(d<0)return null;let c;return d===0?[c]=r.splitText(n):[,c]=r.splitText(d,n),c}function o2(e,t){let o=getComputedStyle(e),r=o.position==="absolute",n=t?/(auto|scroll|hidden)/:/(auto|scroll)/;if(o.position==="fixed")return document.body;for(let i=e;i=i.parentElement;)if(o=getComputedStyle(i),!(r&&o.position==="static")&&n.test(o.overflow+o.overflowY+o.overflowX))return i;return document.body}function _k(e,t){let o=e.getBoundingClientRect(),r=t.getBoundingClientRect();return o.top>r.top&&o.top<r.bottom}function r2(e,t,o,r){let[n]=(0,Zu.useLexicalComposerContext)();(0,it.useEffect)(()=>{if(t!=null&&e!=null){let i=n.getRootElement(),a=i!=null?o2(i,!1):document.body,s=!1,d=_k(t,a),c=function(){s||(window.requestAnimationFrame(function(){o(),s=!1}),s=!0);let u=_k(t,a);u!==d&&(d=u,r?.(u))},p=new ResizeObserver(o);return window.addEventListener("resize",o),document.addEventListener("scroll",c,{capture:!0,passive:!0}),p.observe(t),()=>{p.unobserve(t),window.removeEventListener("resize",o),document.removeEventListener("scroll",c,!0)}}},[t,n,r,o,e])}function kk({anchorElementRef:e,close:t,editor:o,groups:r,menuRenderFn:n,onSelectItem:i,resolution:a,shouldSplitNodeWithQuery:s=!1}){let[d,c]=(0,it.useState)(null),p=a.match&&a.match.matchingString||"",u=(0,it.useCallback)(g=>{let x=o.getRootElement();x!==null&&(x.setAttribute("aria-activedescendant",`${ZS}__item-${g.key}`),c(g.key))},[o]),m=(0,it.useCallback)(()=>{if(r!==null&&p!=null){let g=r.flatMap(x=>x.items);if(g.length){let x=g[0];u(x)}}},[r,u,p]);(0,it.useEffect)(()=>{m()},[p,m]);let f=(0,it.useCallback)(g=>{o.update(()=>{let x=a.match!=null&&s?t2(a.match):null;i(g,x,t,a.match?a.match.matchingString:"")})},[o,s,a.match,i,t]);(0,it.useEffect)(()=>()=>{let g=o.getRootElement();g!==null&&g.removeAttribute("aria-activedescendant")},[o]),(0,it.useLayoutEffect)(()=>{r===null?c(null):d===null&&m()},[r,d,u,m]),(0,it.useEffect)(()=>(0,Xu.mergeRegister)(o.registerCommand(wk,({item:g})=>g.ref&&g.ref.current!=null?(vk(g.ref.current),!0):!1,qe.COMMAND_PRIORITY_LOW)),[o,u]),(0,it.useEffect)(()=>(0,Xu.mergeRegister)(o.registerCommand(qe.KEY_ARROW_DOWN_COMMAND,g=>{let x=g;if(r!==null&&r.length&&d!==null){let y=r.flatMap(C=>C.items),v=y.findIndex(C=>C.key===d),E=v!==y.length-1?v+1:0,w=y[E];u(w),w.ref!=null&&w.ref.current&&o.dispatchCommand(wk,{index:E,item:w}),x.preventDefault(),x.stopImmediatePropagation()}return!0},qe.COMMAND_PRIORITY_LOW),o.registerCommand(qe.KEY_ARROW_UP_COMMAND,g=>{let x=g;if(r!==null&&r.length&&d!==null){let y=r.flatMap(C=>C.items),v=y.findIndex(C=>C.key===d),E=v!==0?v-1:y.length-1,w=y[E];u(w),w.ref!=null&&w.ref.current&&vk(w.ref.current),x.preventDefault(),x.stopImmediatePropagation()}return!0},qe.COMMAND_PRIORITY_LOW),o.registerCommand(qe.KEY_ESCAPE_COMMAND,g=>{let x=g;return x.preventDefault(),x.stopImmediatePropagation(),t(),!0},qe.COMMAND_PRIORITY_LOW),o.registerCommand(qe.KEY_TAB_COMMAND,g=>{let x=g;if(r===null||d===null)return!1;let v=r.flatMap(E=>E.items).find(E=>E.key===d);return v?(x.preventDefault(),x.stopImmediatePropagation(),f(v),!0):!1},qe.COMMAND_PRIORITY_LOW),o.registerCommand(qe.KEY_ENTER_COMMAND,g=>{if(r===null||d===null)return!1;let y=r.flatMap(v=>v.items).find(v=>v.key===d);return y?(g!==null&&(g.preventDefault(),g.stopImmediatePropagation()),f(y),!0):!1},qe.COMMAND_PRIORITY_LOW)),[f,t,o,r,d,u]);let h=(0,it.useMemo)(()=>({groups:r,selectItemAndCleanUp:f,selectedItemKey:d,setSelectedItemKey:c}),[f,d,r]);return n(e,h,a.match?a.match.matchingString:"")}function Tk(e,t,o,r){let[n]=(0,Zu.useLexicalComposerContext)(),i=(0,it.useRef)(document.createElement("div")),a=(0,it.useCallback)(()=>{let d=n.getRootElement(),c=i.current,p=32,u=c.firstChild;if(d!==null&&t!==null){let{height:m,width:f}=t.getRect(),{left:h,top:g}=t.getRect(),x=g;if(g-=e.getBoundingClientRect().top+window.scrollY,h-=e.getBoundingClientRect().left+window.scrollX,c.style.left=`${h+window.scrollX}px`,c.style.height=`${m}px`,c.style.width=`${f}px`,u!==null){let y=u.getBoundingClientRect(),v=y.height,E=y.width,w=d.getBoundingClientRect();h+E>w.right&&(c.style.left=`${w.right-E+window.scrollX}px`);let C=x+v+p>window.innerHeight,S=x<0;C&&!S?c.style.top=`${g+p-v+window.scrollY-(m+24)}px`:c.style.top=`${g+window.scrollY+p}px`}c.isConnected||(r!=null&&(c.className=r),c.setAttribute("aria-label","Slash menu"),c.setAttribute("id","slash-menu"),c.setAttribute("role","listbox"),c.style.display="block",c.style.position="absolute",e.append(c)),i.current=c,d.setAttribute("aria-controls","slash-menu")}},[n,t,r,e]);(0,it.useEffect)(()=>{let d=n.getRootElement();if(t!==null)return a(),()=>{d!==null&&d.removeAttribute("aria-controls");let c=i.current;c!==null&&c.isConnected&&c.remove()}},[n,a,t]);let s=(0,it.useCallback)(d=>{t!==null&&(d||o(null))},[t,o]);return r2(t,i.current,a,s),i}var Zu,Xu,qe,it,ZS,vk,wk,Ek=b(()=>{"use client";Zu=l("@lexical/react/LexicalComposerContext.js"),Xu=l("@lexical/utils"),qe=l("lexical"),it=l("react"),ZS="slash-menu-popup",vk=e=>{let t=document.getElementById("slash-menu");if(!t)return;let o=t.getBoundingClientRect();o.top+o.height>window.innerHeight&&t.scrollIntoView({block:"center"}),o.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};wk=(0,qe.createCommand)("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND")});function n2(e){let t=e.anchor;if(t.type!=="text")return null;let o=t.getNode();if(!o.isSimpleText())return null;let r=t.offset;return o.getTextContent().slice(0,r)}function Pk(e,t,o){let r=o.getSelection();if(r===null||!r.isCollapsed)return!1;let n=r.anchorNode,i=e,a=r.anchorOffset;if(n==null||a==null)return!1;try{t.setStart(n,i),t.setEnd(n,a>1?a:1)}catch{return!1}return!0}function i2(e){let t=null;return e.getEditorState().read(()=>{let o=(0,fo.$getSelection)();(0,fo.$isRangeSelection)(o)&&(t=n2(o))}),t}function Fk(e,t){return t!==0?!1:e.getEditorState().read(()=>{let o=(0,fo.$getSelection)();if((0,fo.$isRangeSelection)(o)){let i=o.anchor.getNode().getPreviousSibling();return(0,fo.$isTextNode)(i)&&i.isTextEntity()}return!1})}function Sk(e){ef.startTransition?ef.startTransition(e):e()}function Dk({anchorClassName:e,anchorElem:t,groups:o,menuRenderFn:r,onClose:n,onOpen:i,onQueryChange:a,onSelectItem:s,triggerFn:d}){let[c]=(0,Lk.useLexicalComposerContext)(),[p,u]=(0,Yn.useState)(null),m=Tk(t,p,u,e),f=(0,Yn.useCallback)(()=>{u(null),n!=null&&p!==null&&n()},[n,p]),h=(0,Yn.useCallback)(g=>{u(g),i!=null&&p===null&&i(g)},[i,p]);return(0,Yn.useEffect)(()=>(0,Nk.mergeRegister)(c.registerCommand(Lc,({node:g})=>(c.getEditorState().read(()=>{let x={leadOffset:0,matchingString:"",replaceableString:""};if(x!==null&&!Fk(c,x.leadOffset)&&g!==null){let y=c._window??window,v=y.document.createRange();Pk(x.leadOffset,v,y)!==null&&Sk(()=>h({getRect:()=>v.getBoundingClientRect(),match:x}));return}}),!0),fo.COMMAND_PRIORITY_LOW)),[c,h]),(0,Yn.useEffect)(()=>{let g=()=>{c.getEditorState().read(()=>{let y=c._window??window,v=y.document.createRange(),E=(0,fo.$getSelection)(),w=i2(c);if(!(0,fo.$isRangeSelection)(E)||!E.isCollapsed()||w===null||v===null){f();return}let C=d({editor:c,query:w});if(a(C?C.matchingString:null),C!==null&&!Fk(c,C.leadOffset)&&Pk(C.leadOffset,v,y)!==null){Sk(()=>h({getRect:()=>v.getBoundingClientRect(),match:C}));return}f()})},x=c.registerUpdateListener(g);return()=>{x()}},[c,d,a,p,f,h]),p===null||c===null?null:(0,Mk.jsx)(kk,{anchorElementRef:m,close:f,editor:c,groups:o,menuRenderFn:r,onSelectItem:s,resolution:p,shouldSplitNodeWithQuery:!0})}var Lk,Nk,fo,Yn,ef,Mk,Rk,Lc,hs=b(()=>{"use client";Lk=l("@lexical/react/LexicalComposerContext.js"),Nk=l("@lexical/utils"),fo=l("lexical"),Yn=l("react"),ef=F(l("react"),1);Ek();Mk=l("react/jsx-runtime"),Rk=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`;Lc=(0,fo.createCommand)("ENABLE_SLASH_MENU_COMMAND")});var Ik=b(()=>{});function Ok(e,{maxLength:t=75,minLength:o=1}){return(0,Ak.useCallback)(({query:r})=>{let n="[^"+e+Rk+"\\s]",a=new RegExp("(^|\\s|\\()(["+e+"]((?:"+n+"){0,"+t+"}))$").exec(r);if(a!==null){let s=a[1],d=a[3];if(d.length>=o)return{leadOffset:a.index+s.length,matchingString:d,replaceableString:a[2]}}return null},[t,o,e])}var Ak,$k=b(()=>{Ak=l("react");hs()});function a2({isSelected:e,item:t,onClick:o,onMouseEnter:r}){let{i18n:n}=M(),i=`${cn}__item ${cn}__item-${t.key}`;e&&(i+=` ${cn}__item--selected`);let a=t.key;return t.label&&(a=typeof t.label=="function"?t.label({i18n:n}):t.label),a.length>25&&(a=a.substring(0,25)+"..."),(0,dr.jsxs)("button",{"aria-selected":e,className:i,id:cn+"__item-"+t.key,onClick:o,onMouseEnter:r,ref:t.ref,role:"option",tabIndex:-1,type:"button",children:[t?.Icon&&(0,dr.jsx)(t.Icon,{}),(0,dr.jsx)("span",{className:`${cn}__item-text`,children:a})]},t.key)}function Uk({anchorElem:e=document.body}){let[t]=(0,Bk.useLexicalComposerContext)(),[o,r]=(0,Oi.useState)(null),{editorConfig:n}=be(),{i18n:i}=M(),a=Ok("/",{minLength:0}),s=(0,Oi.useCallback)(()=>{let p=[];for(let u of n.features.slashMenu.dynamicGroups){let m=u({editor:t,queryString:o});p=p.concat(m)}return p},[t,o,n?.features]),d=(0,Oi.useMemo)(()=>{let p=[];for(let u of n?.features.slashMenu.groups??[])p.push(u);if(o){p=p.map(m=>{let f=m.items.filter(h=>{let g=h.key;return h.label&&(g=typeof h.label=="function"?h.label({i18n:i}):h.label),new RegExp(o,"gi").exec(g)?!0:h.keywords!=null?h.keywords.some(x=>new RegExp(o,"gi").exec(x)):!1});return f.length?{...m,items:f}:null}),p=p.filter(m=>m!=null);let u=s();for(let m of u){let f=p.find(h=>h.key===m.key);f?p=p.filter(h=>h.key!==m.key):f={...m,items:[]},f?.items?.length&&(f.items=f.items.concat(f.items)),p.push(f)}}return p},[s,o,n?.features,i]),c=(0,Oi.useCallback)((p,u,m,f)=>{u&&t.update(()=>{u.remove()}),p.onSelect({editor:t,queryString:f}),m()},[t]);return(0,dr.jsx)(Hk.Fragment,{children:(0,dr.jsx)(Dk,{anchorElem:e,groups:d,menuRenderFn:(p,{selectItemAndCleanUp:u,selectedItemKey:m,setSelectedItemKey:f})=>p.current&&d.length?zk.createPortal((0,dr.jsx)("div",{className:cn,children:d.map(h=>{let g=h.key;return h.label&&(g=typeof h.label=="function"?h.label({i18n:i}):h.label),(0,dr.jsxs)("div",{className:`${cn}__group ${cn}__group-${h.key}`,children:[(0,dr.jsx)("div",{className:`${cn}__group-title`,children:g}),h.items.map((x,y)=>(0,dr.jsx)(a2,{index:y,isSelected:m===x.key,item:x,onClick:()=>{f(x.key),u(x)},onMouseEnter:()=>{f(x.key)}},x.key))]},h.key)})}),p.current):null,onQueryChange:r,onSelectItem:c,triggerFn:a})})}var Bk,Oi,Hk,zk,dr,cn,jk=b(()=>{"use client";Bk=l("@lexical/react/LexicalComposerContext.js");Ie();Oi=l("react"),Hk=F(l("react"),1),zk=F(l("react-dom"),1);Et();hs();Ik();$k();dr=l("react/jsx-runtime"),cn="slash-menu-popup"});function $i(e){return e instanceof HTMLElement}var Nc=b(()=>{});function tf(e){return e instanceof jo}var jo,el=b(()=>{jo=class{_x;_y;constructor(t,o){this._x=t,this._y=o}calcDeltaXTo({x:t}){return this.x-t}calcDeltaYTo({y:t}){return this.y-t}calcDistanceTo(t){return Math.sqrt(Math.pow(this.calcDeltaXTo(t),2)+Math.pow(this.calcDeltaYTo(t),2))}calcHorizontalDistanceTo(t){return Math.abs(this.calcDeltaXTo(t))}calcVerticalDistance(t){return Math.abs(this.calcDeltaYTo(t))}equals({x:t,y:o}){return this.x===t&&this.y===o}get x(){return this._x}get y(){return this._y}}});var tl,of=b(()=>{tl=(e,t,o,r,n=50,i=25)=>{let a=0;if(e&&!e.contains(r)){let{bottom:s,left:d,right:c,top:p}=e.getBoundingClientRect(),u=p+window.scrollY,m=s+window.scrollY;if(o<u-i||o>m+i||t<d-n||t>c+n)return-1;(t<d||t>c)&&(a=t<d?t-d:t-c)}return a}});var bs,rf=b(()=>{el();bs=class e{_bottom;_left;_right;_top;constructor(t,o,r,n){let[i,a]=o<=n?[o,n]:[n,o],[s,d]=t<=r?[t,r]:[r,t];this._top=i,this._right=d,this._left=s,this._bottom=a}static fromDOM(t){let{height:o,left:r,top:n,width:i}=t.getBoundingClientRect();return e.fromLWTH(r,i,n,o)}static fromDOMRect(t){let{height:o,left:r,top:n,width:i}=t;return e.fromLWTH(r,i,n,o)}static fromLTRB(t,o,r,n){return new e(t,o,r,n)}static fromLWTH(t,o,r,n){return new e(t,r,t+o,r+n)}static fromPoints(t,o){let{x:r,y:n}=t,{x:i,y:a}=o;return e.fromLTRB(r,n,i,a)}contains(t){if(tf(t)){let{x:a,y:s}=t,d=s<this._top,c=s>this._bottom,p=a<this._left,u=a>this._right;return{reason:{isOnBottomSide:c,isOnLeftSide:p,isOnRightSide:u,isOnTopSide:d},result:!d&&!c&&!p&&!u}}let{bottom:o,left:r,right:n,top:i}=t;return i>=this._top&&i<=this._bottom&&o>=this._top&&o<=this._bottom&&r>=this._left&&r<=this._right&&n>=this._left&&n<=this._right}distanceFromPoint(t){let o=this.contains(t);if(o.result)return{distance:0,isOnBottomSide:o.reason.isOnBottomSide,isOnLeftSide:o.reason.isOnLeftSide,isOnRightSide:o.reason.isOnRightSide,isOnTopSide:o.reason.isOnTopSide};let r=0,n=0;return t.x<this._left?r=this._left-t.x:t.x>this._right&&(r=t.x-this._right),t.y<this._top?n=this._top-t.y:t.y>this._bottom&&(n=t.y-this._bottom),{distance:Math.sqrt(r*r+n*n),isOnBottomSide:t.y>this._bottom,isOnLeftSide:t.x<this._left,isOnRightSide:t.x>this._right,isOnTopSide:t.y<this._top}}equals({bottom:t,left:o,right:r,top:n}){return n===this._top&&t===this._bottom&&o===this._left&&r===this._right}generateNewRect({bottom:t=this.bottom,left:o=this.left,right:r=this.right,top:n=this.top}){return new e(o,n,r,t)}intersectsWith(t){let{height:o,left:r,top:n,width:i}=t,{height:a,left:s,top:d,width:c}=this,p=r+i>=s+c?r+i:s+c,u=n+o>=d+a?n+o:d+a,m=r<=s?r:s,f=n<=d?n:d;return p-m<=i+c&&u-f<=o+a}get bottom(){return this._bottom}get height(){return Math.abs(this._bottom-this._top)}get left(){return this._left}get right(){return this._right}get top(){return this._top}get width(){return Math.abs(this._left-this._right)}}});function Xn(e){let t=e.getBoundingClientRect(),o=getComputedStyle(e).getPropertyValue("transform");if(!o||o==="none")return t;let r=o.split(",").pop();return t.y=t.y-Number(r.replace(")","")),t}var Rc=b(()=>{});function Dc(e){let t=(d,c)=>d?parseFloat(window.getComputedStyle(d)[c]):0,{marginBottom:o,marginTop:r}=window.getComputedStyle(e),n=t(e.previousElementSibling,"marginBottom"),i=t(e.nextElementSibling,"marginTop"),a=Math.max(parseFloat(r),n);return{marginBottom:Math.max(parseFloat(o),i),marginTop:a}}var nf=b(()=>{});function Bi(e){return e.getEditorState().read(()=>(0,Vk.$getRoot)().getChildrenKeys())}var Vk,Mc=b(()=>{Vk=l("lexical")});function d2(e,t,o=20){let r=e.x-t.x,n=e.y-t.y;return r*r+n*n<=o*o}function ol(e){let{anchorElem:t,cache_threshold:o=20,editor:r,fuzzy:n=!1,horizontalOffset:i=0,point:{x:a,y:s},startIndex:d=0,useEdgeAsDefault:c=!1,verbose:p=!1}=e;if(o>0&&pn.props&&pn.result&&pn.props.fuzzy===e.fuzzy&&pn.props.horizontalOffset===e.horizontalOffset&&pn.props.useEdgeAsDefault===e.useEdgeAsDefault&&d2(pn.props.point,e.point,o))return pn.result;let u=t.getBoundingClientRect(),m=Bi(r),f={blockElem:null,blockNode:null,distance:1/0,foundAtIndex:-1,isFoundNodeEmptyParagraph:!1};return r.getEditorState().read(()=>{if(c){let[x,y]=[r.getElementByKey(m[0]),r.getElementByKey(m[m.length-1])],[v,E]=[Xn(x),Xn(y)];if(v&&E&&(s<v.top?(f.blockElem=x,f.distance=v.top-s,f.blockNode=(0,xs.$getNodeByKey)(m[0]),f.foundAtIndex=0):s>E.bottom&&(f.distance=s-E.bottom,f.blockNode=(0,xs.$getNodeByKey)(m[m.length-1]),f.blockElem=y,f.foundAtIndex=m.length-1),f?.blockElem))return{blockElem:null,isFoundNodeEmptyParagraph:!1}}let h=d,g=Gk;for(;h>=0&&h<m.length;){let x=m[h],y=r.getElementByKey(x);if(y===null)break;let v=new jo(a+i,s),E=bs.fromDOMRect(Xn(y)),{marginBottom:w,marginTop:C}=Dc(y),S=E.generateNewRect({bottom:E.bottom+w,left:u.left,right:u.right,top:E.top-C}),{distance:L,isOnBottomSide:N,isOnTopSide:_}=S.distanceFromPoint(v);if(L===0){f.blockElem=y,f.blockNode=(0,xs.$getNodeByKey)(x),f.foundAtIndex=h,f.distance=L,f.blockNode&&f.blockNode.getType()==="paragraph"&&f.blockNode.getTextContent()===""&&(!n&&!e.returnEmptyParagraphs&&(f.blockElem=null,f.blockNode=null),f.isFoundNodeEmptyParagraph=!0);break}else n&&L<f.distance&&(f.blockElem=y,f.blockNode=(0,xs.$getNodeByKey)(x),f.distance=L,f.foundAtIndex=h);g===Gk&&(_?g=s2:N?g=l2:g=1/0),h+=g}}),pn.props=e,pn.result={blockElem:f.blockElem,blockNode:f.blockNode,foundAtIndex:f.foundAtIndex,isFoundNodeEmptyParagraph:f.isFoundNodeEmptyParagraph},{blockElem:f.blockElem,blockNode:f.blockNode,foundAtIndex:f.foundAtIndex,isFoundNodeEmptyParagraph:f.isFoundNodeEmptyParagraph}}var xs,l2,s2,Gk,pn,af=b(()=>{xs=l("lexical");el();rf();Rc();nf();Mc();l2=1,s2=-1,Gk=0,pn={props:null,result:null}});function Ic(e,t){return!!e.closest(`.${t}`)}var lf=b(()=>{});function Wk(e){if(!e||c2.includes(e.tagName)||e.offsetHeight===0||e.offsetWidth===0)return!1;let t=window.getComputedStyle(e);return!(t.display==="table-cell"||t.position==="absolute"||t.visibility==="hidden"||t.opacity==="0")}var c2,Kk=b(()=>{c2=["IMG","INPUT","TEXTAREA","SELECT","BUTTON","VIDEO","OBJECT","EMBED","IFRAME","HR"]});function Ac(e,t,o,r=0){if(!e){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}let n=e.getBoundingClientRect(),i=window.getComputedStyle(e),a=t.getBoundingClientRect(),s=o.getBoundingClientRect(),d;if(n.height<60)d=n.top-a.height/2-s.top+n.height/2-1;else{let u=Wk(e)?parseInt(i.lineHeight,10):0;d=n.top+(u-a.height)/2-s.top-1}let p=r;t.style.opacity="1",t.style.transform=`translate(${p}px, ${d}px)`}var sf=b(()=>{Kk()});var qk=b(()=>{});function m2(e){return e===0?1/0:Oc>=0&&Oc<e?Oc:Math.floor(e/2)}function u2(e,t,o){let r=t.parentElement,{editorConfig:n}=be(),i=n?.admin?.hideGutter?-24:12,a=(0,mn.useRef)(null),[s,d]=(0,mn.useState)(null);(0,mn.useEffect)(()=>{function p(u){let m=u.target;if(!$i(m))return;let f=tl(r,u.pageX,u.pageY,m);if(f===-1){d(null);return}if(Ic(m,p2))return;let h=Bi(e),{blockElem:g,blockNode:x,foundAtIndex:y}=ol({anchorElem:t,cache_threshold:0,editor:e,horizontalOffset:-f,point:new jo(u.x,u.y),returnEmptyParagraphs:!0,startIndex:m2(h.length),useEdgeAsDefault:!1});Oc=y,g&&(s?.node!==x||s?.elem!==g)&&d({elem:g,node:x})}return document?.addEventListener("mousemove",p),()=>{document?.removeEventListener("mousemove",p)}},[r,t,e,s]),(0,mn.useEffect)(()=>{a.current&&s?.node&&Ac(s?.elem,a.current,t,i)},[t,s,i]);let c=(0,mn.useCallback)(p=>{let u=s;u?.node&&(e.update(()=>{let m=!0;if((u.node.getType()!=="paragraph"||u.node.getTextContent()!=="")&&(m=!1),!m){let f=(0,Jk.$createParagraphNode)();u.node.insertAfter(f),setTimeout(()=>{u={elem:e.getElementByKey(f.getKey()),node:f},d(u)},0)}}),setTimeout(()=>{e.update(()=>{e.focus(),u.node&&"select"in u.node&&typeof u.node.select=="function"&&u.node.select()})},1),setTimeout(()=>{e.dispatchCommand(Lc,{node:u.node})},2),p.stopPropagation(),p.preventDefault())},[e,s]);return(0,Xk.createPortal)((0,$c.jsx)(Yk.Fragment,{children:(0,$c.jsx)("button",{className:"icon add-block-menu",onClick:p=>{c(p)},ref:a,type:"button",children:(0,$c.jsx)("div",{className:o?"icon":""})})}),t)}function Zk({anchorElem:e=document.body}){let[t]=(0,Qk.useLexicalComposerContext)();return u2(t,e,t._editable)}var Qk,Jk,Yk,mn,Xk,$c,p2,Oc,eT=b(()=>{"use client";Qk=l("@lexical/react/LexicalComposerContext.js"),Jk=l("lexical"),Yk=F(l("react"),1),mn=l("react"),Xk=l("react-dom");Et();Nc();el();hs();of();af();Mc();lf();sf();qk();$c=l("react/jsx-runtime"),p2="add-block-menu",Oc=1/0});var tT=b(()=>{});function oT(e,t,o){if(!e.current)return;let{left:r,top:n}=o.getBoundingClientRect(),i=Xn(t),a=i.width,s=i.height,d=i.top-n,c=i.left-r;e.current.style.border="2px solid green",e.current.style.boxSizing="border-box",e.current.style.height=s+"px",e.current.style.pointerEvents="none",e.current.style.position="absolute",e.current.style.top=d+"px",e.current.style.left=c+"px",e.current.style.width=a+"px",e.current.style.zIndex="1000",e.current.style.opacity="0.5"}var rT=b(()=>{Rc()});function nT(e,t,o,r,n,i,a,s,d,c=!1){let{height:p,top:u}=r.getBoundingClientRect(),{top:m,width:f}=a.getBoundingClientRect(),{marginBottom:h,marginTop:g}=Dc(r),x=u,y=i>=u+p/2+window.scrollY,v=!1;if(n?.elem)if(r!==n?.elem)(y&&n?.elem&&n?.elem===r.nextElementSibling||!y&&n?.elem&&n?.elem===r.previousElementSibling)&&(Hi++,Hi<200&&(v=!0));else{Hi++;let L=n?.boundingBox?.y,N=r.getBoundingClientRect().y;(y===n?.isBelow&&L===N||Hi<200)&&(v=!1)}if(v)return{isBelow:y,willStayInSamePosition:v};c?x+=p/2:y?x+=p+h/2:x-=g/2;let E=0;c||(y?E=-rl:E=rl);let w=x-m+E,C=f2-t;o.style.width=`calc(${f}px - ${e})`,o.style.opacity=".4";let S=12;return c?o.style.transform=`translate(${C}px, ${w-rl}px)`:y?(r.style.marginBottom=rl*2+S+"px",o.style.transform=`translate(${C}px, calc(${w}px - 0px))`):(r.style.marginTop=rl*2+S+"px",o.style.transform=`translate(${C}px, calc(${w-rl*2}px - 0px))`),g2&&oT(d,r,a),n.elem.style.opacity="",n?.elem===r?y?n.elem.style.marginTop="":n.elem.style.marginBottom="":(n.elem.style.marginBottom="",n.elem.style.marginTop=""),Hi=0,{isBelow:y,willStayInSamePosition:v}}var rl,f2,g2,Hi,iT=b(()=>{nf();rT();rl=25,f2=-24,g2=!1,Hi=0});function lT(e){return e===0?1/0:ys>=0&&ys<e?ys:Math.floor(e/2)}function b2(e,t){let{transform:o}=t.style;e.setDragImage(t,0,0),setTimeout(()=>{t.style.transform=o})}function sT(e,t){e&&(e.style.opacity="0"),t&&(t.style.opacity="",t.style.marginBottom="",t.style.marginTop="")}function x2(e,t,o){let r=t.parentElement,n=(0,Vo.useRef)(null),i=(0,Vo.useRef)(null),a=(0,Vo.useRef)(null),s=(0,Vo.useRef)(!1),[d,c]=(0,Vo.useState)(null),[p,u]=(0,Vo.useState)(null),{editorConfig:m}=be(),f=m?.admin?.hideGutter?-44:-8;(0,Vo.useEffect)(()=>{function x(y){let v=y.target;if(!$i(v))return;let E=tl(r,y.pageX,y.pageY,v);if(E===-1){c(null);return}if(Ic(v,h2))return;let w=Bi(e),{blockElem:C,foundAtIndex:S,isFoundNodeEmptyParagraph:L}=ol({anchorElem:t,cache_threshold:0,editor:e,horizontalOffset:-E,point:new jo(y.x,y.y),startIndex:lT(w.length),useEdgeAsDefault:!1,verbose:!1});ys=S,!(!C&&!L)&&d!==C&&c(C)}return document?.addEventListener("mousemove",x),()=>{document?.removeEventListener("mousemove",x)}},[r,t,e,d]),(0,Vo.useEffect)(()=>{n.current&&Ac(d,n.current,t,f)},[t,d,f]),(0,Vo.useEffect)(()=>{function x(v){if(!s.current)return!1;let[E]=(0,df.eventFiles)(v);if(E)return!1;let{pageY:w,target:C}=v;if(!$i(C))return!1;let S=tl(r,v.pageX,v.pageY,C,100,50),L=Bi(e),{blockElem:N,foundAtIndex:_,isFoundNodeEmptyParagraph:T}=ol({anchorElem:t,editor:e,fuzzy:!0,horizontalOffset:-S,point:new jo(v.x,v.y),startIndex:lT(L.length),useEdgeAsDefault:!0,verbose:!0});ys=_;let k=i.current;if(N===null||k===null)return!1;if(d!==N){let{isBelow:P,willStayInSamePosition:R}=nT(m?.admin?.hideGutter?"0px":"3rem",f+(m?.admin?.hideGutter?n?.current?.getBoundingClientRect()?.width??0:-n?.current?.getBoundingClientRect()?.width),k,N,p,w,t,v,a,T);v.preventDefault(),R||u({boundingBox:N.getBoundingClientRect(),elem:N,isBelow:P})}else sT(k,p?.elem),u({boundingBox:N.getBoundingClientRect(),elem:N,isBelow:!1});return!0}function y(v){if(!s.current)return!1;let[E]=(0,df.eventFiles)(v);if(E)return!1;let{dataTransfer:w,pageY:C,target:S}=v,L=w?.getData(aT)||"";return e.update(()=>{let N=(0,Cs.$getNodeByKey)(L);if(!N||!$i(S))return!1;let _=tl(r,v.pageX,v.pageY,S,100,50),{blockElem:T,isFoundNodeEmptyParagraph:k}=ol({anchorElem:t,editor:e,fuzzy:!0,horizontalOffset:-_,point:new jo(v.x,v.y),useEdgeAsDefault:!0});if(!T)return!1;let P=(0,Cs.$getNearestNodeFromDOMNode)(T);if(!P)return!1;if(P===N)return!0;let{height:R,top:D}=Xn(T),A=C>=D+R/2+window.scrollY;k?(P.insertBefore(N),P.remove()):A?P.insertAfter(N):P.insertBefore(N),d!==null&&c(null),document.querySelectorAll(".lexical-block-highlighter").forEach($=>{$.remove()});let B=e.getElementByKey(N.getKey());setTimeout(()=>{let $=B.getBoundingClientRect(),H=document.createElement("div");H.className="lexical-block-highlighter",document.documentElement.getAttribute("data-theme")==="dark"?H.style.backgroundColor="white":H.style.backgroundColor="black",H.style.transition="opacity 0.1s ease-in-out",H.style.zIndex="1",H.style.pointerEvents="none",H.style.boxSizing="border-box",H.style.borderRadius="4px",H.style.position="absolute",document.body.appendChild(H),H.style.opacity="0.1",H.style.height=`${$.height+8}px`,H.style.width=`${$.width+8}px`,H.style.top=`${$.top+window.scrollY-4}px`,H.style.left=`${$.left-4}px`,setTimeout(()=>{H.style.opacity="0",setTimeout(()=>{H.remove()},1e3)},3e3)},120)}),!0}return document.addEventListener("dragover",x),document.addEventListener("drop",y),()=>{document.removeEventListener("dragover",x),document.removeEventListener("drop",y)}},[r,f,t,e,p,d,m?.admin?.hideGutter]);function h(x){let y=x.dataTransfer;if(!y||!d)return;b2(y,d);let v="";e.update(()=>{let E=(0,Cs.$getNearestNodeFromDOMNode)(d);E&&(v=E.getKey())}),s.current=!0,y.setData(aT,v)}function g(){s.current=!1,sT(i.current,p?.elem)}return(0,pT.createPortal)((0,zi.jsxs)(cT.Fragment,{children:[(0,zi.jsx)("div",{className:"icon draggable-block-menu",draggable:!0,onDragEnd:g,onDragStart:h,ref:n,children:(0,zi.jsx)("div",{className:o?"icon":""})}),(0,zi.jsx)("div",{className:"draggable-block-target-line",ref:i}),(0,zi.jsx)("div",{className:"debug-highlight",ref:a})]}),t)}function mT({anchorElem:e=document.body}){let[t]=(0,dT.useLexicalComposerContext)();return x2(t,e,t._editable)}var dT,df,Cs,cT,Vo,pT,zi,h2,aT,ys,uT=b(()=>{"use client";dT=l("@lexical/react/LexicalComposerContext.js"),df=l("@lexical/rich-text"),Cs=l("lexical"),cT=F(l("react"),1),Vo=l("react"),pT=l("react-dom");Et();Nc();el();of();af();Mc();lf();sf();Rc();tT();iT();zi=l("react/jsx-runtime"),h2="draggable-block-menu",aT="application/x-lexical-drag-block",ys=1/0});var fT=b(()=>{});function hT({className:e}){return(0,bT.jsx)(gT.ContentEditable,{className:e??"ContentEditable__root"})}var gT,bT,xT=b(()=>{gT=l("@lexical/react/LexicalContentEditable.js");fT();bT=l("react/jsx-runtime")});var yT,CT,vT,_T,wT,kT,Ui,nl,il,Oe,TT,ET=b(()=>{"use client";yT=l("@lexical/react/LexicalComposerContext.js"),CT=l("@lexical/react/LexicalErrorBoundary.js"),vT=l("@lexical/react/LexicalHistoryPlugin.js"),_T=l("@lexical/react/LexicalOnChangePlugin.js"),wT=l("@lexical/react/LexicalRichTextPlugin.js"),kT=l("@lexical/react/LexicalTabIndentationPlugin.js");Ie();Ui=l("lexical"),nl=F(l("react"),1),il=l("react");gk();hk();Et();Ck();jk();eT();uT();xT();Oe=l("react/jsx-runtime"),TT=e=>{let{editorConfig:t,editorContainerRef:o,onChange:r}=e,n=be(),[i]=(0,yT.useLexicalComposerContext)(),{t:a}=M(),[s,d]=(0,il.useState)(null),c=m=>{m!==null&&d(m)};(0,il.useEffect)(()=>{if(!n?.uuid){console.error("Lexical Editor must be used within an EditorConfigProvider");return}n?.parentEditor?.uuid&&n.parentEditor?.registerChild(n.uuid,n);let m=()=>{n.focusEditor(n)},f=()=>{n.blurEditor(n)},h=i.registerCommand(Ui.FOCUS_COMMAND,()=>(m(),!0),Ui.COMMAND_PRIORITY_LOW),g=i.registerCommand(Ui.BLUR_COMMAND,()=>(f(),!0),Ui.COMMAND_PRIORITY_LOW);return()=>{h(),g(),n.parentEditor?.unregisterChild?.(n.uuid)}},[i,n]);let[p,u]=(0,il.useState)(!1);return(0,il.useEffect)(()=>{let m=()=>{let f=window.matchMedia("(max-width: 768px)").matches;f!==p&&u(f)};return m(),window.addEventListener("resize",m),()=>{window.removeEventListener("resize",m)}},[p]),(0,Oe.jsxs)(nl.Fragment,{children:[t.features.plugins.map(m=>{if(m.position==="aboveContainer")return(0,Oe.jsx)(Ai,{clientProps:m.clientProps,plugin:m},m.key)}),(0,Oe.jsxs)("div",{className:"editor-container",ref:o,children:[t.features.plugins.map(m=>{if(m.position==="top")return(0,Oe.jsx)(Ai,{clientProps:m.clientProps,plugin:m},m.key)}),(0,Oe.jsx)(wT.RichTextPlugin,{ErrorBoundary:CT.LexicalErrorBoundary,contentEditable:(0,Oe.jsx)("div",{className:"editor-scroller",children:(0,Oe.jsx)("div",{className:"editor",ref:c,children:(0,Oe.jsx)(hT,{})})}),placeholder:(0,Oe.jsx)("p",{className:"editor-placeholder",children:a("lexical:general:placeholder")})}),(0,Oe.jsx)(_T.OnChangePlugin,{ignoreSelectionChange:!0,onChange:(m,f,h)=>{(!h.has("focus")||h.size>1)&&r?.(m,f,h)}}),s&&(0,Oe.jsxs)(nl.Fragment,{children:[!p&&i.isEditable()&&(0,Oe.jsxs)(nl.Fragment,{children:[(0,Oe.jsx)(mT,{anchorElem:s}),(0,Oe.jsx)(Zk,{anchorElem:s})]}),t.features.plugins.map(m=>{if(m.position==="floatingAnchorElem"&&!(m.desktopOnly===!0&&p))return(0,Oe.jsx)(Ai,{anchorElem:s,clientProps:m.clientProps,plugin:m},m.key)}),i.isEditable()&&(0,Oe.jsx)(nl.Fragment,{children:(0,Oe.jsx)(Uk,{anchorElem:s})})]}),i.isEditable()&&(0,Oe.jsxs)(nl.Fragment,{children:[(0,Oe.jsx)(vT.HistoryPlugin,{}),t?.features?.markdownTransformers?.length>0&&(0,Oe.jsx)(xk,{})]}),(0,Oe.jsx)(kT.TabIndentationPlugin,{}),t.features.plugins.map(m=>{if(m.position==="normal")return(0,Oe.jsx)(Ai,{clientProps:m.clientProps,plugin:m},m.key)}),t.features.plugins.map(m=>{if(m.position==="bottom")return(0,Oe.jsx)(Ai,{clientProps:m.clientProps,plugin:m},m.key)})]}),t.features.plugins.map(m=>{if(m.position==="belowContainer")return(0,Oe.jsx)(Ai,{clientProps:m.clientProps,plugin:m},m.key)})]})}});var PT,FT,cf,un,ST,LT,NT=b(()=>{"use client";PT=l("@lexical/react/LexicalComposer.js"),FT=F(l("react"),1),cf=l("react");ET();Et();Qd();un=l("react/jsx-runtime"),ST=({children:e,providers:t})=>{if(!t?.length)return e;let o=t[0];return t.length>1?(0,un.jsx)(o,{children:(0,un.jsx)(ST,{providers:t.slice(1),children:e})}):(0,un.jsx)(o,{children:e})},LT=e=>{let{editorConfig:t,fieldProps:o,onChange:r,path:n,readOnly:i,value:a}=e,s=be(),d=FT.useRef(null),c=(0,cf.useMemo)(()=>{let u=a;return t?.features?.hooks?.load?.length&&t.features.hooks.load.forEach(m=>{u=m({incomingEditorState:u})}),u},[t,a]),p=(0,cf.useMemo)(()=>{if(c&&typeof c!="object")throw new Error("The value passed to the Lexical editor is not an object. This is not supported. Please remove the data from the field and start again. This is the value that was passed in: "+JSON.stringify(c));if(c&&Array.isArray(c)&&!("root"in c))throw new Error("You have tried to pass in data from the old, Slate editor, to the new, Lexical editor. This is not supported. There is no automatic conversion from Slate to Lexical data available yet (coming soon). Please remove the data from the field and start again.");if(c&&"jsonContent"in c)throw new Error("You have tried to pass in data from payload-plugin-lexical. This is not supported. The data structure has changed in this editor, compared to the plugin, and there is no automatic conversion available yet (coming soon). Please remove the data from the field and start again.");return{editable:i!==!0,editorState:c!=null?JSON.stringify(c):void 0,namespace:t.lexical.namespace,nodes:[...Ql({editorConfig:t})],onError:u=>{throw u},theme:t.lexical.theme}},[t,c,i]);return p?(0,un.jsx)(PT.LexicalComposer,{initialConfig:p,children:(0,un.jsx)(nu,{editorConfig:t,editorContainerRef:d,fieldProps:o,parentContext:s,children:(0,un.jsx)(ST,{providers:t.features.providers,children:(0,un.jsx)(TT,{editorConfig:t,editorContainerRef:d,onChange:r})})})},n):(0,un.jsx)("p",{children:"Loading..."})}});var RT=b(()=>{});var DT=b(()=>{});var AT={};mr(AT,{RichText:()=>v2});function C2({error:e}){return(0,Go.jsxs)("div",{className:"errorBoundary",role:"alert",children:[(0,Go.jsx)("p",{children:"Something went wrong:"}),(0,Go.jsx)("pre",{style:{color:"red"},children:e.message})]})}var MT,IT,Go,Bc,y2,v2,OT=b(()=>{"use client";Ie();MT=l("react"),IT=l("react-error-boundary");NT();RT();DT();Go=l("react/jsx-runtime"),Bc="rich-text-lexical",y2=e=>{let{name:t,CustomDescription:o,CustomError:r,CustomLabel:n,className:i,descriptionProps:a,editorConfig:s,errorProps:d,label:c,labelProps:p,path:u,readOnly:m,required:f,style:h,validate:g,width:x}=e,y=(0,MT.useCallback)((P,R)=>{if(typeof g=="function")return g(P,{...R,props:e,required:f})},[g,f]),{path:v}=j(),E=ae({path:v??u??t,validate:y}),{errorMessage:w,initialValue:C,path:S,schemaPath:L,setValue:N,showError:_,value:T}=E,k=[Bc,"field-type",i,_&&"error",m&&`${Bc}--read-only`,s?.admin?.hideGutter!==!0?`${Bc}--show-gutter`:null].filter(Boolean).join(" ");return(0,Go.jsxs)("div",{className:k,style:{...h,width:x},children:[(0,Go.jsx)(me,{CustomError:r,path:S,...d||{},alignCaret:"left"}),(0,Go.jsx)(se,{CustomLabel:n,label:c,required:f,...p||{}}),(0,Go.jsxs)("div",{className:`${Bc}__wrap`,children:[(0,Go.jsx)(IT.ErrorBoundary,{fallbackRender:C2,onReset:()=>{},children:(0,Go.jsx)(LT,{editorConfig:s,fieldProps:e,onChange:P=>{let R=P.toJSON();s?.features?.hooks?.save?.length&&s.features.hooks.save.forEach(D=>{R=D({incomingEditorState:R})}),N(R)},path:S,readOnly:m,value:T},JSON.stringify({initialValue:C,path:S}))}),o!==void 0?o:(0,Go.jsx)(ce,{...a||{}})]})]},S)};v2=oe(y2)});function Xt(e){return{items:e,key:"basic",label:({i18n:t})=>t.t("lexical:general:slashMenuBasicGroupLabel")}}var UC=l("@lexical/headless");Ie();var jC=l("lexical"),Zo=F(l("react"),1);var HC={block:"LexicalEditorTheme__block",blockCursor:"LexicalEditorTheme__blockCursor",characterLimit:"LexicalEditorTheme__characterLimit",code:"LexicalEditorTheme__code",codeHighlight:{atrule:"LexicalEditorTheme__tokenAttr",attr:"LexicalEditorTheme__tokenAttr",boolean:"LexicalEditorTheme__tokenProperty",builtin:"LexicalEditorTheme__tokenSelector",cdata:"LexicalEditorTheme__tokenComment",char:"LexicalEditorTheme__tokenSelector",class:"LexicalEditorTheme__tokenFunction","class-name":"LexicalEditorTheme__tokenFunction",comment:"LexicalEditorTheme__tokenComment",constant:"LexicalEditorTheme__tokenProperty",deleted:"LexicalEditorTheme__tokenProperty",doctype:"LexicalEditorTheme__tokenComment",entity:"LexicalEditorTheme__tokenOperator",function:"LexicalEditorTheme__tokenFunction",important:"LexicalEditorTheme__tokenVariable",inserted:"LexicalEditorTheme__tokenSelector",keyword:"LexicalEditorTheme__tokenAttr",namespace:"LexicalEditorTheme__tokenVariable",number:"LexicalEditorTheme__tokenProperty",operator:"LexicalEditorTheme__tokenOperator",prolog:"LexicalEditorTheme__tokenComment",property:"LexicalEditorTheme__tokenProperty",punctuation:"LexicalEditorTheme__tokenPunctuation",regex:"LexicalEditorTheme__tokenVariable",selector:"LexicalEditorTheme__tokenSelector",string:"LexicalEditorTheme__tokenSelector",symbol:"LexicalEditorTheme__tokenProperty",tag:"LexicalEditorTheme__tokenProperty",url:"LexicalEditorTheme__tokenOperator",variable:"LexicalEditorTheme__tokenVariable"},embedBlock:{base:"LexicalEditorTheme__embedBlock",focus:"LexicalEditorTheme__embedBlockFocus"},hashtag:"LexicalEditorTheme__hashtag",heading:{h1:"LexicalEditorTheme__h1",h2:"LexicalEditorTheme__h2",h3:"LexicalEditorTheme__h3",h4:"LexicalEditorTheme__h4",h5:"LexicalEditorTheme__h5",h6:"LexicalEditorTheme__h6"},hr:"LexicalEditorTheme__hr",indent:"LexicalEditorTheme__indent",inlineImage:"LexicalEditor__inline-image",link:"LexicalEditorTheme__link",list:{checklist:"LexicalEditorTheme__checklist",listitem:"LexicalEditorTheme__listItem",listitemChecked:"LexicalEditorTheme__listItemChecked",listitemUnchecked:"LexicalEditorTheme__listItemUnchecked",nested:{listitem:"LexicalEditorTheme__nestedListItem"},olDepth:["LexicalEditorTheme__ol1","LexicalEditorTheme__ol2","LexicalEditorTheme__ol3","LexicalEditorTheme__ol4","LexicalEditorTheme__ol5"],ul:"LexicalEditorTheme__ul"},ltr:"LexicalEditorTheme__ltr",mark:"LexicalEditorTheme__mark",markOverlap:"LexicalEditorTheme__markOverlap",paragraph:"LexicalEditorTheme__paragraph",quote:"LexicalEditorTheme__quote",relationship:"LexicalEditorTheme__relationship",rtl:"LexicalEditorTheme__rtl",table:"LexicalEditorTheme__table",tableAddColumns:"LexicalEditorTheme__tableAddColumns",tableAddRows:"LexicalEditorTheme__tableAddRows",tableCell:"LexicalEditorTheme__tableCell",tableCellActionButton:"LexicalEditorTheme__tableCellActionButton",tableCellActionButtonContainer:"LexicalEditorTheme__tableCellActionButtonContainer",tableCellEditing:"LexicalEditorTheme__tableCellEditing",tableCellHeader:"LexicalEditorTheme__tableCellHeader",tableCellPrimarySelected:"LexicalEditorTheme__tableCellPrimarySelected",tableCellResizer:"LexicalEditorTheme__tableCellResizer",tableCellSelected:"LexicalEditorTheme__tableCellSelected",tableCellSortedIndicator:"LexicalEditorTheme__tableCellSortedIndicator",tableResizeRuler:"LexicalEditorTheme__tableCellResizeRuler",tableSelected:"LexicalEditorTheme__tableSelected",text:{bold:"LexicalEditorTheme__textBold",code:"LexicalEditorTheme__textCode",italic:"LexicalEditorTheme__textItalic",strikethrough:"LexicalEditorTheme__textStrikethrough",subscript:"LexicalEditorTheme__textSubscript",superscript:"LexicalEditorTheme__textSuperscript",underline:"LexicalEditorTheme__textUnderline",underlineStrikethrough:"LexicalEditorTheme__textUnderlineStrikethrough"},upload:"editor-upload"};var Kl={namespace:"lexical",theme:HC};function qd({clientFunctions:e,schemaPath:t,unSanitizedEditorConfig:o}){for(let a of o.features)if(!a?.clientFeatureProps?.featureKey||a?.clientFeatureProps?.order===void 0||a?.clientFeatureProps?.order===null)throw new Error("A Feature you have installed does not return the client props as clientFeatureProps. Please make sure to always return those props, even if they are null, as other important props like order and featureKey are later on injected.");o.features=o.features.sort((a,s)=>a.clientFeatureProps.order-s.clientFeatureProps.order);let r=new Map(o.features.map(a=>[a.clientFeatureProps.featureKey,a])),n=new Map,i=0;for(let a of o.features){let s={};Object.entries(e).forEach(([c,p])=>{if(c.startsWith(`lexicalFeature.${t}.${a.clientFeatureProps.featureKey}.components.`)){let u=c.split(`${t}.${a.clientFeatureProps.featureKey}.components.`)[1];s[u]=p}});let d=typeof a.feature=="function"?a.feature({clientFunctions:s,featureProviderMap:r,resolvedFeatures:n,unSanitizedEditorConfig:o}):a.feature;n.set(a.clientFeatureProps.featureKey,{...d,key:a.clientFeatureProps.featureKey,order:i}),i++}return n}var zC=e=>{let t={enabledFeatures:[],hooks:{load:[],save:[]},markdownTransformers:[],nodes:[],plugins:[],providers:[],slashMenu:{dynamicGroups:[],groups:[]},toolbarFixed:{groups:[]},toolbarInline:{groups:[]}};if(!e?.size)return t;e.forEach(o=>{if(o.hooks&&(o.hooks?.load?.length&&(t.hooks.load=t.hooks.load.concat(o.hooks.load)),o.hooks?.save?.length&&(t.hooks.save=t.hooks.save.concat(o.hooks.save))),o.providers?.length&&(t.providers=t.providers.concat(o.providers)),o.nodes?.length&&(t.nodes=t.nodes.concat(o.nodes)),o.plugins?.length&&o.plugins.forEach((r,n)=>{t.plugins.push({Component:r.Component,clientProps:o.sanitizedClientFeatureProps,key:o.key+n,position:r.position})}),o.toolbarInline?.groups?.length)for(let r of o.toolbarInline.groups){let n=t.toolbarInline.groups.find(i=>i.key===r.key);n?t.toolbarInline.groups=t.toolbarInline.groups.filter(i=>i.key!==r.key):n={...r,items:[]},r?.items?.length&&(n.items=n.items.concat(r.items)),t.toolbarInline?.groups.push(n)}if(o.toolbarFixed?.groups?.length)for(let r of o.toolbarFixed.groups){let n=t.toolbarFixed.groups.find(i=>i.key===r.key);n?t.toolbarFixed.groups=t.toolbarFixed.groups.filter(i=>i.key!==r.key):n={...r,items:[]},r?.items?.length&&(n.items=n.items.concat(r.items)),t.toolbarFixed?.groups.push(n)}if(o.slashMenu?.groups){o.slashMenu.dynamicGroups?.length&&(t.slashMenu.dynamicGroups=t.slashMenu.dynamicGroups.concat(o.slashMenu.dynamicGroups));for(let r of o.slashMenu.groups){let n=t.slashMenu.groups.find(i=>i.key===r.key);n?t.slashMenu.groups=t.slashMenu.groups.filter(i=>i.key!==r.key):n={...r,items:[]},r?.items?.length&&(n.items=n.items.concat(r.items)),t.slashMenu.groups.push(n)}}o.markdownTransformers?.length&&(t.markdownTransformers=t.markdownTransformers.concat(o.markdownTransformers)),t.enabledFeatures.push(o.key)}),t.toolbarInline.groups.sort((o,r)=>o.order&&r.order?o.order-r.order:o.order?-1:r.order?1:0),t.toolbarFixed.groups.sort((o,r)=>o.order&&r.order?o.order-r.order:o.order?-1:r.order?1:0);for(let o of t.toolbarInline.groups)o.items.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0);for(let o of t.toolbarFixed.groups)o.items.sort((r,n)=>r.order&&n.order?r.order-n.order:r.order?-1:n.order?1:0);return t};function ql(e,t,o){return{admin:o,features:zC(t),lexical:e,resolvedFeatureMap:t}}Qd();var Jl=l("react/jsx-runtime"),qP=e=>{let{admin:t,lexicalEditorConfig:o,richTextComponentMap:r}=e,[n,i]=Zo.default.useState("Loading..."),{cellData:a,cellProps:{schemaPath:s}}=Qr(),d=Gl(),[c,p]=(0,Zo.useState)(!1),[u,m]=(0,Zo.useState)([]),[f,h]=(0,Zo.useState)(null),g=r.get("features").sort((y,v)=>y.order-v.order),x=0;for(let y of g){let v=Array.from(r.keys()).filter(E=>E.startsWith(`feature.${y.key}.components.`));x+=1,x+=v.length}return(0,Zo.useEffect)(()=>{if(!c){let y=[],v=0;if(Object.entries(d).forEach(([E,w])=>{E.startsWith(`lexicalFeature.${s}.`)&&(E.includes(".lexical_internal_components.")||y.push(w),v++)}),v===x){m(y),p(!0);let E=qd({clientFunctions:d,schemaPath:s,unSanitizedEditorConfig:{features:y,lexical:o}});h(ql(o||Kl,E,t))}}},[t,g,c,d,s,g.length,u,f,o,r,x]),(0,Zo.useEffect)(()=>{if(!c)return;let y=a;if(y==null||!c||!f){i("");return}if(f?.features?.hooks?.load?.length&&f.features.hooks.load.forEach(w=>{y=w({incomingEditorState:y})}),!y||typeof y!="object"){i("");return}if(Array.isArray(y)&&!("root"in y)){i("");return}if("jsonContent"in y){i("");return}let v=(0,UC.createHeadlessEditor)({namespace:f.lexical.namespace,nodes:Ql({editorConfig:f}),theme:f.lexical.theme});v.setEditorState(v.parseEditorState(y));let E=v.getEditorState().read(()=>(0,jC.$getRoot)().getTextContent())||"";i(E)},[a,o,c,f]),c?(0,Jl.jsx)("span",{children:n}):(0,Jl.jsx)(Zo.default.Fragment,{children:Array.isArray(g)&&g.map(y=>{let E=Array.from(r.keys()).filter(w=>w.startsWith(`lexical_internal_feature.${y.key}.lexical_internal_components.`)).map(w=>r.get(w));return(0,Jl.jsxs)(Zo.default.Fragment,{children:[E?.length?E.map(w=>w):null,y.ClientFeature]},y.key)})})};var xt=l("lexical");var va=l("react/jsx-runtime"),VC=()=>(0,va.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,va.jsx)("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,va.jsx)("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,va.jsx)("path",{d:"M5 15H15",stroke:"currentColor",strokeWidth:"1.5"})]});var _a=l("react/jsx-runtime"),GC=()=>(0,_a.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,_a.jsx)("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,_a.jsx)("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,_a.jsx)("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});var wa=l("react/jsx-runtime"),Jd=()=>(0,wa.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,wa.jsx)("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,wa.jsx)("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,wa.jsx)("path",{d:"M2.5 15H12.5",stroke:"currentColor",strokeWidth:"1.5"})]});var ka=l("react/jsx-runtime"),WC=()=>(0,ka.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,ka.jsx)("path",{d:"M2.5 5H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,ka.jsx)("path",{d:"M2.5 10H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,ka.jsx)("path",{d:"M7.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"})]});Ie();var KC=(e,t)=>{let{schemaPath:o}=j(),i=Qr()?.cellProps?.schemaPath||o;Qm(`lexicalFeature.${i}.${e}`,t)};var Xm=e=>t=>(KC(t.featureKey,e(t)),null);var X=e=>Xm(o=>{let r={clientFeatureProps:o};return typeof e=="function"?r.feature=({clientFunctions:n,featureProviderMap:i,resolvedFeatures:a,unSanitizedEditorConfig:s})=>{let d=e({clientFunctions:n,featureProviderMap:i,props:o,resolvedFeatures:a,unSanitizedEditorConfig:s});return d.sanitizedClientFeatureProps===null&&(d.sanitizedClientFeatureProps=o),d}:(e.sanitizedClientFeatureProps=o,r.feature=e),r});var qC=e=>({type:"dropdown",ChildComponent:Jd,items:e,key:"align",order:30});var QC=[qC([{ChildComponent:Jd,isActive:({selection:e})=>{if(!(0,xt.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,xt.$isElementNode)(t)&&t.getFormatType()==="left")continue;let o=t.getParent();if(!((0,xt.$isElementNode)(o)&&o.getFormatType()==="left"))return!1}return!0},key:"alignLeft",label:({i18n:e})=>e.t("lexical:align:alignLeftLabel"),onSelect:({editor:e})=>{e.dispatchCommand(xt.FORMAT_ELEMENT_COMMAND,"left")},order:1},{ChildComponent:VC,isActive:({selection:e})=>{if(!(0,xt.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,xt.$isElementNode)(t)&&t.getFormatType()==="center")continue;let o=t.getParent();if(!((0,xt.$isElementNode)(o)&&o.getFormatType()==="center"))return!1}return!0},key:"alignCenter",label:({i18n:e})=>e.t("lexical:align:alignCenterLabel"),onSelect:({editor:e})=>{e.dispatchCommand(xt.FORMAT_ELEMENT_COMMAND,"center")},order:2},{ChildComponent:WC,isActive:({selection:e})=>{if(!(0,xt.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,xt.$isElementNode)(t)&&t.getFormatType()==="right")continue;let o=t.getParent();if(!((0,xt.$isElementNode)(o)&&o.getFormatType()==="right"))return!1}return!0},key:"alignRight",label:({i18n:e})=>e.t("lexical:align:alignRightLabel"),onSelect:({editor:e})=>{e.dispatchCommand(xt.FORMAT_ELEMENT_COMMAND,"right")},order:3},{ChildComponent:GC,isActive:({selection:e})=>{if(!(0,xt.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,xt.$isElementNode)(t)&&t.getFormatType()==="justify")continue;let o=t.getParent();if(!((0,xt.$isElementNode)(o)&&o.getFormatType()==="justify"))return!1}return!0},key:"alignJustify",label:({i18n:e})=>e.t("lexical:align:alignJustifyLabel"),onSelect:({editor:e})=>{e.dispatchCommand(xt.FORMAT_ELEMENT_COMMAND,"justify")},order:4}])],QP=X({toolbarFixed:{groups:QC},toolbarInline:{groups:QC}});var zn=l("@lexical/rich-text"),ou=l("@lexical/selection"),Xl=l("lexical");var Zm=l("react/jsx-runtime"),eu=()=>(0,Zm.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,Zm.jsx)("path",{d:"M13.5353 10.5725C13.5353 9.47709 11.0456 9.99991 11.0456 7.85883C11.0456 6.46464 12.1162 5.61816 13.361 5.61816C14.805 5.61816 16 6.86298 16 8.92937C16 11.2945 14.4564 13.7841 11.1203 14.3816L10.8216 13.1368C12.888 12.4895 13.5353 11.4937 13.5353 10.5725ZM6.71369 10.5725C6.71369 9.47709 4.22407 9.99991 4.22407 7.85883C4.22407 6.46464 5.29461 5.61816 6.53942 5.61816C7.9834 5.61816 9.17842 6.86298 9.17842 8.92937C9.17842 11.2945 7.63485 13.7841 4.29876 14.3816L4 13.1368C6.06639 12.4895 6.71369 11.4937 6.71369 10.5725Z",fill:"currentColor"})});var tu=l("react/jsx-runtime"),Yl=()=>(0,tu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,tu.jsx)("path",{d:"M11.708 14.5H7.79785V13.9414H8.01367C9.00391 13.9414 9.15625 13.9033 9.15625 13.6113V6.70508H8.07715C6.82031 6.70508 6.73145 7.08594 6.28711 8.67285H5.80469L5.91895 6.12109H13.5869L13.7012 8.67285H13.2188C12.7744 7.08594 12.6855 6.70508 11.4287 6.70508H10.3496V13.6113C10.3496 13.9033 10.502 13.9414 11.4922 13.9414H11.708V14.5Z",fill:"currentColor"})});var wo=e=>({type:"dropdown",ChildComponent:Yl,items:e,key:"text",order:25});var vi=l("@lexical/rich-text"),JC=l("lexical"),YC={type:"element",dependencies:[vi.QuoteNode],export:(e,t)=>{if(!(0,vi.$isQuoteNode)(e))return null;let o=t(e).split(`
`),r=[];for(let n of o)r.push("> "+n);return r.join(`
`)},regExp:/^>\s/,replace:(e,t,o,r)=>{if(r){let i=e.getPreviousSibling();if((0,vi.$isQuoteNode)(i)){i.splice(i.getChildrenSize(),0,[(0,JC.$createLineBreakNode)(),...t]),i.select(0,0),e.remove();return}}let n=(0,vi.$createQuoteNode)();n.append(...t),e.replace(n),n.select(0,0)}};var XC=[wo([{ChildComponent:eu,isActive:({selection:e})=>{if(!(0,Xl.$isRangeSelection)(e))return!1;for(let t of e.getNodes())if(!(0,zn.$isQuoteNode)(t)&&!(0,zn.$isQuoteNode)(t.getParent()))return!1;return!0},key:"blockquote",label:({i18n:e})=>e.t("lexical:blockquote:label"),onSelect:({editor:e})=>{e.update(()=>{let t=(0,Xl.$getSelection)();(0,ou.$setBlocksType)(t,()=>(0,zn.$createQuoteNode)())})},order:20}])],JP=X({markdownTransformers:[YC],nodes:[zn.QuoteNode],slashMenu:{groups:[Xt([{Icon:eu,key:"blockquote",keywords:["quote","blockquote"],label:({i18n:e})=>e.t("lexical:blockquote:label"),onSelect:({editor:e})=>{e.update(()=>{let t=(0,Xl.$getSelection)();(0,ou.$setBlocksType)(t,()=>(0,zn.$createQuoteNode)())})}}])]},toolbarFixed:{groups:XC},toolbarInline:{groups:XC}});var au=l("@payloadcms/translations");var Ta=l("react/jsx-runtime"),Yd=()=>(0,Ta.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ta.jsx)("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"8",y:"5"}),(0,Ta.jsx)("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"5",y:"11"}),(0,Ta.jsx)("rect",{height:"4",rx:"0.5",stroke:"currentColor",width:"4",x:"11",y:"11"})]});var xv=l("@lexical/react/LexicalDecoratorBlockNode.js"),yv=F(l("bson-objectid"),1),Cv=F(l("react"),1),vv=l("react/jsx-runtime"),ZP=Cv.default.lazy(()=>Promise.resolve().then(()=>(bv(),hv)).then(e=>({default:e.BlockComponent}))),Xr=class e extends xv.DecoratorBlockNode{__fields;constructor({fields:t,format:o,key:r}){super(o,r),this.__fields=t}static clone(t){return new e({fields:t.__fields,format:t.__format,key:t.__key})}static getType(){return"block"}static importDOM(){return{}}static importJSON(t){t.version===1&&(t={...t,fields:{...t.fields.data},version:2});let o=Ea(t.fields);return o.setFormat(t.format),o}static isInline(){return!1}decorate(t,o){return(0,vv.jsx)(ZP,{formData:this.getFields(),nodeKey:this.getKey()})}exportDOM(){let t=document.createElement("div"),o=document.createTextNode(this.getTextContent());return t.append(o),{element:t}}exportJSON(){return{...super.exportJSON(),type:"block",fields:this.getFields(),version:2}}getFields(){return this.getLatest().__fields}getTextContent(){return"Block Field"}setFields(t){let o=JSON.parse(JSON.stringify(t)),r=this.getWritable();r.__fields=o}};function Ea(e){return new Xr({fields:{...e,id:e?.id||new yv.default.default().toHexString()}})}function eF(e){return e instanceof Xr}var _v=l("lexical"),_i=(0,_v.createCommand)("INSERT_BLOCK_COMMAND");var Ev=l("@lexical/react/LexicalComposerContext.js"),Xd=l("@lexical/utils"),tr=l("lexical"),Pv=l("react");var wv=l("@lexical/react/LexicalComposerContext.js");Ie();var Pa=l("lexical"),Fa=l("react");Et();var Tv=l("react/jsx-runtime");var tF=(0,Pa.createCommand)("INSERT_BLOCK_WITH_DRAWER_COMMAND"),oF=({blockType:e,editor:t,replaceNodeKey:o})=>{o?t.update(()=>{let r=(0,Pa.$getNodeByKey)(o);r&&r.replace(Ea({id:null,blockName:"",blockType:e}))}):t.dispatchCommand(_i,{id:null,blockName:"",blockType:e})},kv=()=>{let[e]=(0,wv.useLexicalComposerContext)(),{editorConfig:t,uuid:o}=be(),[r,n]=(0,Fa.useState)(null),i=gt(),{t:a}=M(),{openModal:s}=(0,Mo.useModal)(),d={plural:a("fields:blocks")||"Blocks",singular:a("fields:block")||"Block"},c=(0,Fa.useCallback)((m,f)=>{oF({blockType:f,editor:e,replaceNodeKey:r})},[e,r]),p=di({slug:"lexical-rich-text-blocks-"+o,depth:i}),u=t?.resolvedFeatureMap?.get("blocks")?.sanitizedClientFeatureProps?.reducedBlocks;return(0,Fa.useEffect)(()=>e.registerCommand(tF,m=>(n(m?.replace?m?.replace.nodeKey:null),s(p),!0),Pa.COMMAND_PRIORITY_EDITOR),[e,p,s]),(0,Tv.jsx)(fi,{addRow:c,addRowIndex:0,blocks:u,drawerSlug:p,labels:d})};var Sv=l("react/jsx-runtime"),Fv=()=>{let[e]=(0,Ev.useLexicalComposerContext)();return(0,Pv.useEffect)(()=>{if(!e.hasNodes([Xr]))throw new Error("BlocksPlugin: BlocksNode not registered on editor");return(0,Xd.mergeRegister)(e.registerCommand(_i,t=>(e.update(()=>{let o=(0,tr.$getSelection)()||(0,tr.$getPreviousSelection)();if((0,tr.$isRangeSelection)(o)){let r=Ea(t);(0,Xd.$insertNodeToNearestRoot)(r);let{focus:n}=o,i=n.getNode();(0,tr.$isParagraphNode)(i)&&i.getTextContentSize()===0&&i.getParent().getChildren().filter(a=>(0,tr.$isParagraphNode)(a)).length>1&&i.remove()}}),!0),tr.COMMAND_PRIORITY_EDITOR))},[e]),(0,Sv.jsx)(kv,{})};var rF=X(({props:e})=>({nodes:[Xr],plugins:[{Component:Fv,position:"normal"}],sanitizedClientFeatureProps:e,slashMenu:{groups:[{items:e.reducedBlocks.map(t=>({Icon:Yd,key:"block-"+t.slug,keywords:["block","blocks",t.slug],label:({i18n:o})=>t.labels.singular?(0,au.getTranslation)(t.labels.singular,o):t.slug,onSelect:({editor:o})=>{o.dispatchCommand(_i,{id:null,blockName:"",blockType:t.slug})}})),key:"blocks",label:({i18n:t})=>t.t("lexical:blocks:label")}]},toolbarFixed:{groups:[{type:"dropdown",ChildComponent:Yd,items:e.reducedBlocks.map((t,o)=>({ChildComponent:Yd,isActive:void 0,key:"block-"+t.slug,label:({i18n:r})=>t.labels.singular?(0,au.getTranslation)(t.labels.singular,r):t.slug,onSelect:({editor:r})=>{r.dispatchCommand(_i,{id:null,blockName:"",blockType:t.slug})},order:o})),key:"blocks",order:20}]}}));var Dv=l("@lexical/react/LexicalComposerContext.js"),Sa=l("lexical"),Mv=F(l("react"),1),He=l("react");var Oo=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";var nF=Oo&&"documentMode"in document?document.documentMode:null,Lv=Oo&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Jj=Oo&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Yj=Oo&&"InputEvent"in window&&!nF?"getTargetRanges"in new window.InputEvent("input"):!1,Xj=Oo&&/Version\/[\d.].*Safari/.test(navigator.userAgent),Zj=Oo&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,eV=Oo&&/Android/.test(navigator.userAgent),tV=Oo&&/Win/.test(navigator.platform),iF=Oo&&/^(?=.*Chrome).*/i.test(navigator.userAgent),oV=Oo&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&!iF;var $o=l("react/jsx-runtime"),aF=e=>{let t=document.createElement("textarea");t.value=e||"",t.style.position="absolute",t.style.opacity="0",document.body?.appendChild(t),t.focus(),t.select();try{let o=document.execCommand("copy");console.log(o)}catch(o){console.error(o)}document.body?.removeChild(t)},lF=(e,t)=>{let o=document.createElement("a");o.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t||"")),o.setAttribute("download",e),o.style.display="none",document.body?.appendChild(o),o.click(),document.body?.removeChild(o)},sF=e=>{let o=((r,n)=>{switch(r){case"click":return`      await page.mouse.click(${n.x}, ${n.y});`;case"press":return`      await page.keyboard.press('${n}');`;case"keydown":return`      await page.keyboard.keydown('${n}');`;case"keyup":return`      await page.keyboard.keyup('${n}');`;case"type":return`      await page.keyboard.type('${n}');`;case"selectAll":return"      await selectAll(page);";case"snapshot":return`      await assertHTMLSnapshot(page);
      await assertSelection(page, {
        anchorPath: [${n.anchorPath.toString()}],
        anchorOffset: ${n.anchorOffset},
        focusPath: [${n.focusPath.toString()}],
        focusOffset: ${n.focusOffset},
      });
`;default:return""}})(e.name,e.value);switch(e.count){case 1:return o;case 2:return[o,o].join(`
`);default:return`      await repeat(${e.count}, async () => {
  ${o}
      );`}};function dF(e){return e.key.toLowerCase()==="a"&&(Lv?e.metaKey:e.ctrlKey)}function cF(e){let{anchorNode:t,focusNode:o}=e,{anchorOffset:r,focusOffset:n}=e;return r!==0&&r--,n!==0&&n--,{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:n}}function Nv(e,t){let o=e,r=[];for(;o!==t;)o!=null&&r.unshift(Array.from(o?.parentNode?.childNodes??[]).indexOf(o)),o=o?.parentNode;return r}var Rv=new Set(["Enter","Backspace","Delete","Escape","ArrowLeft","ArrowRight","ArrowUp","ArrowDown"]);function pF(e){let[t,o]=(0,He.useState)([]),[r,n]=(0,He.useState)(!1),[,i]=(0,He.useState)(""),[a,s]=(0,He.useState)(""),d=(0,He.useRef)(null),c=(0,He.useRef)(!1),p=(0,He.useRef)(null),u=(0,He.useCallback)(()=>e,[e]),m=(0,He.useCallback)(()=>{let w=e.getRootElement(),C=window.getSelection();return w==null||C==null||C.anchorNode==null||C.focusNode==null||!w.contains(C.anchorNode)||!w.contains(C.focusNode)?null:`
import {
  initializeE2E,
  assertHTMLSnapshot,
  assertSelection,
  repeat,
} from '../utils';
import {selectAll} from '../keyboardShortcuts';
import { RangeSelection } from 'lexical';
import { NodeSelection } from 'lexical';

describe('Test case', () => {
  initializeE2E((e2e) => {
    it('Should pass this test', async () => {
      const {page} = e2e;

      await page.focus('div[contenteditable="true"]');
${t.map(sF).join(`
`)}
    });
});
    `},[e,t]),f=(0,He.useCallback)((w,C)=>{o(S=>{let L=t.length-1,N=t[L];if(N&&N.name===w){if(w==="type")return[...t.slice(0,L),{...N,value:N.value+C}];if(N.value===C)return[...t.slice(0,L),{...N,count:N.count+1}]}return[...S,{name:w,count:1,value:C}]})},[t,o]);(0,He.useLayoutEffect)(()=>{let w=S=>{if(!r)return;let L=S.key;dF(S)?f("selectAll",""):Rv.has(L)?f("press",S.key):[...L].length>1?f("keydown",S.key):f("type",S.key)},C=S=>{if(!r)return;let L=S.key;!Rv.has(L)&&[...L].length>1&&f("keyup",S.key)};return e.registerRootListener((S,L)=>{L!==null&&(L.removeEventListener("keydown",w),L.removeEventListener("keyup",C)),S!==null&&(S.addEventListener("keydown",w),S.addEventListener("keyup",C))})},[e,r,f]),(0,He.useLayoutEffect)(()=>{p.current&&p.current.scrollTo(0,p.current.scrollHeight)},[m]),(0,He.useEffect)(()=>{if(t){let w=m();w!==null&&s(w),p.current&&p.current.scrollTo(0,p.current.scrollHeight)}},[m,t]),(0,He.useEffect)(()=>e.registerUpdateListener(({dirtyElements:C,dirtyLeaves:S,editorState:L})=>{if(!r)return;let N=L._selection,_=d.current,T=c.current;if(_!==N){if(S.size===0&&C.size===0&&!T){let P=window.getSelection();if(P&&(P.anchorNode==null||P.focusNode==null))return}d.current=N}c.current=!1;let k=m();k!==null&&s(k)}),[e,m,r,f]),(0,He.useEffect)(()=>r?e.registerUpdateListener(()=>{let C=e.getRootElement();C!==null&&i(C?.innerHTML)}):void 0,[e,r]);let h=(0,He.useCallback)(w=>{r||(w.update(()=>{let C=(0,Sa.$getRoot)();C.clear();let S=(0,Sa.$createTextNode)();C.append((0,Sa.$createParagraphNode)().append(S)),S.select()}),o([])),n(C=>!C)},[r]),g=(0,He.useCallback)(()=>{if(!r)return;let w=window.getSelection();if(w===null||w.anchorNode==null||w.focusNode==null)return;let{anchorNode:C,anchorOffset:S,focusNode:L,focusOffset:N}=cF(w),_=u().getRootElement(),T;C!==null&&(T=Nv(C,_));let k;L!==null&&(k=Nv(L,_)),f("snapshot",{anchorNode:C,anchorOffset:S,anchorPath:T,focusNode:L,focusOffset:N,focusPath:k})},[f,r,u]),x=(0,He.useCallback)(()=>{aF(m())},[m]),y=(0,He.useCallback)(()=>{lF("test.js",m())},[m]);return[(0,$o.jsx)("button",{className:`editor-dev-button ${r?"active":""}`,id:"test-recorder-button",onClick:w=>{h(u()),w.preventDefault()},title:r?"Disable test recorder":"Enable test recorder",type:"button",children:r?"Disable test recorder":"Enable test recorder"}),r?(0,$o.jsxs)("div",{className:"test-recorder-output",children:[(0,$o.jsxs)("div",{className:"test-recorder-toolbar",children:[(0,$o.jsx)("button",{className:"test-recorder-button",id:"test-recorder-button-snapshot",onClick:w=>{g(),w.preventDefault()},title:"Insert snapshot",type:"button",children:"Insert Snapshot"}),(0,$o.jsx)("button",{className:"test-recorder-button",id:"test-recorder-button-copy",onClick:w=>{x(),w.preventDefault()},title:"Copy to clipboard",type:"button",children:"Copy"}),(0,$o.jsx)("button",{className:"test-recorder-button",id:"test-recorder-button-download",onClick:w=>{y(),w.preventDefault()},title:"Download as a file",type:"button",children:"Download"})]}),(0,$o.jsx)("pre",{id:"test-recorder",ref:p,children:a})]}):null]}var Iv=()=>{let[e]=(0,Dv.useLexicalComposerContext)(),[t,o]=pF(e);return(0,$o.jsxs)(Mv.Fragment,{children:[(0,$o.jsx)("p",{children:"HI"}),t,o,(0,$o.jsx)("p",{children:"DONE"})]})};var mF=X({plugins:[{Component:Iv,position:"bottom"}]});var Av=l("@lexical/react/LexicalComposerContext.js"),Ov=l("@lexical/react/LexicalTreeView.js");var Bv=l("react/jsx-runtime"),$v=()=>{let[e]=(0,Av.useLexicalComposerContext)();return(0,Bv.jsx)(Ov.TreeView,{editor:e,timeTravelButtonClassName:"debug-timetravel-button",timeTravelPanelButtonClassName:"debug-timetravel-panel-button",timeTravelPanelClassName:"debug-timetravel-panel",timeTravelPanelSliderClassName:"debug-timetravel-panel-slider",treeTypeButtonClassName:"debug-treetype-button",viewClassName:"tree-view-output"})};var uF=X({plugins:[{Component:$v,position:"bottom"}]});var Zd=l("lexical");var lu=l("react/jsx-runtime"),Hv=()=>(0,lu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,lu.jsx)("path",{d:"M10.6772 15H6.27017V5.718H10.4172C12.6792 5.718 13.8492 6.602 13.8492 8.292C13.8492 9.098 13.1992 9.982 12.4712 10.216C13.3812 10.476 14.1742 11.256 14.1742 12.322C14.1742 14.09 12.9002 15 10.6772 15ZM8.46717 9.501H10.3262C11.3012 9.501 11.7042 9.046 11.7042 8.409C11.7042 7.72 11.2362 7.317 10.3392 7.317H8.46717V9.501ZM8.46717 11.061V13.401H10.4822C11.4702 13.401 11.9642 12.959 11.9642 12.218C11.9642 11.49 11.4702 11.061 10.4822 11.061H8.46717Z",fill:"currentColor"})});var ro=e=>({type:"buttons",items:e,key:"format",order:40});var zv={type:"text-format",format:["bold","italic"],tag:"***"},Uv={type:"text-format",format:["bold","italic"],intraword:!1,tag:"___"},jv={type:"text-format",format:["bold"],tag:"**"},Vv={type:"text-format",format:["bold"],intraword:!1,tag:"__"};var Gv=[ro([{ChildComponent:Hv,isActive:({selection:e})=>(0,Zd.$isRangeSelection)(e)?e.hasFormat("bold"):!1,key:"bold",onSelect:({editor:e})=>{e.dispatchCommand(Zd.FORMAT_TEXT_COMMAND,"bold")},order:1}])],fF=X(({featureProviderMap:e})=>{let t=[jv,Vv];return e.get("italic")&&t.push(Uv,zv),{markdownTransformers:t,toolbarFixed:{groups:Gv},toolbarInline:{groups:Gv}}});var ec=l("lexical");var Zl=l("react/jsx-runtime"),Wv=()=>(0,Zl.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Zl.jsx)("path",{d:"M7.76465 6L3.76465 10L7.76465 14",stroke:"currentColor"}),(0,Zl.jsx)("path",{d:"M12.2354 6L16.2354 10L12.2354 14",stroke:"currentColor"})]});var Kv={type:"text-format",format:["code"],tag:"`"};var qv=[ro([{ChildComponent:Wv,isActive:({selection:e})=>(0,ec.$isRangeSelection)(e)?e.hasFormat("code"):!1,key:"inlineCode",onSelect:({editor:e})=>{e.dispatchCommand(ec.FORMAT_TEXT_COMMAND,"code")},order:7}])],gF=X({markdownTransformers:[Kv],toolbarFixed:{groups:qv},toolbarInline:{groups:qv}});var tc=l("lexical");var su=l("react/jsx-runtime"),Qv=()=>(0,su.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,su.jsx)("path",{d:"M11.311 14.2969L11.0327 15H6.18408L6.4624 14.2969C7.54639 14.2969 7.70752 14.209 7.83936 13.8721L10.8423 6.45996C10.8716 6.38672 10.8862 6.32812 10.8862 6.26953C10.8862 6.09375 10.6519 6.03516 9.80225 6.03516L10.0952 5.33203H14.9438L14.6509 6.03516C13.5669 6.03516 13.4204 6.12305 13.2886 6.45996L10.2856 13.8721C10.2563 13.9453 10.2271 14.0039 10.2271 14.0625C10.2271 14.2383 10.4614 14.2969 11.311 14.2969Z",fill:"currentColor"})});var Jv={type:"text-format",format:["italic"],tag:"*"},Yv={type:"text-format",format:["italic"],intraword:!1,tag:"_"};var Xv=[ro([{ChildComponent:Qv,isActive:({selection:e})=>(0,tc.$isRangeSelection)(e)?e.hasFormat("italic"):!1,key:"italic",onSelect:({editor:e})=>{e.dispatchCommand(tc.FORMAT_TEXT_COMMAND,"italic")},order:2}])],hF=X({markdownTransformers:[Jv,Yv],toolbarFixed:{groups:Xv},toolbarInline:{groups:Xv}});var oc=l("lexical");var es=l("react/jsx-runtime"),Zv=()=>(0,es.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,es.jsx)("path",{d:"M5.50756 12.76H7.42756C7.56256 14.215 8.82256 14.71 10.1576 14.71C11.4326 14.71 12.4226 14.14 12.4226 13.06C12.4226 12.28 11.9576 11.845 10.6676 11.605L8.70256 11.245C7.12756 10.96 5.85256 10.21 5.85256 8.335C5.85256 6.43 7.53256 5.11 9.87256 5.11C12.4226 5.11 13.9526 6.22 14.1626 8.23H12.2876C12.1526 7.18 11.2226 6.595 9.88756 6.595C8.59756 6.595 7.78756 7.27 7.78756 8.215C7.78756 9.1 8.34256 9.385 9.49756 9.61L11.5676 10.015C13.3226 10.345 14.3726 11.215 14.3726 12.94C14.3726 14.89 12.5876 16.18 10.2176 16.18C7.66756 16.18 5.70256 15.115 5.50756 12.76Z",fill:"currentColor"}),(0,es.jsx)("path",{d:"M4.99756 11.44H15.0026V12.19H4.99756V11.44Z",fill:"currentColor"})]});var e_={type:"text-format",format:["strikethrough"],tag:"~~"};var t_=[ro([{ChildComponent:Zv,isActive:({selection:e})=>(0,oc.$isRangeSelection)(e)?e.hasFormat("strikethrough"):!1,key:"strikethrough",onSelect:({editor:e})=>{e.dispatchCommand(oc.FORMAT_TEXT_COMMAND,"strikethrough")},order:4}])],bF=X({markdownTransformers:[e_],toolbarFixed:{groups:t_},toolbarInline:{groups:t_}});var rc=l("lexical");var du=l("react/jsx-runtime"),o_=()=>(0,du.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,du.jsx)("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 13.258C16.7768 14.155 16.1398 14.532 15.2038 15C14.5538 15.325 14.2808 15.546 14.2418 15.78H16.7898V16.82H12.7208V16.339C12.7208 15.286 13.5918 14.675 14.3588 14.233C15.0868 13.83 15.4378 13.635 15.4378 13.232C15.4378 12.894 15.2038 12.686 14.8268 12.686C14.3848 12.686 14.1248 13.024 14.1118 13.427H12.7468C12.8248 12.426 13.5528 11.633 14.8398 11.633C15.9448 11.633 16.7768 12.257 16.7768 13.258Z",fill:"currentColor"})});var r_=[ro([{ChildComponent:o_,isActive:({selection:e})=>(0,rc.$isRangeSelection)(e)?e.hasFormat("subscript"):!1,key:"subscript",onSelect:({editor:e})=>{e.dispatchCommand(rc.FORMAT_TEXT_COMMAND,"subscript")},order:5}])],xF=X({toolbarFixed:{groups:r_},toolbarInline:{groups:r_}});var nc=l("lexical");var cu=l("react/jsx-runtime"),n_=()=>(0,cu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,cu.jsx)("path",{d:"M10.167 15L7.45002 11.36L4.73302 15H2.91302L6.55302 10.177L3.23802 5.718H5.20102L7.54102 8.89L9.89402 5.718H11.714L8.43802 10.06L12.13 15H10.167ZM16.7768 7.252C16.7768 8.149 16.1398 8.526 15.2038 8.994C14.5538 9.319 14.2808 9.54 14.2418 9.774H16.7898V10.814H12.7208V10.333C12.7208 9.28 13.5918 8.669 14.3588 8.227C15.0868 7.824 15.4378 7.629 15.4378 7.226C15.4378 6.888 15.2038 6.68 14.8268 6.68C14.3848 6.68 14.1248 7.018 14.1118 7.421H12.7468C12.8248 6.42 13.5528 5.627 14.8398 5.627C15.9448 5.627 16.7768 6.251 16.7768 7.252Z",fill:"currentColor"})});var i_=[ro([{ChildComponent:n_,isActive:({selection:e})=>(0,nc.$isRangeSelection)(e)?e.hasFormat("superscript"):!1,key:"superscript",onSelect:({editor:e})=>{e.dispatchCommand(nc.FORMAT_TEXT_COMMAND,"superscript")},order:6}])],yF=X({toolbarFixed:{groups:i_},toolbarInline:{groups:i_}});var ic=l("lexical");var ts=l("react/jsx-runtime"),a_=()=>(0,ts.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"currentColor",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,ts.jsx)("path",{d:"M13.9656 11.256C13.9656 13.791 12.5096 15.156 10.0006 15.156C7.50461 15.156 6.03561 13.791 6.03561 11.23V5.718H7.76461V11.243C7.76461 12.868 8.50561 13.778 10.0006 13.778C11.4956 13.778 12.2496 12.868 12.2496 11.243V5.718H13.9656V11.256Z",fill:"currentColor"}),(0,ts.jsx)("path",{d:"M5.09961 16.3H14.9016V16.95H5.09961V16.3Z",fill:"currentColor"})]});var l_=[ro([{ChildComponent:a_,isActive:({selection:e})=>(0,ic.$isRangeSelection)(e)?e.hasFormat("underline"):!1,key:"underline",onSelect:({editor:e})=>{e.dispatchCommand(ic.FORMAT_TEXT_COMMAND,"underline")},order:3}])],CF=X({toolbarFixed:{groups:l_},toolbarInline:{groups:l_}});var wi=l("@lexical/rich-text"),b_=l("@lexical/selection"),ac=l("lexical");var pu=l("react/jsx-runtime"),s_=()=>(0,pu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,pu.jsx)("path",{d:"M4.639 13.5V7.074H6.196V9.648H9.076V7.074H10.642V13.5H9.076V10.836H6.196V13.5H4.639ZM11.5656 9.045V8.019C12.6636 8.019 13.1316 7.731 13.2846 7.065H14.4006V13.5H12.8436V9.045H11.5656Z",fill:"currentColor"})});var mu=l("react/jsx-runtime"),d_=()=>(0,mu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,mu.jsx)("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM15.9796 8.973C15.9796 10.116 15.1696 10.656 14.0356 11.232C13.2256 11.646 12.8206 11.943 12.7846 12.294H15.9886V13.5H11.0566V12.951C11.0566 11.601 12.1636 10.845 13.1176 10.287C14.0356 9.756 14.5126 9.486 14.5126 8.946C14.5126 8.46 14.2156 8.145 13.6306 8.145C13.0186 8.145 12.6586 8.613 12.6226 9.198H11.1196C11.2186 7.947 12.1006 6.966 13.6396 6.966C15.0346 6.966 15.9796 7.785 15.9796 8.973Z",fill:"currentColor"})});var uu=l("react/jsx-runtime"),c_=()=>(0,uu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,uu.jsx)("path",{d:"M4.139 13.5V7.074H5.696V9.648H8.576V7.074H10.142V13.5H8.576V10.836H5.696V13.5H4.139ZM16.1146 11.745C16.1146 12.744 15.2236 13.608 13.6126 13.608C12.0736 13.608 11.0926 12.762 10.9846 11.547H12.4696C12.5146 12.114 13.0006 12.456 13.6126 12.456C14.2876 12.456 14.6746 12.132 14.6746 11.619C14.6746 11.061 14.2426 10.836 13.6216 10.836H12.9826V9.738H13.6036C14.1526 9.738 14.5486 9.486 14.5486 8.937C14.5486 8.46 14.2156 8.127 13.6486 8.127C13.0366 8.127 12.6586 8.514 12.6226 9.045H11.1916C11.2726 7.929 12.1276 6.966 13.6666 6.966C15.1876 6.966 15.9706 7.848 15.9706 8.865C15.9706 9.603 15.5026 10.143 14.8186 10.269C15.6196 10.404 16.1146 10.971 16.1146 11.745Z",fill:"currentColor"})});var fu=l("react/jsx-runtime"),p_=()=>(0,fu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,fu.jsx)("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM15.1736 7.074V10.854H16.3706V12.033H15.1736V13.5H13.6796V12.033H10.5116V10.845L13.4996 7.074H15.1736ZM13.6796 8.46L11.8256 10.854H13.6796V8.46Z",fill:"currentColor"})});var gu=l("react/jsx-runtime"),m_=()=>(0,gu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,gu.jsx)("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.1576 10.269C12.6896 10.269 12.3746 10.494 12.2216 10.737H10.8176L11.1956 7.074H15.2546V8.28H12.3206L12.1856 9.549C12.4016 9.351 12.8516 9.126 13.4636 9.126C14.7866 9.126 15.6596 10.053 15.6596 11.358C15.6596 12.609 14.7326 13.608 13.1756 13.608C11.5826 13.608 10.6556 12.753 10.5566 11.511H12.1136C12.1586 12.06 12.5456 12.465 13.1576 12.465C13.8236 12.465 14.1746 11.97 14.1746 11.376C14.1746 10.764 13.8416 10.269 13.1576 10.269Z",fill:"currentColor"})});var hu=l("react/jsx-runtime"),u_=()=>(0,hu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,hu.jsx)("path",{d:"M3.639 13.5V7.074H5.196V9.648H8.076V7.074H9.642V13.5H8.076V10.836H5.196V13.5H3.639ZM13.3646 8.127C12.5456 8.127 12.0416 8.937 12.0416 9.999C12.3296 9.54 12.8246 9.207 13.5536 9.207C14.8586 9.207 15.8036 10.134 15.8036 11.376C15.8036 12.645 14.8226 13.608 13.3196 13.608C11.7266 13.608 10.6196 12.393 10.6196 10.395C10.6196 8.316 11.7716 6.966 13.4186 6.966C14.7056 6.966 15.5786 7.749 15.7316 8.829H14.3186C14.2016 8.415 13.9226 8.127 13.3646 8.127ZM13.3106 12.51C13.9586 12.51 14.3816 12.042 14.3816 11.385C14.3816 10.737 13.9586 10.278 13.3106 10.278C12.6536 10.278 12.2126 10.737 12.2126 11.385C12.2126 12.042 12.6536 12.51 13.3106 12.51Z",fill:"currentColor"})});var La=l("@lexical/rich-text");var bu=e=>(t,o,r)=>{let n=e(r);n&&(n.append(...o),t.replace(n),n.select(0,0))};var f_=e=>{let o=`^(${e.map(n=>Number(n.slice(1))).map(n=>`#{${n}}`).join("|")})\\s`,r=new RegExp(o);return{type:"element",dependencies:[La.HeadingNode],export:(n,i)=>{if(!(0,La.$isHeadingNode)(n))return null;let a=Number(n.getTag().slice(1));return"#".repeat(a)+" "+i(n)},regExp:r,replace:bu(n=>{let i="h"+n[1].length;return(0,La.$createHeadingNode)(i)})}};var g_=e=>{let t=(0,ac.$getSelection)();(0,b_.$setBlocksType)(t,()=>(0,wi.$createHeadingNode)(e))},h_={h1:s_,h2:d_,h3:c_,h4:p_,h5:m_,h6:u_},vF=X(({props:e})=>{let{enabledHeadingSizes:t=["h1","h2","h3","h4","h5","h6"]}=e,o=[wo(t.map((r,n)=>({ChildComponent:h_[r],isActive:({selection:i})=>{if(!(0,ac.$isRangeSelection)(i))return!1;for(let a of i.getNodes()){if((0,wi.$isHeadingNode)(a)&&a.getTag()===r)continue;let s=a.getParent();if(!((0,wi.$isHeadingNode)(s)&&s.getTag()===r))return!1}return!0},key:r,label:({i18n:i})=>i.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:i})=>{i.update(()=>{g_(r)})},order:n+2})))];return{markdownTransformers:[f_(t)],nodes:[wi.HeadingNode],sanitizedClientFeatureProps:e,slashMenu:{groups:t?.length?[Xt(t.map(r=>({Icon:h_[r],key:`heading-${r.charAt(1)}`,keywords:["heading",r],label:({i18n:n})=>n.t("lexical:heading:label",{headingLevel:r.charAt(1)}),onSelect:({editor:n})=>{n.update(()=>{g_(r)})}})))]:[]},toolbarFixed:{groups:t?.length?o:[]},toolbarInline:{groups:t?.length?o:[]}}});var R_=l("lexical");var xu=l("react/jsx-runtime"),yu=()=>(0,xu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,xu.jsx)("rect",{fill:"currentColor",height:"1",width:"12",x:"4",y:"9.5"})});var os=l("react/jsx-runtime"),x_=()=>(0,os.jsxs)("svg",{fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,os.jsx)("path",{d:"M5 10h10",stroke:"currentColor"}),(0,os.jsx)("path",{d:"M10 15V5",stroke:"currentColor"})]});var Zr=e=>({type:"dropdown",ChildComponent:x_,items:e,key:"add",order:10});ns();var P_={type:"element",dependencies:[Gn],export:(e,t)=>Ra(e)?"---":null,regExp:/^---\s*$/,replace:e=>{let t=Ma();t&&e.replace(t)}};ns();var F_=l("@lexical/react/LexicalComposerContext.js"),S_=l("@lexical/utils"),Ia=l("lexical"),L_=l("react");ns();var N_=()=>{let[e]=(0,F_.useLexicalComposerContext)();return(0,L_.useEffect)(()=>e.registerCommand(is,t=>{let o=(0,Ia.$getSelection)();if(!(0,Ia.$isRangeSelection)(o))return!1;if(o.focus.getNode()!==null){let n=Ma();(0,S_.$insertNodeToNearestRoot)(n)}return!0},Ia.COMMAND_PRIORITY_EDITOR),[e]),null};var TF=X({markdownTransformers:[P_],nodes:[Gn],plugins:[{Component:N_,position:"normal"}],slashMenu:{groups:[Xt([{Icon:yu,key:"horizontalRule",keywords:["hr","horizontal rule","line","separator"],label:({i18n:e})=>e.t("lexical:horizontalRule:label"),onSelect:({editor:e})=>{e.dispatchCommand(is,void 0)}}])]},toolbarFixed:{groups:[Zr([{ChildComponent:yu,isActive:({selection:e})=>{if(!(0,R_.$isNodeSelection)(e)||!e.getNodes().length)return!1;let t=e.getNodes()[0];return Ra(t)},key:"horizontalRule",label:({i18n:e})=>e.t("lexical:horizontalRule:label"),onSelect:({editor:e})=>{e.dispatchCommand(is,void 0)}}])]}});var lc=l("lexical");var ki=l("react/jsx-runtime"),D_=()=>(0,ki.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,ki.jsx)("path",{d:"M2.5 5H10.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,ki.jsx)("path",{d:"M2.5 10H10.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,ki.jsx)("path",{d:"M2.5 15H17.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,ki.jsx)("path",{d:"M12.25 7.25L17.25 3.75V10.75L12.25 7.25Z",fill:"currentColor"})]});var Ti=l("react/jsx-runtime"),M_=()=>(0,Ti.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ti.jsx)("path",{d:"M17.5 5H9.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,Ti.jsx)("path",{d:"M17.5 10H9.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,Ti.jsx)("path",{d:"M17.5 15H2.5",stroke:"currentColor",strokeWidth:"1.5"}),(0,Ti.jsx)("path",{d:"M7.75 7.25L2.75 3.75V10.75L7.75 7.25Z",fill:"currentColor"})]});var I_=e=>({type:"buttons",items:e,key:"indent",order:35});var A_=[I_([{ChildComponent:D_,isActive:()=>!1,isEnabled:({selection:e})=>{if(!e||!e?.getNodes()?.length)return!1;for(let t of e.getNodes())if("__indent"in t&&t.__indent>0||t.getParent()&&"__indent"in t.getParent()&&t.getParent().__indent>0)return!0;return!1},key:"indentDecrease",label:({i18n:e})=>e.t("lexical:indent:decreaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(lc.OUTDENT_CONTENT_COMMAND,void 0)},order:1},{ChildComponent:M_,isActive:()=>!1,key:"indentIncrease",label:({i18n:e})=>e.t("lexical:indent:increaseLabel"),onSelect:({editor:e})=>{e.dispatchCommand(lc.INDENT_CONTENT_COMMAND,void 0)},order:2}])],EF=X({toolbarFixed:{groups:A_},toolbarInline:{groups:A_}});var uw=l("@lexical/utils"),Fi=l("lexical");var Cu=l("react/jsx-runtime"),O_=()=>(0,Cu.jsx)("svg",{"aria-hidden":"true",className:"icon",fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,Cu.jsx)("path",{d:"M8.5 11.5L11.5 8.5M8.5 7L9.625 5.875C10.868 4.633 12.882 4.633 14.125 5.875C15.368 7.118 15.368 9.133 14.125 10.375L13 11.5M7 8.5L5.746 9.754C4.56 10.94 4.519 12.85 5.652 14.087C6.814 15.354 8.78 15.449 10.058 14.298L11.5 13",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})});var vu=l("@lexical/selection");function Aa(e){let{anchor:t}=e,{focus:o}=e,r=e.anchor.getNode(),n=e.focus.getNode();return r===n?r:e.isBackward()?(0,vu.$isAtNodeEnd)(o)?r:n:(0,vu.$isAtNodeEnd)(t)?r:n}var _u=e=>({type:"buttons",items:e,key:"features",order:50});var cc=l("lexical");var sc=l("@lexical/utils"),dc=F(l("bson-objectid"),1),Pt=l("lexical"),PF=new Set(["http:","https:","mailto:","sms:","tel:"]),ko=class e extends Pt.ElementNode{__fields;__id;constructor({id:t,fields:o={doc:null,linkType:"custom",newTab:!1,url:void 0},key:r}){super(r),this.__fields=o,this.__id=t}static clone(t){return new e({id:t.__id,fields:t.__fields,key:t.__key})}static getType(){return"link"}static importDOM(){return{a:t=>({conversion:FF,priority:1})}}static importJSON(t){t.version===1&&typeof t.fields?.doc?.value=="object"&&t.fields?.doc?.value?.id&&(t.fields.doc.value=t.fields.doc.value.id,t.version=2),t.version===2&&!t.id&&(t.id=new dc.default.default().toHexString(),t.version=3);let o=en({id:t.id,fields:t.fields});return o.setFormat(t.format),o.setIndent(t.indent),o.setDirection(t.direction),o}canBeEmpty(){return!1}canInsertTextAfter(){return!1}canInsertTextBefore(){return!1}createDOM(t){let o=document.createElement("a");return this.__fields?.linkType==="custom"&&(o.href=this.sanitizeUrl(this.__fields.url??"")),(this.__fields?.newTab??!1)&&(o.target="_blank"),this.__fields?.newTab===!0&&this.__fields?.linkType==="custom"&&(o.rel=wu(o.rel,"add","noopener")),(0,sc.addClassNamesToElement)(o,t.theme.link),o}exportJSON(){let t={...super.exportJSON(),type:"link",fields:this.getFields(),version:3},o=this.getID();return o&&(t.id=o),t}extractWithChild(t,o,r){if(!(0,Pt.$isRangeSelection)(o))return!1;let n=o.anchor.getNode(),i=o.focus.getNode();return this.isParentOf(n)&&this.isParentOf(i)&&o.getTextContent().length>0}getFields(){return this.getLatest().__fields}getID(){return this.getLatest().__id}insertNewAfter(t,o=!0){let r=this.getParentOrThrow().insertNewAfter(t,o);if((0,Pt.$isElementNode)(r)){let n=en({fields:this.__fields});return r.append(n),n}return null}isInline(){return!0}sanitizeUrl(t){try{let o=new URL(t);if(!PF.has(o.protocol))return"about:blank"}catch{return"https://"}return t}setFields(t){let o=this.getWritable();o.__fields=t}updateDOM(t,o,r){let n=this.__fields?.url,i=this.__fields?.newTab;return n!=null&&n!==t.__fields?.url&&this.__fields?.linkType==="custom"&&(o.href=n),this.__fields?.linkType==="internal"&&t.__fields?.linkType==="custom"&&o.removeAttribute("href"),o.rel==null&&(o.rel=""),i!==t.__fields?.newTab&&(i??!1?(o.target="_blank",this.__fields?.linkType==="custom"&&(o.rel=wu(o.rel,"add","noopener"))):(o.removeAttribute("target"),o.rel=wu(o.rel,"remove","noopener"))),!1}};function FF(e){let t=null;if((0,sc.isHTMLAnchorElement)(e)){let o=e.textContent;o!==null&&o!==""&&(t=en({id:new dc.default.default().toHexString(),fields:{doc:null,linkType:"custom",newTab:e.getAttribute("target")==="_blank",url:e.getAttribute("href")??""}}))}return{node:t}}function en({id:e,fields:t}){return(0,Pt.$applyNodeReplacement)(new ko({id:e??new dc.default.default().toHexString(),fields:t}))}function qt(e){return e instanceof ko}var Fr=(0,Pt.createCommand)("TOGGLE_LINK_COMMAND");function $_(e){let t=(0,Pt.$getSelection)();if(!(0,Pt.$isRangeSelection)(t)&&!e.selectedNodes.length)return;let o=(0,Pt.$isRangeSelection)(t)?t.extract():e.selectedNodes;if(e===null)o.forEach(r=>{let n=r.getParent();if(qt(n)){let i=n.getChildren();for(let a=0;a<i.length;a+=1)n.insertBefore(i[a]);n.remove()}});else{if(o.length===1){let i=o[0],a=qt(i)?i:SF(i);if(a!==null){a.setFields(e.fields),e.text!=null&&e.text!==a.getTextContent()&&(a.append((0,Pt.$createTextNode)(e.text)),a.getChildren().forEach(s=>{s!==a.getLastChild()&&s.remove()}));return}}let r=null,n=null;o.forEach(i=>{let a=i.getParent();if(!(a===n||a===null||(0,Pt.$isElementNode)(i)&&!i.isInline())){if(qt(a)){n=a,a.setFields(e.fields),e.text!=null&&e.text!==a.getTextContent()&&(a.append((0,Pt.$createTextNode)(e.text)),a.getChildren().forEach(s=>{s!==a.getLastChild()&&s.remove()}));return}if(a.is(r)||(r=a,n=en({fields:e.fields}),qt(a)?i.getPreviousSibling()===null?a.insertBefore(n):a.insertAfter(n):i.insertBefore(n)),qt(i)){if(i.is(n))return;if(n!==null){let s=i.getChildren();for(let d=0;d<s.length;d+=1)n.append(s[d])}i.remove();return}n!==null&&n.append(i)}})}}function SF(e){return LF(e,t=>qt(t))}function LF(e,t){let o=e;for(;o!==null&&(o=o.getParent())!==null&&!t(o););return o}function wu(e,t,o){let r,n=`${e}`;if(t==="add"){if(n.includes(o)){let i=new RegExp(o,"g");n=n.replace(i,"").trim()}n=n.trim(),r=n.length===0?`${o}`:`${n} ${o}`}else{let i=new RegExp(o,"g");r=n.replace(i,"").trim()}return r}var B_={type:"text-match",dependencies:[ko],export:(e,t,o)=>{if(!qt(e))return null;let r=e,{url:n}=r.getFields(),i=`[${r.getTextContent()}](${n})`,a=r.getFirstChild();return r.getChildrenSize()===1&&(0,cc.$isTextNode)(a)?o(a,i):i},importRegExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)/,regExp:/\[([^[]+)\]\(([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?\)$/,replace:(e,t)=>{let[,o,r]=t,n=en({fields:{doc:null,linkType:"custom",newTab:!1,url:r}}),i=(0,cc.$createTextNode)(o);i.setFormat(e.getFormat()),n.append(i),e.replace(n)},trigger:")"};var pc=l("lexical");var tn=class e extends ko{static clone(t){return new e({id:void 0,fields:t.__fields,key:t.__key})}static getType(){return"autolink"}static importDOM(){return null}static importJSON(t){t.version===1&&typeof t.fields?.doc?.value=="object"&&t.fields?.doc?.value?.id&&(t.fields.doc.value=t.fields.doc.value.id,t.version=2);let o=as({fields:t.fields});return o.setFormat(t.format),o.setIndent(t.indent),o.setDirection(t.direction),o}exportJSON(){let t=super.exportJSON();return{type:"autolink",children:t.children,direction:t.direction,fields:t.fields,format:t.format,indent:t.indent,version:2}}insertNewAfter(t,o=!0){let r=this.getParentOrThrow().insertNewAfter(t,o);if((0,pc.$isElementNode)(r)){let n=as({fields:this.__fields});return r.append(n),n}return null}};function as({fields:e}){return(0,pc.$applyNodeReplacement)(new tn({id:void 0,fields:e}))}function on(e){return e instanceof tn}var z_=l("@lexical/react/LexicalComposerContext.js"),U_=l("@lexical/utils"),Ke=l("lexical"),j_=l("react");function Ei(e,t,...o){if(!e)throw new Error("Internal Lexical error: invariant() is meant to be replaced at compile time. There is no runtime version. Error: "+t)}function H_(e,t=o=>o){return o=>{let r=e.exec(o);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])}}}function V_(e,t){for(let o=0;o<t.length;o++){let r=t[o](e);if(r!=null)return r}return null}var NF=/[.,;\s]/;function uc(e){return NF.test(e)}function G_(e){return uc(e[e.length-1])}function Tu(e){return uc(e[0])}function RF(e){return/^\.[a-z\d]+/i.test(e)}function W_(e){let t=e.getPreviousSibling();return(0,Ke.$isElementNode)(t)&&(t=t.getLastDescendant()),t===null||(0,Ke.$isLineBreakNode)(t)||(0,Ke.$isTextNode)(t)&&G_(t.getTextContent())}function K_(e){let t=e.getNextSibling();return(0,Ke.$isElementNode)(t)&&(t=t.getFirstDescendant()),t===null||(0,Ke.$isLineBreakNode)(t)||(0,Ke.$isTextNode)(t)&&Tu(t.getTextContent())}function DF(e,t,o,r){return(e>0?uc(o[e-1]):W_(r[0]))?t<o.length?uc(o[t]):K_(r[r.length-1]):!1}function MF(e,t,o){let r=[],n=[],i=[],a=0,s=0,d=[...e];for(;d.length>0;){let c=d[0],u=c.getTextContent().length,m=s;s+u<=t?(r.push(c),a+=u):m>=o?i.push(c):n.push(c),s+=u,d.shift()}return[a,r,n,i]}function IF(e,t,o,r){let n={linkType:"custom",url:r.url,...r.fields},i=as({fields:n});if(e.length===1){let a=e[0],s;t===0?[s,a]=a.splitText(o):[,s,a]=a.splitText(t,o);let d=(0,Ke.$createTextNode)(r.text);return d.setFormat(s.getFormat()),d.setDetail(s.getDetail()),d.setStyle(s.getStyle()),i.append(d),s.replace(i),a}else if(e.length>1){let a=e[0],s=a.getTextContent().length,d;t===0?d=a:[,d]=a.splitText(t);let c=[],p;for(let h=1;h<e.length;h++){let g=e[h],y=g.getTextContent().length,v=s,E=s+y;if(v<o)if(E<=o)c.push(g);else{let[w,C]=g.splitText(o-v);c.push(w),p=C}s+=y}let u=(0,Ke.$getSelection)(),m=u?u.getNodes().find(Ke.$isTextNode):void 0,f=(0,Ke.$createTextNode)(d.getTextContent());return f.setFormat(d.getFormat()),f.setDetail(d.getDetail()),f.setStyle(d.getStyle()),i.append(f,...c),m&&m===d&&((0,Ke.$isRangeSelection)(u)?f.select(u.anchor.offset,u.focus.offset):(0,Ke.$isNodeSelection)(u)&&f.select(0,f.getTextContent().length)),d.replace(i),p}}function AF(e,t,o){let r=[...e],n=r.map(d=>d.getTextContent()).join(""),i=n,a,s=0;for(;(a=V_(i,t))!=null&&a!==null;){let d=a.index,c=a.length,p=d+c;if(DF(s+d,s+p,n,r)){let[m,,f,h]=MF(r,s+d,s+p),g=s+d-m,x=s+p-m,y=IF(f,g,x,a);r=y?[y,...h]:h,o(a.url,null),s=0}else s+=p;i=i.substring(p)}}function ku(e,t,o){let r=e.getChildren(),n=r.length;for(let d=0;d<n;d++){let c=r[d];if(!(0,Ke.$isTextNode)(c)||!c.isSimpleText()){mc(e),o(null,e.getFields()?.url??null);return}}let i=e.getTextContent(),a=V_(i,t);if(a===null||a.text!==i){mc(e),o(null,e.getFields()?.url??null);return}if(!W_(e)||!K_(e)){mc(e),o(null,e.getFields()?.url??null);return}let s=e.getFields()?.url;if(s!==a?.url){let d=e.getFields();d.url=a?.url,e.setFields(d),o(a.url,s??null)}}function OF(e,t,o){let r=e.getPreviousSibling(),n=e.getNextSibling(),i=e.getTextContent();on(r)&&(!Tu(i)||RF(i))&&(r.append(e),ku(r,t,o),o(null,r.getFields()?.url??null)),on(n)&&!G_(i)&&(mc(n),ku(n,t,o),o(null,n.getFields()?.url??null))}function mc(e){let t=e.getChildren(),o=t.length;for(let r=o-1;r>=0;r--)e.insertAfter(t[r]);return e.remove(),t.map(r=>r.getLatest())}function $F(e){let t=[e],o=e.getNextSibling();for(;o!==null&&(0,Ke.$isTextNode)(o)&&o.isSimpleText()&&(t.push(o),!/\s/.test(o.getTextContent()));)o=o.getNextSibling();return t}function BF(e,t,o){(0,j_.useEffect)(()=>{e.hasNodes([tn])||Ei(!1,"LexicalAutoLinkPlugin: AutoLinkNode not registered on editor");let r=(n,i)=>{o?.(n,i)};return(0,U_.mergeRegister)(e.registerNodeTransform(Ke.TextNode,n=>{let i=n.getParentOrThrow(),a=n.getPreviousSibling();if(on(i))ku(i,t,r);else if(!qt(i)){if(n.isSimpleText()&&(Tu(n.getTextContent())||!on(a))){let s=$F(n);AF(s,t,r)}OF(n,t,r)}}))},[e,t,o])}var HF=/((https?:\/\/(www\.)?)|(www\.))[-\w@:%.+~#=]{1,256}\.[a-zA-Z\d()]{1,6}\b([-\w()@:%+.~#?&/=]*)(?<![-.+():%])/,zF=/(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}\])|(([a-z\-\d]+\.)+[a-z]{2,}))/i,UF=[H_(HF,e=>e.startsWith("http")?e:`https://${e}`),H_(zF,e=>`mailto:${e}`)],q_=()=>{let[e]=(0,z_.useLexicalComposerContext)();return BF(e,UF),null};var Q_=l("@lexical/react/LexicalClickableLinkPlugin.js"),Y_=l("react/jsx-runtime"),J_=()=>(0,Y_.jsx)(Q_.ClickableLinkPlugin,{});var X_=l("lexical"),fc=(0,X_.createCommand)("TOGGLE_LINK_WITH_MODAL_COMMAND");var iw=l("react-dom");var ow=l("@lexical/react/LexicalComposerContext.js"),$a=l("@lexical/utils"),rw=l("@payloadcms/translations");Ie();var At=l("lexical"),ct=F(l("react"),1);Et();function gc(e,t,o,r=10,n=5){let i=o.parentElement;if(e===null||i==null){t.style.opacity="0",t.style.transform="translate(-10000px, -10000px)";return}let a=t.getBoundingClientRect(),s=o.getBoundingClientRect(),d=i.getBoundingClientRect(),c=e.top-r,p=e.left-n;c<d.top&&(c+=a.height+e.height+r*2),p+a.width>d.right&&(p=d.right-a.width-n),c-=s.top,p-=s.left,t.style.opacity="1",t.style.transform=`translate(${p}px, ${c}px)`}ss();var or=l("react/jsx-runtime");function nw({anchorElem:e}){let[t]=(0,ow.useLexicalComposerContext)(),o=(0,ct.useRef)(null),[r,n]=(0,ct.useState)(null),[i,a]=(0,ct.useState)(null),{uuid:s}=be(),d=J(),{i18n:c,t:p}=M(),[u,m]=(0,ct.useState)(null),{closeModal:f,toggleModal:h}=(0,Mo.useModal)(),g=gt(),[x,y]=(0,ct.useState)(!1),[v,E]=(0,ct.useState)([]),[w,C]=(0,ct.useState)(!1),S=di({slug:"lexical-rich-text-link-"+s,depth:g}),L=(0,ct.useCallback)(()=>{y(!1),o&&o.current&&(o.current.style.opacity="0",o.current.style.transform="translate(-10000px, -10000px)"),C(!1),n(null),a(null),E([]),m(null)},[y,n,a,E]),N=(0,ct.useCallback)(()=>{let _=(0,At.$getSelection)(),T=null;if(!(0,At.$isRangeSelection)(_)||!_){L();return}let k=Aa(_);T=t.getElementByKey(k.getKey())?.getBoundingClientRect();let P=(0,$a.$findMatchingParent)(k,qt),R=_.getNodes().filter($=>!(0,At.$isLineBreakNode)($)).find($=>{let H=(0,$a.$findMatchingParent)($,qt);return P&&!P.is(H)||H&&!H.is(P)});if(P==null||R){L();return}let D={doc:void 0,linkType:void 0,newTab:void 0,url:"",...P.getFields(),id:P.getID(),text:P.getTextContent()};if(P.getFields()?.linkType==="custom")n(P.getFields()?.url??null),a(null);else{n(`/admin/collections/${P.getFields()?.doc?.relationTo}/${P.getFields()?.doc?.value}`);let $=d.collections.find(H=>H.slug===P.getFields()?.doc?.relationTo);if(!$)a(P.getFields()?.label?String(P.getFields()?.label):null),n(P.getFields()?.url?String(P.getFields()?.url):null);else{let H=p("fields:linkedTo",{label:(0,rw.getTranslation)($.labels.singular,c)}).replace(/<[^>]*>?/g,"");a(H)}}m(D),y(!0),E(_?_?.getNodes():[]),on(P)?C(!0):C(!1);let I=o.current,A=window.getSelection(),{activeElement:O}=document;if(I===null)return;let B=t.getRootElement();return A!==null&&B!==null&&B.contains(A.anchorNode)?(T||(T=A.getRangeAt(0).getBoundingClientRect()),T!=null&&(T.y+=40,gc(T,I,e))):(O==null||O.className!=="link-input")&&(B!==null&&gc(null,I,e),n(null),a(null)),!0},[t,L,d.collections,p,c,e]);return(0,ct.useEffect)(()=>(0,$a.mergeRegister)(t.registerCommand(fc,_=>(t.dispatchCommand(Fr,_),N(),h(S),!0),At.COMMAND_PRIORITY_LOW)),[t,N,h,S]),(0,ct.useEffect)(()=>{let _=e.parentElement,T=()=>{t.getEditorState().read(()=>{N()})};return window.addEventListener("resize",T),_?.addEventListener("scroll",T),()=>{window.removeEventListener("resize",T),_?.removeEventListener("scroll",T)}},[e.parentElement,t,N]),(0,ct.useEffect)(()=>(0,$a.mergeRegister)(t.registerUpdateListener(({editorState:_})=>{_.read(()=>{N()})}),t.registerCommand(At.SELECTION_CHANGE_COMMAND,()=>(N(),!0),At.COMMAND_PRIORITY_LOW),t.registerCommand(At.KEY_ESCAPE_COMMAND,()=>x?(L(),!0):!1,At.COMMAND_PRIORITY_HIGH)),[t,N,x,L]),(0,ct.useEffect)(()=>{t.getEditorState().read(()=>{N()})},[t,N]),(0,or.jsxs)(ct.default.Fragment,{children:[(0,or.jsx)("div",{className:"link-editor",ref:o,children:(0,or.jsxs)("div",{className:"link-input",children:[r&&r.length>0?(0,or.jsx)("a",{href:r,rel:"noopener noreferrer",target:"_blank",children:i!=null&&i.length>0?i:r}):i!=null&&i.length>0?(0,or.jsx)("span",{className:"link-input__label-pure",children:i}):null,t.isEditable()&&(0,or.jsxs)(ct.default.Fragment,{children:[(0,or.jsx)("button",{"aria-label":"Edit link",className:"link-edit",onClick:()=>{h(S)},onMouseDown:_=>{_.preventDefault()},tabIndex:0,type:"button"}),!w&&(0,or.jsx)("button",{"aria-label":"Remove link",className:"link-trash",onClick:()=>{t.dispatchCommand(Fr,null)},onMouseDown:_=>{_.preventDefault()},tabIndex:0,type:"button"})]})]})}),(0,or.jsx)(Pi,{className:"lexical-link-edit-drawer",data:u,drawerSlug:S,drawerTitle:p("fields:editLink"),featureKey:"link",handleDrawerSubmit:(_,T)=>{f(S);let k=T,P={...k};delete P.text,t.update(()=>{let R=(0,At.$getSelection)(),D=null;if((0,At.$isRangeSelection)(R)?D=Aa(R).getParent():v.length&&(D=v[0].getParent()),D&&on(D)){let I=en({fields:P});D.replace(I,!0)}}),t.dispatchCommand(Fr,{fields:P,selectedNodes:v,text:k.text})},schemaPathSuffix:"fields"})]})}var lw=l("react/jsx-runtime"),aw=e=>{let{anchorElem:t=document.body}=e;return(0,iw.createPortal)((0,lw.jsx)(nw,{anchorElem:t}),t)};var sw=l("@lexical/react/LexicalComposerContext.js"),dw=l("@lexical/utils"),rr=l("lexical"),cw=l("react");var jF=/(?:[A-Za-z]{3,9}:(?:\/\/)?(?:[-;:&=+$,\w]+@)?[A-Za-z\d.-]+|(?:www.|[-;:&=+$,\w]+@)[A-Za-z\d.-]+)(?:\/[+~%/.\w-]*)?\??[-+=&;%@.\w]*#?\w*/,VF=/^[\w\-./]*(?:#\w[\w-]*)?$/;function Pu(e){if(!e)return!1;if(e==="https://"||jF.test(e)||VF.test(e))return!0;try{return new URL(e),!0}catch{}return!1}var pw=()=>{let[e]=(0,sw.useLexicalComposerContext)();return(0,cw.useEffect)(()=>{if(!e.hasNodes([ko]))throw new Error("LinkPlugin: LinkNode not registered on editor");return(0,dw.mergeRegister)(e.registerCommand(Fr,t=>($_(t),!0),rr.COMMAND_PRIORITY_LOW),Pu!==void 0?e.registerCommand(rr.PASTE_COMMAND,t=>{let o=(0,rr.$getSelection)();if(!(0,rr.$isRangeSelection)(o)||o.isCollapsed()||!(t instanceof ClipboardEvent)||t.clipboardData==null)return!1;let r=t.clipboardData.getData("text");if(!Pu(r))return!1;if(!o.getNodes().some(n=>(0,rr.$isElementNode)(n))){let n={doc:null,linkType:"custom",newTab:!1,url:r};return e.dispatchCommand(Fr,{fields:n,text:null}),t.preventDefault(),!0}return!1},rr.COMMAND_PRIORITY_LOW):()=>{})},[e]),null};var mw=[_u([{ChildComponent:O_,isActive:({selection:e})=>{if((0,Fi.$isRangeSelection)(e)){let t=Aa(e);return(0,uw.$findMatchingParent)(t,qt)!=null}return!1},isEnabled:({selection:e})=>!!((0,Fi.$isRangeSelection)(e)&&(0,Fi.$getSelection)()?.getTextContent()?.length),key:"link",label:({i18n:e})=>e.t("lexical:link:label"),onSelect:({editor:e,isActive:t})=>{if(t)e.dispatchCommand(Fr,null);else{let o=null,r=[];if(e.getEditorState().read(()=>{o=(0,Fi.$getSelection)()?.getTextContent(),r=(0,Fi.$getSelection)()?.getNodes()??[]}),!o?.length)return;let n={doc:null,linkType:"custom",newTab:!1,url:"https://"};e.dispatchCommand(fc,{fields:n,selectedNodes:r,text:o})}},order:1}])],GF=X({markdownTransformers:[B_],nodes:[ko,tn],plugins:[{Component:pw,position:"normal"},{Component:q_,position:"normal"},{Component:J_,position:"normal"},{Component:aw,position:"floatingAnchorElem"}],toolbarFixed:{groups:mw},toolbarInline:{groups:mw}});var nr=l("@lexical/list"),_w=l("lexical");var ds=l("react/jsx-runtime"),Fu=()=>(0,ds.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,ds.jsx)("rect",{height:"13",rx:"1.5",stroke:"currentColor",width:"13",x:"3.5",y:"3.5"}),(0,ds.jsx)("path",{d:"M7 10L9 12.5L13 7.5",stroke:"currentColor",strokeWidth:"1.5"})]});var fw=l("@lexical/react/LexicalListPlugin.js"),gw=l("react/jsx-runtime"),Ba=()=>(0,gw.jsx)(fw.ListPlugin,{});function Ha(e){return{items:e,key:"lists",label:({i18n:t})=>t.t("lexical:general:slashMenuListGroupLabel")}}var Ua=l("@lexical/list");var Sr=l("@lexical/list"),hw=4,za=e=>(t,o,r)=>{let n=t.getPreviousSibling(),i=t.getNextSibling(),a=(0,Sr.$createListItemNode)(e==="check"?r[3]==="x":void 0);if((0,Sr.$isListNode)(i)&&i.getListType()===e){let d=i.getFirstChild();d!==null?d.insertBefore(a):i.append(a),t.remove()}else if((0,Sr.$isListNode)(n)&&n.getListType()===e)n.append(a),t.remove();else{let d=(0,Sr.$createListNode)(e,e==="number"?Number(r[2]):void 0);d.append(a),t.replace(d)}a.append(...o),a.select(0,0);let s=Math.floor(r[1].length/hw);s&&a.setIndent(s)},Si=(e,t,o)=>{let r=[],n=e.getChildren(),i=0;for(let a of n)if((0,Sr.$isListItemNode)(a)){if(a.getChildrenSize()===1){let p=a.getFirstChild();if((0,Sr.$isListNode)(p)){r.push(Si(p,t,o+1));continue}}let s=" ".repeat(o*hw),d=e.getListType(),c=d==="number"?`${e.getStart()+i}. `:d==="check"?`- [${a.getChecked()?"x":" "}] `:"- ";r.push(s+c+t(a)),i++}return r.join(`
`)};var bw={type:"element",dependencies:[Ua.ListNode,Ua.ListItemNode],export:(e,t)=>(0,Ua.$isListNode)(e)?Si(e,t,0):null,regExp:/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,replace:za("check")};var xw=l("@lexical/react/LexicalCheckListPlugin.js"),Cw=l("react/jsx-runtime"),yw=()=>(0,Cw.jsx)(xw.CheckListPlugin,{});var vw=[wo([{ChildComponent:Fu,isActive:({selection:e})=>{if(!(0,_w.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,nr.$isListNode)(t)&&t.getListType()==="check")continue;let o=t.getParent();if((0,nr.$isListNode)(o)&&o.getListType()==="check")continue;let r=o?.getParent();if(!((0,nr.$isListNode)(r)&&r.getListType()==="check"))return!1}return!0},key:"checklist",label:({i18n:e})=>e.t("lexical:checklist:label"),onSelect:({editor:e})=>{e.dispatchCommand(nr.INSERT_CHECK_LIST_COMMAND,void 0)},order:12}])],WF=X(({featureProviderMap:e})=>{let t=[{Component:yw,position:"normal"}];return!e.has("unorderedList")&&!e.has("orderedList")&&t.push({Component:Ba,position:"normal"}),{markdownTransformers:[bw],nodes:e.has("unorderedList")||e.has("orderedList")?[]:[nr.ListNode,nr.ListItemNode],plugins:t,slashMenu:{groups:[Ha([{Icon:Fu,key:"checklist",keywords:["check list","check","checklist","cl"],label:({i18n:o})=>o.t("lexical:checklist:label"),onSelect:({editor:o})=>{o.dispatchCommand(nr.INSERT_CHECK_LIST_COMMAND,void 0)}}])]},toolbarFixed:{groups:vw},toolbarInline:{groups:vw}}});var ir=l("@lexical/list"),Tw=l("lexical");var Wn=l("react/jsx-runtime"),Su=()=>(0,Wn.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Wn.jsx)("path",{d:"M5.89284 12.479C5.89284 13.368 5.26284 13.788 4.38084 14.236C3.75084 14.558 3.43584 14.789 3.40784 15.062H5.89984V16H2.06384V15.573C2.06384 14.523 2.92484 13.935 3.66684 13.501C4.38084 13.088 4.75184 12.878 4.75184 12.458C4.75184 12.08 4.52084 11.835 4.06584 11.835C3.58984 11.835 3.30984 12.199 3.28184 12.654H2.11284C2.18984 11.681 2.87584 10.918 4.07284 10.918C5.15784 10.918 5.89284 11.555 5.89284 12.479Z",fill:"currentColor"}),(0,Wn.jsx)("path",{d:"M2.68608 4.535V3.737C3.54008 3.737 3.90408 3.513 4.02308 2.995H4.89108V8H3.68008L3.68008 4.535H2.68608Z",fill:"currentColor"}),(0,Wn.jsx)("path",{d:"M8 15L17 15",stroke:"currentColor",strokeWidth:"1.5"}),(0,Wn.jsx)("path",{d:"M8 10L17 10",stroke:"currentColor",strokeWidth:"1.5"}),(0,Wn.jsx)("path",{d:"M8 5L17 5",stroke:"currentColor",strokeWidth:"1.5"})]});var ja=l("@lexical/list");var ww={type:"element",dependencies:[ja.ListNode,ja.ListItemNode],export:(e,t)=>(0,ja.$isListNode)(e)?Si(e,t,0):null,regExp:/^(\s*)(\d+)\.\s/,replace:za("number")};var kw=[wo([{ChildComponent:Su,isActive:({selection:e})=>{if(!(0,Tw.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,ir.$isListNode)(t)&&t.getListType()==="number")continue;let o=t.getParent();if((0,ir.$isListNode)(o)&&o.getListType()==="number")continue;let r=o?.getParent();if(!((0,ir.$isListNode)(r)&&r.getListType()==="number"))return!1}return!0},key:"orderedList",label:({i18n:e})=>e.t("lexical:orderedList:label"),onSelect:({editor:e})=>{e.dispatchCommand(ir.INSERT_ORDERED_LIST_COMMAND,void 0)},order:10}])],KF=X(({featureProviderMap:e})=>({markdownTransformers:[ww],nodes:e.has("orderedList")?[]:[ir.ListNode,ir.ListItemNode],plugins:e.has("orderedList")?[]:[{Component:Ba,position:"normal"}],slashMenu:{groups:[Ha([{Icon:Su,key:"orderedList",keywords:["ordered list","ol"],label:({i18n:t})=>t.t("lexical:orderedList:label"),onSelect:({editor:t})=>{t.dispatchCommand(ir.INSERT_ORDERED_LIST_COMMAND,void 0)}}])]},toolbarFixed:{groups:kw},toolbarInline:{groups:kw}}));var ar=l("@lexical/list"),Fw=l("lexical");var rn=l("react/jsx-runtime"),Lu=()=>(0,rn.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,rn.jsx)("circle",{cx:"4",cy:"5",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),(0,rn.jsx)("circle",{cx:"4",cy:"10",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),(0,rn.jsx)("circle",{cx:"4",cy:"15",fill:"currentColor",r:"1.15",stroke:"currentColor",strokeWidth:"0.3"}),(0,rn.jsx)("path",{d:"M17 5H7",stroke:"currentColor",strokeWidth:"1.5"}),(0,rn.jsx)("path",{d:"M17 10H7",stroke:"currentColor",strokeWidth:"1.5"}),(0,rn.jsx)("path",{d:"M17 15H7",stroke:"currentColor",strokeWidth:"1.5"})]});var Va=l("@lexical/list");var Ew={type:"element",dependencies:[Va.ListNode,Va.ListItemNode],export:(e,t)=>(0,Va.$isListNode)(e)?Si(e,t,0):null,regExp:/^(\s*)[-*+]\s/,replace:za("bullet")};var Pw=[wo([{ChildComponent:Lu,isActive:({selection:e})=>{if(!(0,Fw.$isRangeSelection)(e))return!1;for(let t of e.getNodes()){if((0,ar.$isListNode)(t)&&t.getListType()==="bullet")continue;let o=t.getParent();if((0,ar.$isListNode)(o)&&o.getListType()==="bullet")continue;let r=o?.getParent();if(!((0,ar.$isListNode)(r)&&r.getListType()==="bullet"))return!1}return!0},key:"unorderedList",label:({i18n:e})=>e.t("lexical:unorderedList:label"),onSelect:({editor:e})=>{e.dispatchCommand(ar.INSERT_UNORDERED_LIST_COMMAND,void 0)},order:11}])],qF=X({markdownTransformers:[Ew],nodes:[ar.ListNode,ar.ListItemNode],plugins:[{Component:Ba,position:"normal"}],slashMenu:{groups:[Ha([{Icon:Lu,key:"unorderedList",keywords:["unordered list","ul"],label:({i18n:e})=>e.t("lexical:unorderedList:label"),onSelect:({editor:e})=>{e.dispatchCommand(ar.INSERT_UNORDERED_LIST_COMMAND,void 0)}}])]},toolbarFixed:{groups:Pw},toolbarInline:{groups:Pw}});function Sw({converters:e,lexicalPluginData:t}){return{root:{type:"root",children:Lw({converters:e,lexicalPluginNodes:t?.jsonContent?.root?.children||[],parentNodeType:"root"}),direction:t?.jsonContent?.root?.direction||"ltr",format:t?.jsonContent?.root?.format||"",indent:t?.jsonContent?.root?.indent||0,version:1}}}function Lw({converters:e,lexicalPluginNodes:t,parentNodeType:o}){if(!t?.length)return[];let r=e.find(n=>n.nodeTypes.includes("unknown"));return t.map((n,i)=>{if(n.type==="paragraph")return QF(e,n);if(n.type==="text"||!n.type)return n;let a=e.find(s=>s.nodeTypes.includes(n.type));return a?a.converter({childIndex:i,converters:e,lexicalPluginNode:n,parentNodeType:o}):(console.warn("lexicalPluginToLexical > No converter found for node type: "+n.type),r?.converter({childIndex:i,converters:e,lexicalPluginNode:n,parentNodeType:o}))})||[]}function QF(e,t){return{...t,type:"paragraph",children:Lw({converters:e,lexicalPluginNodes:t.children||[],parentNodeType:"paragraph"}),version:1}}var Mw=l("@lexical/utils"),Iw=l("lexical"),Aw=F(l("react"),1),Ow=l("react/jsx-runtime"),YF=Aw.lazy(()=>Promise.resolve().then(()=>(Dw(),Rw)).then(e=>({default:e.UnknownConvertedNodeComponent}))),cs=class e extends Iw.DecoratorNode{__data;constructor({data:t,key:o}){super(o),this.__data=t}static clone(t){return new e({data:t.__data,key:t.__key})}static getType(){return"unknownConverted"}static importJSON(t){return XF({data:t.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(t){let o=document.createElement("span");return(0,Mw.addClassNamesToElement)(o,"unknownConverted"),o}decorate(){return(0,Ow.jsx)(YF,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(t,o){return!1}};function XF({data:e}){return new cs({data:e})}var ZF=X(({clientFunctions:e})=>{let t=Object.values(e);return{hooks:{load({incomingEditorState:o}){return!o||!("jsonContent"in o)?o:Sw({converters:t,lexicalPluginData:o})}},nodes:[cs]}});var re={DOM_ELEMENT_TYPE:1,DOM_TEXT_TYPE:3,NO_DIRTY_NODES:0,HAS_DIRTY_NODES:1,FULL_RECONCILE:2,IS_NORMAL:0,IS_TOKEN:1,IS_SEGMENTED:2,IS_INERT:3,IS_BOLD:1,IS_ITALIC:2,IS_STRIKETHROUGH:4,IS_UNDERLINE:8,IS_CODE:16,IS_SUBSCRIPT:32,IS_SUPERSCRIPT:64,IS_HIGHLIGHT:128,IS_DIRECTIONLESS:1,IS_UNMERGEABLE:2,IS_ALIGN_LEFT:1,IS_ALIGN_CENTER:2,IS_ALIGN_RIGHT:3,IS_ALIGN_JUSTIFY:4,IS_ALIGN_START:5,IS_ALIGN_END:6},eS=re.IS_BOLD|re.IS_ITALIC|re.IS_STRIKETHROUGH|re.IS_UNDERLINE|re.IS_CODE|re.IS_SUBSCRIPT|re.IS_SUPERSCRIPT|re.IS_HIGHLIGHT,tS="\xA0",oS=`

`,$w="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Bw="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",rS=new RegExp("^[^"+Bw+"]*["+$w+"]"),nS=new RegExp("^[^"+$w+"]*["+Bw+"]"),iS={bold:re.IS_BOLD,code:re.IS_CODE,highlight:re.IS_HIGHLIGHT,italic:re.IS_ITALIC,strikethrough:re.IS_STRIKETHROUGH,subscript:re.IS_SUBSCRIPT,superscript:re.IS_SUPERSCRIPT,underline:re.IS_UNDERLINE},aS={directionless:re.IS_DIRECTIONLESS,unmergeable:re.IS_UNMERGEABLE},lS={center:re.IS_ALIGN_CENTER,end:re.IS_ALIGN_END,justify:re.IS_ALIGN_JUSTIFY,left:re.IS_ALIGN_LEFT,right:re.IS_ALIGN_RIGHT,start:re.IS_ALIGN_START},sS={[re.IS_ALIGN_CENTER]:"center",[re.IS_ALIGN_END]:"end",[re.IS_ALIGN_JUSTIFY]:"justify",[re.IS_ALIGN_LEFT]:"left",[re.IS_ALIGN_RIGHT]:"right",[re.IS_ALIGN_START]:"start"},dS={normal:re.IS_NORMAL,segmented:re.IS_SEGMENTED,token:re.IS_TOKEN},cS={[re.IS_NORMAL]:"normal",[re.IS_SEGMENTED]:"segmented",[re.IS_TOKEN]:"token"};function zw({converters:e,slateData:t}){return{root:{type:"root",children:Uw({canContainParagraphs:!0,converters:e,parentNodeType:"root",slateNodes:t}),direction:"ltr",format:"",indent:0,version:1}}}function Uw({canContainParagraphs:e,converters:t,parentNodeType:o,slateNodes:r}){if(!t?.length)return[];let n=t.find(i=>i.nodeTypes.includes("unknown"));return r.map((i,a)=>{if(!("type"in i))return e?Hw(t,i):pS(i);if(i.type==="p")return Hw(t,i);let s=t.find(d=>d.nodeTypes.includes(i.type));return s?s.converter({childIndex:a,converters:t,parentNodeType:o,slateNode:i}):(console.warn("slateToLexical > No converter found for node type: "+i.type),n?.converter({childIndex:a,converters:t,parentNodeType:o,slateNode:i}))})||[]}function Hw(e,t){return{type:"paragraph",children:Uw({canContainParagraphs:!1,converters:e,parentNodeType:"paragraph",slateNodes:t.children||[]}),direction:"ltr",format:"",indent:0,textFormat:0,version:1}}function pS(e){return{type:"text",detail:0,format:mS(e),mode:"normal",style:"",text:e.text,version:1}}function mS(e){let t=0;return e.bold&&(t=t|re.IS_BOLD),e.italic&&(t=t|re.IS_ITALIC),e.strikethrough&&(t=t|re.IS_STRIKETHROUGH),e.underline&&(t=t|re.IS_UNDERLINE),e.subscript&&(t=t|re.IS_SUBSCRIPT),e.superscript&&(t=t|re.IS_SUPERSCRIPT),e.code&&(t=t|re.IS_CODE),t}var Ww=l("@lexical/utils"),Kw=l("lexical"),qw=F(l("react"),1),Qw=l("react/jsx-runtime"),fS=qw.lazy(()=>Promise.resolve().then(()=>(Gw(),Vw)).then(e=>({default:e.UnknownConvertedNodeComponent}))),ps=class e extends Kw.DecoratorNode{__data;constructor({data:t,key:o}){super(o),this.__data=t}static clone(t){return new e({data:t.__data,key:t.__key})}static getType(){return"unknownConverted"}static importJSON(t){return gS({data:t.data})}canInsertTextAfter(){return!0}canInsertTextBefore(){return!0}createDOM(t){let o=document.createElement("span");return(0,Ww.addClassNamesToElement)(o,"unknownConverted"),o}decorate(){return(0,Qw.jsx)(fS,{data:this.__data})}exportJSON(){return{type:this.getType(),data:this.__data,version:1}}isInline(){return!0}updateDOM(t,o){return!1}};function gS({data:e}){return new ps({data:e})}var hS=X(({clientFunctions:e})=>{let t=Object.values(e);return{hooks:{load({incomingEditorState:o}){return!o||!Array.isArray(o)||"root"in o?o:zw({converters:t,slateData:o})}},nodes:[ps]}});var Nu=l("@lexical/selection"),lr=l("lexical");var Jw=[wo([{ChildComponent:Yl,isActive:({selection:e})=>{if(!(0,lr.$isRangeSelection)(e))return!1;for(let t of e.getNodes())if(!(0,lr.$isParagraphNode)(t)&&!(0,lr.$isParagraphNode)(t.getParent()))return!1;return!0},key:"paragraph",label:({i18n:e})=>e.t("lexical:paragraph:label2"),onSelect:({editor:e})=>{e.update(()=>{let t=(0,lr.$getSelection)();(0,Nu.$setBlocksType)(t,()=>(0,lr.$createParagraphNode)())})},order:1}])],bS=X({slashMenu:{groups:[Xt([{Icon:Yl,key:"paragraph",keywords:["normal","paragraph","p","text"],label:({i18n:e})=>e.t("lexical:paragraph:label"),onSelect:({editor:e})=>{e.update(()=>{let t=(0,lr.$getSelection)();(0,Nu.$setBlocksType)(t,()=>(0,lr.$createParagraphNode)())})}}])]},toolbarFixed:{groups:Jw},toolbarInline:{groups:Jw}});var b1=l("lexical");var Kn=l("react/jsx-runtime"),Ru=()=>(0,Kn.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Kn.jsx)("g",{clipPath:"url(#clip0_4397_10817)",children:(0,Kn.jsx)("path",{d:"M7.75 12.25L15.25 4.75M15.25 4.75H11.5M15.25 4.75V8.5M13 11.5V13.75C13 14.5784 12.3284 15.25 11.5 15.25H6.25C5.42157 15.25 4.75 14.5784 4.75 13.75V8.5C4.75 7.67157 5.42157 7 6.25 7H8.5",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,Kn.jsx)("defs",{children:(0,Kn.jsx)("clipPath",{id:"clip0_4397_10817",children:(0,Kn.jsx)("rect",{fill:"currentColor",height:"12",transform:"translate(4 4)",width:"12"})})})]});xc();Ga();var m1=l("@lexical/react/LexicalComposerContext.js"),u1=l("@lexical/utils");Ie();var To=l("lexical"),f1=l("react");var c1=l("@lexical/react/LexicalComposerContext.js");Ie();var vc=l("lexical"),qn=l("react");Ga();Cc();xc();var us=l("react/jsx-runtime"),wS=({editor:e,relationTo:t,replaceNodeKey:o,value:r})=>{o?e.update(()=>{let n=(0,vc.$getNodeByKey)(o);n&&n.replace(Ni({relationTo:t,value:r}))}):e.dispatchCommand(Du,{relationTo:t,value:r})},d1=({enabledCollectionSlugs:e})=>{let[t]=(0,c1.useLexicalComposerContext)(),[o,r]=(0,qn.useState)(()=>e[0]),[n,i]=(0,qn.useState)(null),[a,s,{closeDrawer:d,isDrawerOpen:c,openDrawer:p}]=Ci({collectionSlugs:e,selectedCollection:o});(0,qn.useEffect)(()=>t.registerCommand(Li,m=>(i(m?.replace?m?.replace.nodeKey:null),p(),!0),vc.COMMAND_PRIORITY_EDITOR),[t,p]);let u=(0,qn.useCallback)(({collectionSlug:m,docID:f})=>{wS({editor:t,relationTo:m,replaceNodeKey:n,value:f}),d()},[t,d,n]);return(0,qn.useEffect)(()=>{r(e[0])},[c,e]),(0,us.jsx)(a,{onSelect:u})},p1=e=>e?.enabledCollectionSlugs?.length>0?(0,us.jsx)(d1,{...e}):(0,us.jsx)(Wa,{...e,children:(0,us.jsx)(d1,{...e})});Ga();var h1=l("react/jsx-runtime"),Du=(0,To.createCommand)("INSERT_RELATIONSHIP_COMMAND"),g1=({clientProps:e})=>{let[t]=(0,m1.useLexicalComposerContext)(),{collections:o}=J(),r=null;return e?.enabledCollections?r=e?.enabledCollections:e?.disabledCollections&&(r=o.filter(({slug:n})=>!e?.disabledCollections?.includes(n)).map(({slug:n})=>n)),(0,f1.useEffect)(()=>{if(!t.hasNodes([an]))throw new Error("RelationshipPlugin: RelationshipNode not registered on editor");return t.registerCommand(Du,n=>{let i=(0,To.$getSelection)()||(0,To.$getPreviousSelection)();if((0,To.$isRangeSelection)(i)){let a=Ni(n);(0,u1.$insertNodeToNearestRoot)(a);let{focus:s}=i,d=s.getNode();(0,To.$isParagraphNode)(d)&&d.getTextContentSize()===0&&d.getParent().getChildren().filter(c=>(0,To.$isParagraphNode)(c)).length>1&&d.remove()}return!0},To.COMMAND_PRIORITY_EDITOR)},[t]),(0,h1.jsx)(p1,{enabledCollectionSlugs:r})};var kS=X({nodes:[an],plugins:[{Component:g1,position:"normal"}],slashMenu:{groups:[Xt([{Icon:Ru,key:"relationship",keywords:["relationship","relation","rel"],label:({i18n:e})=>e.t("lexical:relationship:label"),onSelect:({editor:e})=>{e.dispatchCommand(Li,{replace:!1})}}])]},toolbarFixed:{groups:[Zr([{ChildComponent:Ru,isActive:({selection:e})=>{if(!(0,b1.$isNodeSelection)(e)||!e.getNodes().length)return!1;let t=e.getNodes()[0];return ms(t)},key:"relationship",label:({i18n:e})=>e.t("lexical:relationship:label"),onSelect:({editor:e})=>{e.dispatchCommand(Li,{replace:!1})}}])]}});var P1=l("@lexical/react/LexicalComposerContext.js");Ie();var sn=F(l("react"),1),F1=l("react");Et();var x1=l("@lexical/utils"),y1=l("lexical"),sr=l("react");Et();var C1=l("react/jsx-runtime"),Mu="toolbar-popup__button",fs=({children:e,editor:t,item:o})=>{let[r,n]=(0,sr.useState)(!0),[i,a]=(0,sr.useState)(!1),[s,d]=(0,sr.useState)(Mu),c=be(),p=(0,sr.useCallback)(()=>{t.getEditorState().read(()=>{let u=(0,y1.$getSelection)();if(o.isActive){let m=o.isActive({editor:t,editorConfigContext:c,selection:u});i!==m&&a(m)}if(o.isEnabled){let m=o.isEnabled({editor:t,editorConfigContext:c,selection:u});r!==m&&n(m)}})},[i,t,c,r,o]);return(0,sr.useEffect)(()=>{p()},[p]),(0,sr.useEffect)(()=>(document.addEventListener("mouseup",p),()=>{document.removeEventListener("mouseup",p)}),[p]),(0,sr.useEffect)(()=>(0,x1.mergeRegister)(t.registerUpdateListener(()=>{p()})),[t,p]),(0,sr.useEffect)(()=>{d([Mu,r===!1?"disabled":"",i?"active":"",o?.key?`${Mu}-`+o.key:""].filter(Boolean).join(" "))},[r,i,s,o.key]),(0,C1.jsx)("button",{className:s,onClick:()=>{if(r!==!1)return t._updateTags=new Set([...t._updateTags,"toolbar"]),t.focus(()=>{o.onSelect({editor:t,isActive:i})}),!0},onMouseDown:u=>{u.preventDefault()},type:"button",children:e})};var ln=F(l("react"),1),T1=l("@lexical/utils");Ie();var E1=l("lexical");Et();var ze=F(l("react"),1),v1=l("react-dom"),Ho=l("react/jsx-runtime"),Iu="toolbar-popup__dropdown-item",_1=ze.default.createContext(null);function w1({active:e,children:t,editor:o,enabled:r,item:n,title:i}){let[a,s]=(0,ze.useState)(Iu);(0,ze.useEffect)(()=>{s([Iu,r===!1?"disabled":"",e?"active":"",n?.key?`${Iu}-${n.key}`:""].filter(Boolean).join(" "))},[r,e,a,n.key]);let d=(0,ze.useRef)(null),c=ze.default.useContext(_1);if(c===null)throw new Error("DropDownItem must be used within a DropDown");let{registerItem:p}=c;return(0,ze.useEffect)(()=>{d?.current!=null&&p(d)},[d,p]),(0,Ho.jsx)("button",{className:a,onClick:()=>{r!==!1&&(o._updateTags=new Set([...o._updateTags,"toolbar"]),o.focus(()=>{n.onSelect({editor:o,isActive:e})}))},onMouseDown:u=>{u.preventDefault()},ref:d,title:i,type:"button",children:t})}function TS({children:e,dropDownRef:t,itemsContainerClassNames:o,onClose:r}){let[n,i]=(0,ze.useState)(),[a,s]=(0,ze.useState)(),d=(0,ze.useCallback)(u=>{i(m=>m!=null?[...m,u]:[u])},[i]),c=u=>{if(n==null)return;let{key:m}=u;["ArrowDown","ArrowUp","Escape","Tab"].includes(m)&&u.preventDefault(),m==="Escape"||m==="Tab"?r():m==="ArrowUp"?s(f=>{if(f==null)return n[0];let h=n.indexOf(f)-1;return n[h===-1?n.length-1:h]}):m==="ArrowDown"&&s(f=>f==null?n[0]:n[n.indexOf(f)+1])},p=(0,ze.useMemo)(()=>({registerItem:d}),[d]);return(0,ze.useEffect)(()=>{n!=null&&a==null&&s(n[0]),a!=null&&a?.current!=null&&a.current.focus()},[n,a]),(0,Ho.jsx)(_1.Provider,{value:p,children:(0,Ho.jsx)("div",{className:(o??["toolbar-popup__dropdown-items"]).join(" "),onKeyDown:c,ref:t,children:e})})}function k1({Icon:e,buttonAriaLabel:t,buttonClassName:o,children:r,disabled:n=!1,itemsContainerClassNames:i,label:a,stopCloseOnClickSelf:s}){let d=(0,ze.useRef)(null),c=(0,ze.useRef)(null),[p,u]=(0,ze.useState)(!1),m=()=>{u(!1),c?.current!=null&&c.current.focus()};(0,ze.useEffect)(()=>{let h=c.current,g=d.current;if(p&&h!==null&&g!==null){let{left:x,top:y}=h.getBoundingClientRect(),v=window.scrollY||document.documentElement.scrollTop;g.style.top=`${y+v+h.offsetHeight+5}px`,g.style.left=`${Math.min(x-5,window.innerWidth-g.offsetWidth-20)}px`}},[d,c,p]),(0,ze.useEffect)(()=>{let h=c.current;if(h!==null&&p){let g=x=>{let{target:y}=x;s!=null&&d.current!=null&&d.current.contains(y)||h.contains(y)||u(!1)};return document.addEventListener("click",g),()=>{document.removeEventListener("click",g)}}},[d,c,p,s]);let f=(0,v1.createPortal)((0,Ho.jsx)(TS,{dropDownRef:d,itemsContainerClassNames:i,onClose:m,children:r}),document.body);return(0,Ho.jsxs)(ze.default.Fragment,{children:[(0,Ho.jsxs)("button",{"aria-label":t,className:o+(p?" active":""),disabled:n,onClick:h=>{h.preventDefault(),u(!p)},onMouseDown:h=>{h.preventDefault()},ref:c,type:"button",children:[e&&(0,Ho.jsx)(e,{}),a&&(0,Ho.jsx)("span",{className:"toolbar-popup__dropdown-label",children:a}),(0,Ho.jsx)("i",{className:"toolbar-popup__dropdown-caret"})]}),p&&(0,Ho.jsx)(ze.default.Fragment,{children:f})]})}var Qn=l("react/jsx-runtime"),Au="toolbar-popup__dropdown",ES=({active:e,anchorElem:t,editor:o,enabled:r,item:n})=>{let{i18n:i}=M();if(n.Component)return n?.Component&&(0,Qn.jsx)(n.Component,{active:e,anchorElem:t,editor:o,enabled:r,item:n},n.key);let a=n.key;return n.label&&(a=typeof n.label=="function"?n.label({i18n:i}):n.label),a.length>25&&(a=a.substring(0,25)+"..."),(0,Qn.jsxs)(w1,{active:e,editor:o,enabled:r,item:n,children:[n?.ChildComponent&&(0,Qn.jsx)(n.ChildComponent,{}),(0,Qn.jsx)("span",{className:"text",children:a})]},n.key)},Ri=({Icon:e,anchorElem:t,classNames:o,editor:r,groupKey:n,items:i,itemsContainerClassNames:a,label:s,maxActiveItems:d,onActiveChange:c})=>{let[p,u]=ln.default.useState([]),[m,f]=ln.default.useState([]),h=be(),g=(0,ln.useCallback)(()=>{r.getEditorState().read(()=>{let x=(0,E1.$getSelection)(),y=[],v=[],E=[];for(let w of i)w.isActive&&(!d||y.length<d)&&w.isActive({editor:r,editorConfigContext:h,selection:x})&&(y.push(w.key),v.push(w)),w.isEnabled?w.isEnabled({editor:r,editorConfigContext:h,selection:x})&&E.push(w.key):E.push(w.key);u(y),f(E),c&&c({activeItems:v})})},[r,h,i,d,c]);return(0,ln.useEffect)(()=>{g()},[g]),(0,ln.useEffect)(()=>(document.addEventListener("mouseup",g),()=>{document.removeEventListener("mouseup",g)}),[g]),(0,ln.useEffect)(()=>(0,T1.mergeRegister)(r.registerUpdateListener(()=>{g()})),[r,g]),(0,Qn.jsx)(k1,{Icon:e,buttonAriaLabel:`${n} dropdown`,buttonClassName:[Au,`${Au}-${n}`,...o||[]].filter(Boolean).join(" "),itemsContainerClassNames:[`${Au}-items`,...a||[]],label:s,children:i.length&&i.map(x=>(0,Qn.jsx)(ES,{active:p.includes(x.key),anchorElem:t,editor:r,enabled:m.includes(x.key),item:x},x.key))},n)};var mo=l("react/jsx-runtime");function PS({anchorElem:e,editor:t,item:o}){return o.Component?o?.Component&&(0,mo.jsx)(o.Component,{anchorElem:e,editor:t,item:o},o.key):(0,mo.jsx)(fs,{editor:t,item:o,children:o?.ChildComponent&&(0,mo.jsx)(o.ChildComponent,{})},o.key)}function FS({anchorElem:e,editor:t,editorConfig:o,group:r,index:n}){let{i18n:i}=M(),[a,s]=sn.useState(null),[d,c]=sn.useState(null);sn.useEffect(()=>{r?.type==="dropdown"&&r.items.length&&r.ChildComponent?c(()=>r.ChildComponent):c(null)},[r]);let p=({activeItems:u})=>{if(!u.length){r?.type==="dropdown"&&r.items.length&&r.ChildComponent?(c(()=>r.ChildComponent),s(null)):(c(null),s(null));return}let m=u[0],f=m.key;m.label&&(f=typeof m.label=="function"?m.label({i18n:i}):m.label),f.length>25&&(f=f.substring(0,25)+"..."),s(f),c(()=>m.ChildComponent)};return(0,mo.jsxs)("div",{className:`fixed-toolbar__group fixed-toolbar__group-${r.key}`,children:[r.type==="dropdown"&&r.items.length&&(d?(0,mo.jsx)(Ri,{Icon:d,anchorElem:e,editor:t,groupKey:r.key,items:r.items,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:1,onActiveChange:p}):(0,mo.jsx)(Ri,{anchorElem:e,editor:t,groupKey:r.key,items:r.items,itemsContainerClassNames:["fixed-toolbar__dropdown-items"],label:a,maxActiveItems:1,onActiveChange:p})),r.type==="buttons"&&r.items.length&&r.items.map(u=>(0,mo.jsx)(PS,{anchorElem:e,editor:t,item:u},u.key)),n<o.features.toolbarFixed?.groups.length-1&&(0,mo.jsx)("div",{className:"divider"})]},r.key)}function SS({anchorElem:e,clientProps:t,editor:o,editorConfig:r,parentWithFixedToolbar:n}){let i=sn.useRef(null),{y:a}=Wl(),s=(0,F1.useMemo)(()=>{if(!n||t?.disableIfParentHasFixedToolbar)return null;let c=n.editorContainerRef.current.previousElementSibling;for(;c;){if(c.classList.contains("fixed-toolbar"))return c;c=c.previousElementSibling}return null},[t?.disableIfParentHasFixedToolbar,n]);return Mr(()=>{if(!s)return;let d=i.current;if(!d)return;let c=d.getBoundingClientRect(),p=s.getBoundingClientRect();if(!(c.bottom<p.top||c.top>p.bottom))i.current.className="fixed-toolbar fixed-toolbar--overlapping",s.className="fixed-toolbar fixed-toolbar--hide";else{if(!i.current.classList.contains("fixed-toolbar--overlapping"))return;i.current.className="fixed-toolbar",s.className="fixed-toolbar"}},50,[i,s,a]),(0,mo.jsx)("div",{className:"fixed-toolbar",onFocus:d=>{d.stopPropagation()},ref:i,children:o.isEditable()&&(0,mo.jsx)(sn.Fragment,{children:r?.features&&r.features?.toolbarFixed?.groups.map((d,c)=>(0,mo.jsx)(FS,{anchorElem:e,editor:o,editorConfig:r,group:d,index:c},d.key))})})}var S1=e=>{if(e.parentEditor?.editorConfig){if(e.parentEditor?.editorConfig.resolvedFeatureMap.has("toolbarFixed"))return e.parentEditor;if(e.parentEditor)return S1(e.parentEditor)}return!1},L1=({anchorElem:e,clientProps:t})=>{let[o]=(0,P1.useLexicalComposerContext)(),r=be(),{editorConfig:n}=r,i=t.applyToFocusedEditor&&r.focusedEditor?.editor||o,a=t.applyToFocusedEditor&&r.focusedEditor?.editorConfig||n,s=S1(r);return t?.disableIfParentHasFixedToolbar&&s||!a?.features?.toolbarFixed?.groups?.length?null:(0,mo.jsx)(SS,{anchorElem:e,editor:i,editorConfig:a,parentWithFixedToolbar:s})};var LS=X({plugins:[{Component:L1,position:"aboveContainer"}]});var N1=l("@lexical/react/LexicalComposerContext.js"),$u=l("@lexical/utils"),zo=l("lexical"),$t=l("react"),Ka=F(l("react"),1),R1=l("react-dom");Et();function Ou(e,t){let o=e.getRangeAt(0),r;if(e.anchorNode===t){let n=t;for(;n.firstElementChild!=null;)n=n.firstElementChild;r=n.getBoundingClientRect()}else r=o.getBoundingClientRect();return r}function _c(e){let{alwaysDisplayOnTop:t=!1,anchorElem:o,anchorFlippedOffset:r=0,floatingElem:n,horizontalOffset:i=5,horizontalPosition:a="left",specialHandlingForCaret:s=!1,targetRect:d,verticalGap:c=10}=e,p=o.parentElement;if(d===null||p==null){n.style.opacity="0",n.style.transform="translate(-10000px, -10000px)";return}let u=n.getBoundingClientRect(),m=o.getBoundingClientRect(),f=p.getBoundingClientRect(),h=d.top-u.height-c,g=d.left-i;a==="center"&&(g=d.left+d.width/2-u.width/2);let x=0;return!t&&h<f.top&&!s&&(x=u.height+d.height+c*2,h+=x),a==="center"?g+u.width>f.right?g=f.right-u.width-i:g<f.left&&(g=f.left+i):g+u.width>f.right&&(g=f.right-u.width-i),g-=m.left,n.style.opacity="1",s&&r!==0?(h-=m.bottom-r+u.height-3,n.style.transform=`translate(${g}px, ${h}px) rotate(180deg)`):(h-=m.top,n.style.transform=`translate(${g}px, ${h}px)`),x}var no=l("react/jsx-runtime");function NS({anchorElem:e,editor:t,item:o}){return o.Component?o?.Component&&(0,no.jsx)(o.Component,{anchorElem:e,editor:t,item:o},o.key):(0,no.jsx)(fs,{editor:t,item:o,children:o?.ChildComponent&&(0,no.jsx)(o.ChildComponent,{})},o.key)}function RS({anchorElem:e,editor:t,group:o,index:r}){let{editorConfig:n}=be(),[i,a]=Ka.useState(null);Ka.useEffect(()=>{o?.type==="dropdown"&&o.items.length&&o.ChildComponent?a(()=>o.ChildComponent):a(null)},[o]);let s=({activeItems:d})=>{if(!d.length){o?.type==="dropdown"&&o.items.length&&o.ChildComponent?a(()=>o.ChildComponent):a(null);return}let c=d[0];a(()=>c.ChildComponent)};return(0,no.jsxs)("div",{className:`inline-toolbar-popup__group inline-toolbar-popup__group-${o.key}`,children:[o.type==="dropdown"&&o.items.length&&(i?(0,no.jsx)(Ri,{Icon:i,anchorElem:e,editor:t,groupKey:o.key,items:o.items,maxActiveItems:1,onActiveChange:s}):(0,no.jsx)(Ri,{anchorElem:e,editor:t,groupKey:o.key,items:o.items,maxActiveItems:1,onActiveChange:s})),o.type==="buttons"&&o.items.length&&o.items.map(d=>(0,no.jsx)(NS,{anchorElem:e,editor:t,item:d},d.key)),r<n.features.toolbarInline?.groups.length-1&&(0,no.jsx)("div",{className:"divider"})]},o.key)}function DS({anchorElem:e,editor:t}){let o=(0,$t.useRef)(null),r=(0,$t.useRef)(null),{editorConfig:n}=be(),i=(0,$t.useCallback)(()=>{if(o?.current){let c=o.current.style.opacity==="0",p=o.current.style.pointerEvents==="none";c||(o.current.style.opacity="0"),p||(o.current.style.pointerEvents="none")}},[o]),a=(0,$t.useCallback)(c=>{if(o?.current&&(c.buttons===1||c.buttons===3)){let p=o.current.style.opacity==="0",u=o.current.style.pointerEvents==="none";if(!p||!u){let m=c.clientX,f=c.clientY,h=document.elementFromPoint(m,f);o.current.contains(h)||i()}}},[i]),s=(0,$t.useCallback)(()=>{o?.current&&(o.current.style.opacity!=="1"&&(o.current.style.opacity="1"),o.current.style.pointerEvents!=="auto"&&(o.current.style.pointerEvents="auto"))},[]);(0,$t.useEffect)(()=>(document.addEventListener("mousemove",a),document.addEventListener("mouseup",s),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",s)}),[o,a,s]);let d=(0,$t.useCallback)(()=>{let c=(0,zo.$getSelection)(),p=window.getSelection();if(o.current===null)return;let u=e.querySelector(":scope > .link-editor"),m=u!==null&&"style"in u&&u?.style?.opacity==="1",f=t.getRootElement();if(c!==null&&p!==null&&!p.isCollapsed&&f!==null&&f.contains(p.anchorNode)){let h=Ou(p,f),g=_c({alwaysDisplayOnTop:m,anchorElem:e,floatingElem:o.current,horizontalPosition:"center",targetRect:h});r.current&&_c({anchorElem:o.current,anchorFlippedOffset:g,floatingElem:r.current,horizontalOffset:5,horizontalPosition:"center",specialHandlingForCaret:!0,targetRect:h,verticalGap:10})}else i()},[t,i,e]);return(0,$t.useEffect)(()=>{let c=e.parentElement,p=()=>{t.getEditorState().read(()=>{d()})};return window.addEventListener("resize",p),c&&c.addEventListener("scroll",p),()=>{window.removeEventListener("resize",p),c&&c.removeEventListener("scroll",p)}},[t,d,e]),(0,$t.useEffect)(()=>(t.getEditorState().read(()=>{d()}),(0,$u.mergeRegister)(t.registerUpdateListener(({editorState:c})=>{c.read(()=>{d()})}),t.registerCommand(zo.SELECTION_CHANGE_COMMAND,()=>(d(),!1),zo.COMMAND_PRIORITY_LOW))),[t,d]),(0,no.jsxs)("div",{className:"inline-toolbar-popup",ref:o,children:[(0,no.jsx)("div",{className:"caret",ref:r}),t.isEditable()&&(0,no.jsx)(Ka.Fragment,{children:n?.features&&n.features?.toolbarInline?.groups.map((c,p)=>(0,no.jsx)(RS,{anchorElem:e,editor:t,group:c,index:p},c.key))})]})}function MS(e,t){let[o,r]=(0,$t.useState)(!1),n=(0,$t.useCallback)(()=>{e.getEditorState().read(()=>{if(e.isComposing())return;let i=(0,zo.$getSelection)(),a=window.getSelection(),s=e.getRootElement();if(a!==null&&(!(0,zo.$isRangeSelection)(i)||s===null||!s.contains(a.anchorNode))){r(!1);return}if(!(0,zo.$isRangeSelection)(i))return;if(i.getTextContent()!==""){let c=i.getNodes(),p=!1;for(let u of c)if((0,zo.$isTextNode)(u)){r(!0),p=!0;break}p||r(!1)}else r(!1);let d=i.getTextContent().replace(/\n/g,"");if(!i.isCollapsed()&&d===""){r(!1);return}})},[e]);return(0,$t.useEffect)(()=>(document.addEventListener("selectionchange",n),document.addEventListener("mouseup",n),()=>{document.removeEventListener("selectionchange",n),document.removeEventListener("mouseup",n)}),[n]),(0,$t.useEffect)(()=>(0,$u.mergeRegister)(e.registerUpdateListener(()=>{n()}),e.registerRootListener(()=>{e.getRootElement()===null&&r(!1)})),[e,n]),o?(0,R1.createPortal)((0,no.jsx)(DS,{anchorElem:t,editor:e}),t):null}var D1=({anchorElem:e})=>{let[t]=(0,N1.useLexicalComposerContext)();return MS(t,e)};var IS=X({plugins:[{Component:D1,position:"floatingAnchorElem"}]});var Ja=l("@lexical/table");var Bu=l("react/jsx-runtime"),Hu=()=>(0,Bu.jsx)("svg",{fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:(0,Bu.jsx)("path",{clipRule:"evenodd",d:"M5.33333 4.5C4.8731 4.5 4.5 4.8731 4.5 5.33333V7.5H9.5V4.5H5.33333ZM5.33333 3.5C4.32081 3.5 3.5 4.32081 3.5 5.33333V14.6667C3.5 15.6792 4.32081 16.5 5.33333 16.5H14.6667C15.6792 16.5 16.5 15.6792 16.5 14.6667V5.33333C16.5 4.32081 15.6792 3.5 14.6667 3.5H5.33333ZM10.5 4.5V7.5H15.5V5.33333C15.5 4.8731 15.1269 4.5 14.6667 4.5H10.5ZM15.5 8.5H10.5V11.5H15.5V8.5ZM15.5 12.5H10.5V15.5H14.6667C15.1269 15.5 15.5 15.1269 15.5 14.6667V12.5ZM9.5 15.5V12.5H4.5V14.6667C4.5 15.1269 4.8731 15.5 5.33333 15.5H9.5ZM4.5 11.5H9.5V8.5H4.5V11.5Z",fill:"currentColor",fillRule:"evenodd"})});var Uu=l("@lexical/react/LexicalComposerContext"),A1=l("@lexical/react/useLexicalEditable"),ee=l("@lexical/table");Ie();var pt=l("lexical"),ju=F(l("react"),1),Pe=l("react"),Vu=l("react-dom");var qa=l("react/jsx-runtime"),M1=()=>(0,qa.jsxs)("svg",{fill:"none",height:"18",viewBox:"0 0 20 20",width:"18",xmlns:"http://www.w3.org/2000/svg",children:[(0,qa.jsx)("path",{d:"M5 11C5.55228 11 6 10.5523 6 10C6 9.44772 5.55228 9 5 9C4.44772 9 4 9.44772 4 10C4 10.5523 4.44772 11 5 11Z",fill:"currentColor"}),(0,qa.jsx)("path",{d:"M10 11C10.5523 11 11 10.5523 11 10C11 9.44772 10.5523 9 10 9C9.44772 9 9 9.44772 9 10C9 10.5523 9.44772 11 10 11Z",fill:"currentColor"}),(0,qa.jsx)("path",{d:"M15 11C15.5523 11 16 10.5523 16 10C16 9.44772 15.5523 9 15 9C14.4477 9 14 9.44772 14 10C14 10.5523 14.4477 11 15 11Z",fill:"currentColor"})]});var Ce=l("react/jsx-runtime");function zu(e){let t=e.getShape();return{columns:t.toX-t.fromX+1,rows:t.toY-t.fromY+1}}function AS(e){let t=e.getNodes(),o=[],r=null,n=null,i=0;for(let a=0;a<t.length;a++){let s=t[a];if((0,ee.$isTableCellNode)(s)){let d=s.getParentOrThrow();if(Ei((0,ee.$isTableRowNode)(d),"Expected CellNode to have a RowNode parent"),r!==d){if(n!==null&&i!==n)return!1;r!==null&&(n=i),r=d,i=0}let c=s.__colSpan;for(let p=0;p<c;p++)o[i+p]===void 0&&(o[i+p]=0),o[i+p]+=s.__rowSpan;i+=c}}return(n===null||i===n)&&o.every(a=>a===o[0])}function OS(){let e=(0,pt.$getSelection)();if((0,pt.$isRangeSelection)(e)&&!e.isCollapsed()||(0,ee.$isTableSelection)(e)&&!e.anchor.is(e.focus)||!(0,pt.$isRangeSelection)(e)&&!(0,ee.$isTableSelection)(e))return!1;let[t]=(0,ee.$getNodeTriplet)(e.anchor);return t.__colSpan>1||t.__rowSpan>1}function I1(e){if(e.getChildrenSize()!==1)return!1;let t=e.getFirstChildOrThrow();return!(!(0,pt.$isParagraphNode)(t)||!t.isEmpty())}function $S(e){let t=e.getLastDescendant();(0,pt.$isTextNode)(t)?t.select():(0,pt.$isElementNode)(t)?t.selectEnd():t!==null&&t.selectNext()}function BS({cellMerge:e,contextRef:t,onClose:o,setIsMenuOpen:r,tableCellNode:n}){let[i]=(0,Uu.useLexicalComposerContext)(),a=(0,Pe.useRef)(null),[s,d]=(0,Pe.useState)(n),[c,p]=(0,Pe.useState)({columns:1,rows:1}),[u,m]=(0,Pe.useState)(!1),[f,h]=(0,Pe.useState)(!1),{y:g}=Wl();(0,Pe.useEffect)(()=>i.registerMutationListener(ee.TableCellNode,k=>{k.get(s.getKey())==="updated"&&i.getEditorState().read(()=>{d(s.getLatest())})}),[i,s]),(0,Pe.useEffect)(()=>{i.getEditorState().read(()=>{let k=(0,pt.$getSelection)();if((0,ee.$isTableSelection)(k)){let P=zu(k);p(zu(k)),m(AS(k)&&(P.columns>1||P.rows>1))}h(OS())})},[i]),(0,Pe.useEffect)(()=>{let k=t.current,P=a.current,R=i.getRootElement();if(k!=null&&P!=null&&R!=null){let D=R.getBoundingClientRect(),I=k.getBoundingClientRect();P.style.opacity="1";let A=P.getBoundingClientRect(),O=5,B=I.right+O;if(B+A.width>window.innerWidth||B+A.width>D.right){let H=I.left-A.width-O;B=(H<0?O:H)+window.pageXOffset}P.style.left=`${B+window.pageXOffset}px`;let $=I.top;if($+A.height>window.innerHeight){let H=I.bottom-A.height;$=(H<0?O:H)+window.pageYOffset}P.style.top=`${$}px`}},[t,a,i,g]),(0,Pe.useEffect)(()=>{function k(P){a.current!=null&&t.current!=null&&!a.current.contains(P.target)&&!t.current.contains(P.target)&&r(!1)}return window.addEventListener("click",k),()=>window.removeEventListener("click",k)},[r,t]);let x=(0,Pe.useCallback)(()=>{i.update(()=>{if(s.isAttached()){let P=(0,ee.$getTableNodeFromLexicalNodeOrThrow)(s),R=i.getElementByKey(P.getKey());if(!R)throw new Error("Expected to find tableElement in DOM");let D=(0,ee.getTableObserverFromTableElement)(R);D!==null&&D.clearHighlight(),P.markDirty(),d(s.getLatest())}(0,pt.$getRoot)().selectStart()})},[i,s]),y=()=>{i.update(()=>{let k=(0,pt.$getSelection)();if((0,ee.$isTableSelection)(k)){let{columns:P,rows:R}=zu(k),D=k.getNodes(),I=null;for(let A=0;A<D.length;A++){let O=D[A];if((0,ee.$isTableCellNode)(O))if(I===null){O.setColSpan(P).setRowSpan(R),I=O;let B=I1(O),$;B&&(0,pt.$isParagraphNode)($=O.getFirstChild())&&$.remove()}else(0,ee.$isTableCellNode)(I)&&(I1(O)||I.append(...O.getChildren()),O.remove())}I!==null&&(I.getChildrenSize()===0&&I.append((0,pt.$createParagraphNode)()),$S(I)),o()}})},v=()=>{i.update(()=>{(0,ee.$unmergeCell)()})},E=(0,Pe.useCallback)(k=>{i.update(()=>{(0,ee.$insertTableRow__EXPERIMENTAL)(k),o()})},[i,o]),w=(0,Pe.useCallback)(k=>{i.update(()=>{for(let P=0;P<c.columns;P++)(0,ee.$insertTableColumn__EXPERIMENTAL)(k);o()})},[i,o,c.columns]),C=(0,Pe.useCallback)(()=>{i.update(()=>{(0,ee.$deleteTableRow__EXPERIMENTAL)(),o()})},[i,o]),S=(0,Pe.useCallback)(()=>{i.update(()=>{(0,ee.$getTableNodeFromLexicalNodeOrThrow)(s).remove(),x(),o()})},[i,s,x,o]),L=(0,Pe.useCallback)(()=>{i.update(()=>{(0,ee.$deleteTableColumn__EXPERIMENTAL)(),o()})},[i,o]),N=(0,Pe.useCallback)(()=>{i.update(()=>{let k=(0,ee.$getTableNodeFromLexicalNodeOrThrow)(s),P=(0,ee.$getTableRowIndexFromTableCellNode)(s),R=k.getChildren();if(P>=R.length||P<0)throw new Error("Expected table cell to be inside of table row.");let D=R[P];if(!(0,ee.$isTableRowNode)(D))throw new Error("Expected table row");D.getChildren().forEach(I=>{if(!(0,ee.$isTableCellNode)(I))throw new Error("Expected table cell");I.toggleHeaderStyle(ee.TableCellHeaderStates.ROW)}),x(),o()})},[i,s,x,o]),_=(0,Pe.useCallback)(()=>{i.update(()=>{let k=(0,ee.$getTableNodeFromLexicalNodeOrThrow)(s),P=(0,ee.$getTableColumnIndexFromTableCellNode)(s),R=k.getChildren(),D=Math.max(...R.map(I=>I.getChildren().length));if(P>=D||P<0)throw new Error("Expected table cell to be inside of table row.");for(let I=0;I<R.length;I++){let A=R[I];if(!(0,ee.$isTableRowNode)(A))throw new Error("Expected table row");let O=A.getChildren();if(P>=O.length)continue;let B=O[P];if(!(0,ee.$isTableCellNode)(B))throw new Error("Expected table cell");B.toggleHeaderStyle(ee.TableCellHeaderStates.COLUMN)}x(),o()})},[i,s,x,o]),T=null;return e&&(u?T=(0,Ce.jsx)("button",{className:"item","data-test-id":"table-merge-cells",onClick:()=>y(),type:"button",children:"Merge cells"}):f&&(T=(0,Ce.jsx)("button",{className:"item","data-test-id":"table-unmerge-cells",onClick:()=>v(),type:"button",children:"Unmerge cells"}))),(0,Vu.createPortal)((0,Ce.jsxs)("div",{className:"table-action-menu-dropdown",onClick:k=>{k.stopPropagation()},ref:a,children:[T?(0,Ce.jsxs)(ju.Fragment,{children:[T,(0,Ce.jsx)("hr",{})]}):null,(0,Ce.jsx)("button",{className:"item","data-test-id":"table-insert-row-above",onClick:()=>E(!1),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:["Insert ",c.rows===1?"row":`${c.rows} rows`," above"]})}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-insert-row-below",onClick:()=>E(!0),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:["Insert ",c.rows===1?"row":`${c.rows} rows`," below"]})}),(0,Ce.jsx)("hr",{}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-insert-column-before",onClick:()=>w(!1),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:["Insert ",c.columns===1?"column":`${c.columns} columns`," ","left"]})}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-insert-column-after",onClick:()=>w(!0),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:["Insert ",c.columns===1?"column":`${c.columns} columns`," ","right"]})}),(0,Ce.jsx)("hr",{}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-delete-columns",onClick:()=>L(),type:"button",children:(0,Ce.jsx)("span",{className:"text",children:"Delete column"})}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-delete-rows",onClick:()=>C(),type:"button",children:(0,Ce.jsx)("span",{className:"text",children:"Delete row"})}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-delete",onClick:()=>S(),type:"button",children:(0,Ce.jsx)("span",{className:"text",children:"Delete table"})}),(0,Ce.jsx)("hr",{}),(0,Ce.jsx)("button",{className:"item",onClick:()=>N(),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:[(s.__headerState&ee.TableCellHeaderStates.ROW)===ee.TableCellHeaderStates.ROW?"Remove":"Add"," ","row header"]})}),(0,Ce.jsx)("button",{className:"item","data-test-id":"table-column-header",onClick:()=>_(),type:"button",children:(0,Ce.jsxs)("span",{className:"text",children:[(s.__headerState&ee.TableCellHeaderStates.COLUMN)===ee.TableCellHeaderStates.COLUMN?"Remove":"Add"," ","column header"]})})]}),document.body)}function HS({anchorElem:e,cellMerge:t}){let[o]=(0,Uu.useLexicalComposerContext)(),r=(0,Pe.useRef)(null),n=(0,Pe.useRef)(null),[i,a]=(0,Pe.useState)(!1),[s,d]=(0,Pe.useState)(null),c=(0,Pe.useCallback)(()=>{let u=r.current,m=(0,pt.$getSelection)(),f=window.getSelection(),h=document.activeElement;if(m==null||u==null){d(null);return}let g=o.getRootElement();if((0,pt.$isRangeSelection)(m)&&g!==null&&f!==null&&g.contains(f.anchorNode)){let x=(0,ee.$getTableCellNodeFromLexicalNode)(m.anchor.getNode());if(x==null){d(null);return}if(o.getElementByKey(x.getKey())==null){d(null);return}d(x)}else h||d(null)},[o]);(0,Pe.useEffect)(()=>o.registerUpdateListener(()=>{o.getEditorState().read(()=>{c()})})),(0,Pe.useEffect)(()=>{let u=r.current;if(u!=null&&s!=null){let m=o.getElementByKey(s.getKey());if(m!=null){let f=m.getBoundingClientRect(),h=u.getBoundingClientRect(),g=e.getBoundingClientRect(),x=f.top-g.top+4,y=f.right-h.width-10-g.left;u.style.opacity="1",u.style.transform=`translate(${y}px, ${x}px)`}else u.style.opacity="0",u.style.transform="translate(-10000px, -10000px)"}},[r,s,o,e]);let p=(0,Pe.useRef)(s);return(0,Pe.useEffect)(()=>{p.current!==s&&a(!1),p.current=s},[p,s]),(0,Ce.jsx)("div",{className:"table-cell-action-button-container",ref:r,children:s!=null&&(0,Ce.jsxs)(ju.Fragment,{children:[(0,Ce.jsx)("button",{className:"table-cell-action-button",onClick:u=>{u.stopPropagation(),a(!i)},ref:n,type:"button",children:(0,Ce.jsx)(M1,{})}),i&&(0,Ce.jsx)(BS,{cellMerge:t,contextRef:n,onClose:()=>a(!1),setIsMenuOpen:a,tableCellNode:s})]})})}var O1=({anchorElem:e})=>{let t=(0,A1.useLexicalEditable)();return(0,Vu.createPortal)(t?(0,Ce.jsx)(HS,{anchorElem:e??document.body,cellMerge:!0}):null,e??document.body)};var $1=l("@lexical/react/LexicalComposerContext"),B1=l("@lexical/react/useLexicalEditable"),io=l("@lexical/table"),Gu=l("@lexical/utils"),wc=l("lexical"),H1=F(l("react"),1),nt=l("react"),z1=l("react-dom");var Di=l("react/jsx-runtime"),zS=33,US=50;function jS({editor:e}){let t=(0,nt.useRef)(null),o=(0,nt.useRef)(null),r=(0,nt.useRef)(null),n=(0,nt.useRef)(null),[i,a]=(0,nt.useState)(null),[s,d]=(0,nt.useState)(null),[c,p]=(0,nt.useState)(!1),[u,m]=(0,nt.useState)(null),f=(0,nt.useCallback)(()=>{d(null),t.current=null,m(null),n.current=null,r.current=null},[]),h=_=>(_.buttons&1)===1;(0,nt.useEffect)(()=>{let _=P=>{setTimeout(()=>{let R=P.target;if(u){a({x:P.clientX,y:P.clientY});return}if(p(h(P)),!(o.current&&o.current.contains(R))&&t.current!==R){t.current=R;let D=(0,io.getDOMCellFromTarget)(R);D&&s!==D?e.update(()=>{let I=(0,wc.$getNearestNodeFromDOMNode)(D.elem);if(!I)throw new Error("TableCellResizer: Table cell node not found.");let A=(0,io.$getTableNodeFromLexicalNodeOrThrow)(I),O=e.getElementByKey(A.getKey());if(!O)throw new Error("TableCellResizer: Table element not found.");t.current=R,r.current=O.getBoundingClientRect(),d(D)}):D==null&&f()}},0)},T=P=>{setTimeout(()=>{p(!0)},0)},k=P=>{setTimeout(()=>{p(!1)},0)};return document.addEventListener("mousemove",_),document.addEventListener("mousedown",T),document.addEventListener("mouseup",k),()=>{document.removeEventListener("mousemove",_),document.removeEventListener("mousedown",T),document.removeEventListener("mouseup",k)}},[s,u,e,f]);let g=_=>_==="bottom",x=(0,nt.useCallback)(_=>{if(!s)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{let T=(0,wc.$getNearestNodeFromDOMNode)(s.elem);if(!(0,io.$isTableCellNode)(T))throw new Error("TableCellResizer: Table cell node not found.");let k=(0,io.$getTableNodeFromLexicalNodeOrThrow)(T),P=(0,io.$getTableRowIndexFromTableCellNode)(T),R=k.getChildren();if(P>=R.length||P<0)throw new Error("Expected table cell to be inside of table row.");let D=R[P];if(!(0,io.$isTableRowNode)(D))throw new Error("Expected table row");let I=D.getHeight();if(I===void 0){let O=D.getChildren();I=Math.min(...O.map(B=>v(B,e)??1/0))}let A=Math.max(I+_,zS);D.setHeight(A)},{tag:"skip-scroll-into-view"})},[s,e]),y=(_,T)=>{let k=_.getWidth();if(k!==void 0)return k;let P=T.getElementByKey(_.getKey());if(P==null)return;let R=getComputedStyle(P);return P.clientWidth-parseFloat(R.paddingLeft)-parseFloat(R.paddingRight)},v=(_,T)=>T.getElementByKey(_.getKey())?.clientHeight,E=(_,T)=>{for(let k=0;k<T.length;k++)for(let P=0;P<T[k].length;P++)if(T[k][P].cell===_)return P},w=(0,nt.useCallback)(_=>{if(!s)throw new Error("TableCellResizer: Expected active cell.");e.update(()=>{let T=(0,wc.$getNearestNodeFromDOMNode)(s.elem);if(!(0,io.$isTableCellNode)(T))throw new Error("TableCellResizer: Table cell node not found.");let k=(0,io.$getTableNodeFromLexicalNodeOrThrow)(T),[P]=(0,io.$computeTableMapSkipCellCheck)(k,null,null),R=E(T,P);if(R===void 0)throw new Error("TableCellResizer: Table column not found.");for(let D=0;D<P.length;D++){let I=P[D][R];if(I.startRow===D&&(R===P[D].length-1||P[D][R].cell!==P[D][R+1].cell)){let A=y(I.cell,e);if(A===void 0)continue;let O=Math.max(A+_,US);I.cell.setWidth(O)}}},{tag:"skip-scroll-into-view"})},[s,e]),C=(0,nt.useCallback)(_=>{let T=k=>{if(k.preventDefault(),k.stopPropagation(),!s)throw new Error("TableCellResizer: Expected active cell.");if(n.current){let{x:P,y:R}=n.current;if(s===null)return;let D=(0,Gu.calculateZoomLevel)(k.target);if(g(_)){let I=(k.clientY-R)/D;x(I)}else{let I=(k.clientX-P)/D;w(I)}f(),document.removeEventListener("mouseup",T)}};return T},[s,f,w,x]),S=(0,nt.useCallback)(_=>T=>{if(T.preventDefault(),T.stopPropagation(),!s)throw new Error("TableCellResizer: Expected active cell.");n.current={x:T.clientX,y:T.clientY},a(n.current),m(_),document.addEventListener("mouseup",C(_))},[s,C]),N=(0,nt.useCallback)(()=>{if(s){let{height:_,left:T,top:k,width:P}=s.elem.getBoundingClientRect(),R=(0,Gu.calculateZoomLevel)(s.elem),D=10,I={bottom:{backgroundColor:"none",cursor:"row-resize",height:`${D}px`,left:`${window.pageXOffset+T}px`,top:`${window.pageYOffset+k+_-D/2}px`,width:`${P}px`},right:{backgroundColor:"none",cursor:"col-resize",height:`${_}px`,left:`${window.pageXOffset+T+P-D/2}px`,top:`${window.pageYOffset+k}px`,width:`${D}px`}},A=r.current;return u&&i&&A&&(g(u)?(I[u].left=`${window.pageXOffset+A.left}px`,I[u].top=`${window.pageYOffset+i.y/R}px`,I[u].height="3px",I[u].width=`${A.width}px`):(I[u].top=`${window.pageYOffset+A.top}px`,I[u].left=`${window.pageXOffset+i.x/R}px`,I[u].width="3px",I[u].height=`${A.height}px`),I[u].backgroundColor="#adf"),I}return{bottom:null,left:null,right:null,top:null}},[s,u,i])();return(0,Di.jsx)("div",{ref:o,children:s!=null&&!c&&(0,Di.jsxs)(H1.Fragment,{children:[(0,Di.jsx)("div",{className:"TableCellResizer__resizer TableCellResizer__ui",onMouseDown:S("right"),style:N.right||void 0}),(0,Di.jsx)("div",{className:"TableCellResizer__resizer TableCellResizer__ui",onMouseDown:S("bottom"),style:N.bottom||void 0})]})})}var U1=()=>{let[e]=(0,$1.useLexicalComposerContext)(),t=(0,B1.useLexicalEditable)();return(0,nt.useMemo)(()=>t?(0,z1.createPortal)((0,Di.jsx)(jS,{editor:e}),document.body):null,[e,t])};var j1=l("@lexical/react/LexicalComposerContext"),V1=l("@lexical/react/LexicalTablePlugin"),kc=l("@lexical/table"),G1=l("@lexical/utils");Ie();var Jn=l("lexical"),Lr=l("react"),W1=F(l("react"),1);ss();var Qa=l("react/jsx-runtime"),Tc=(0,Jn.createCommand)("OPEN_EMBED_DRAWER_COMMAND"),K1=(0,Lr.createContext)({cellEditorConfig:null,cellEditorPlugins:null,set:()=>{}}),Wu="lexical-table-create";function q1({children:e}){let[t,o]=(0,Lr.useState)({cellEditorConfig:null,cellEditorPlugins:null});return(0,Qa.jsx)(K1.Provider,{value:(0,Lr.useMemo)(()=>({cellEditorConfig:t.cellEditorConfig,cellEditorPlugins:t.cellEditorPlugins,set:(r,n)=>{o({cellEditorConfig:r,cellEditorPlugins:n})}}),[t.cellEditorConfig,t.cellEditorPlugins]),children:e})}var Q1=()=>{let[e]=(0,j1.useLexicalComposerContext)(),t=(0,Lr.useContext)(K1),{closeModal:o,toggleModal:r}=(0,Mo.useModal)();return(0,Lr.useEffect)(()=>(e.hasNodes([kc.TableNode])||Ei(!1,"TablePlugin: TableNode is not registered on editor"),(0,G1.mergeRegister)(e.registerCommand(Tc,()=>{let n=null;return e.getEditorState().read(()=>{let i=(0,Jn.$getSelection)();(0,Jn.$isRangeSelection)(i)&&(n=i)}),n&&r(Wu),!0},Jn.COMMAND_PRIORITY_EDITOR))),[t,e,r]),(0,Qa.jsxs)(W1.Fragment,{children:[(0,Qa.jsx)(Pi,{drawerSlug:Wu,drawerTitle:"Create Table",featureKey:"experimental_table",handleDrawerSubmit:(n,i)=>{o(Wu),!(!i.columns||!i.rows)&&e.dispatchCommand(kc.INSERT_TABLE_COMMAND,{columns:String(i.columns),rows:String(i.rows)})},schemaPathSuffix:"fields"}),(0,Qa.jsx)(V1.TablePlugin,{hasCellBackgroundColor:!1,hasCellMerge:!0})]})};var VS=X({nodes:[Ja.TableNode,Ja.TableCellNode,Ja.TableRowNode],plugins:[{Component:Q1,position:"normal"},{Component:U1,position:"normal"},{Component:O1,position:"floatingAnchorElem"}],providers:[q1],slashMenu:{groups:[Xt([{Icon:Hu,key:"table",keywords:["table"],label:"Table",onSelect:({editor:e})=>{e.dispatchCommand(Tc,{})}}])]},toolbarFixed:{groups:[Zr([{ChildComponent:Hu,key:"table",label:"Table",onSelect:({editor:e})=>{e.dispatchCommand(Tc,{})}}])]}});var fk=l("lexical");var Ya=l("react/jsx-runtime"),Ku=()=>(0,Ya.jsxs)("svg",{"aria-hidden":"true",className:"icon",fill:"none",focusable:"false",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg",children:[(0,Ya.jsx)("path",{d:"M14.6667 4H5.33333C4.59695 4 4 4.59695 4 5.33333V14.6667C4 15.403 4.59695 16 5.33333 16H14.6667C15.403 16 16 15.403 16 14.6667V5.33333C16 4.59695 15.403 4 14.6667 4Z",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ya.jsx)("path",{d:"M7.99984 9.33366C8.73622 9.33366 9.33317 8.73671 9.33317 8.00033C9.33317 7.26395 8.73622 6.66699 7.99984 6.66699C7.26346 6.66699 6.6665 7.26395 6.6665 8.00033C6.6665 8.73671 7.26346 9.33366 7.99984 9.33366Z",stroke:"#currentColor",strokeLinecap:"round",strokeLinejoin:"round"}),(0,Ya.jsx)("path",{d:"M16 11.9995L13.9427 9.94214C13.6926 9.69218 13.3536 9.55176 13 9.55176C12.6464 9.55176 12.3074 9.69218 12.0573 9.94214L6 15.9995",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round"})]});Ec();Xa();var ck=l("@lexical/react/LexicalComposerContext.js"),Sc=l("@lexical/utils");Ie();var Eo=l("lexical"),pk=l("react");var sk=l("@lexical/react/LexicalComposerContext.js");Ie();var Fc=l("lexical"),Za=l("react");Cc();Xa();Ec();var Pc=l("react/jsx-runtime"),JS=({editor:e,relationTo:t,replaceNodeKey:o,value:r})=>{o?e.update(()=>{let n=(0,Fc.$getNodeByKey)(o);n&&n.replace(Ii({data:{fields:null,relationTo:t,value:r}}))}):e.dispatchCommand(Ju,{fields:null,relationTo:t,value:r})},YS=({enabledCollectionSlugs:e})=>{let[t]=(0,sk.useLexicalComposerContext)(),[o,r]=(0,Za.useState)(null),[n,i,{closeDrawer:a,openDrawer:s}]=Ci({collectionSlugs:e,uploads:!0});(0,Za.useEffect)(()=>t.registerCommand(Mi,c=>(r(c?.replace?c?.replace.nodeKey:null),s(),!0),Fc.COMMAND_PRIORITY_EDITOR),[t,s]);let d=(0,Za.useCallback)(({collectionSlug:c,docID:p})=>{JS({editor:t,relationTo:c,replaceNodeKey:o,value:p}),a()},[t,a,o]);return(0,Pc.jsx)(n,{onSelect:d})},dk=e=>(0,Pc.jsx)(Wa,{...e,uploads:!0,children:(0,Pc.jsx)(YS,{...e})});Xa();var uk=l("react/jsx-runtime"),Ju=(0,Eo.createCommand)("INSERT_UPLOAD_COMMAND"),mk=({clientProps:e})=>{let[t]=(0,ck.useLexicalComposerContext)(),{collections:o}=J();return(0,pk.useEffect)(()=>{if(!t.hasNodes([dn]))throw new Error("UploadPlugin: UploadNode not registered on editor");return(0,Sc.mergeRegister)(t.registerCommand(Ju,r=>(t.update(()=>{let n=(0,Eo.$getSelection)()||(0,Eo.$getPreviousSelection)();if((0,Eo.$isRangeSelection)(n)){let i=Ii({data:{id:r.id,fields:r.fields,relationTo:r.relationTo,value:r.value}});(0,Sc.$insertNodeToNearestRoot)(i);let{focus:a}=n,s=a.getNode();(0,Eo.$isParagraphNode)(s)&&s.getTextContentSize()===0&&s.getParent().getChildren().filter(d=>(0,Eo.$isParagraphNode)(d)).length>1&&s.remove()}}),!0),Eo.COMMAND_PRIORITY_EDITOR))},[t]),(0,uk.jsx)(dk,{enabledCollectionSlugs:o.map(({slug:r})=>r)})};var XS=X({nodes:[dn],plugins:[{Component:mk,position:"normal"}],slashMenu:{groups:[Xt([{Icon:Ku,key:"upload",keywords:["upload","image","file","img","picture","photo","media"],label:({i18n:e})=>e.t("lexical:upload:label"),onSelect:({editor:e})=>{e.dispatchCommand(Mi,{replace:!1})}}])]},toolbarFixed:{groups:[Zr([{ChildComponent:Ku,isActive:({selection:e})=>{if(!(0,fk.$isNodeSelection)(e)||!e.getNodes().length)return!1;let t=e.getNodes()[0];return gs(t)},key:"upload",label:({i18n:e})=>e.t("lexical:upload:label"),onSelect:({editor:e})=>{e.dispatchCommand(Mi,{replace:!1})}}])]}});Ie();var Po=F(l("react"),1);var ji=l("react/jsx-runtime"),_2=(0,Po.lazy)(()=>Promise.resolve().then(()=>(OT(),AT)).then(e=>({default:e.RichText}))),w2=e=>{let{admin:t,lexicalEditorConfig:o,richTextComponentMap:r}=e,{schemaPath:n}=j(),i=Gl(),[a,s]=(0,Po.useState)(!1),[d,c]=(0,Po.useState)([]),[p,u]=(0,Po.useState)(null),m=r.get("features");m=m.sort((h,g)=>h.order-g.order);let f=0;for(let h of m){let g=Array.from(r.keys()).filter(x=>x.startsWith(`lexical_internal_feature.${h.key}.lexical_internal_components.`));f+=1,f+=g.length}return(0,Po.useEffect)(()=>{if(!a){let h=[],g=0;if(Object.entries(i).forEach(([x,y])=>{x.startsWith(`lexicalFeature.${n}.`)&&(x.includes(".lexical_internal_components.")||h.push(y),g++)}),g===f){c(h),s(!0);let x=qd({clientFunctions:i,schemaPath:n,unSanitizedEditorConfig:{features:h,lexical:o}});u(ql(o||Kl,x,t))}}},[t,a,i,n,m.length,d,p,o,f]),a?(0,ji.jsx)(Po.Suspense,{fallback:(0,ji.jsx)(eo,{height:"35vh"}),children:p&&(0,ji.jsx)(_2,{...e,editorConfig:p})}):(0,ji.jsx)(Po.default.Fragment,{children:Array.isArray(m)&&m.map(h=>{let x=Array.from(r.keys()).filter(y=>y.startsWith(`lexical_internal_feature.${h.key}.lexical_internal_components.`)).map(y=>r.get(y));return(0,ji.jsxs)(Po.default.Fragment,{children:[x?.length?x.map(y=>y):null,h.ClientFeature]},h.key)})})};Et();function Hc(e,t=new WeakMap){if(e===null)return null;if(t.has(e))return t.get(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(e instanceof Map){let o=new Map;t.set(e,o);for(let[r,n]of e.entries())o.set(r,Hc(n,t));return o}if(e instanceof Set){let o=new Set;t.set(e,o);for(let r of e.values())o.add(Hc(r,t));return o}if(typeof e=="object"&&e!==null){if("$$typeof"in e&&typeof e.$$typeof=="symbol")return e;let o=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));t.set(e,o);for(let r in e)(Object.prototype.hasOwnProperty.call(e,r)||Object.getOwnPropertySymbols(e).includes(r))&&(o[r]=Hc(e[r],t));return o}return e}Nc();function k2(...e){return e.filter(Boolean).join(" ")}el();rf();var zc=new WeakMap;function $T(e){let t=e.changedTouches[0];return t===void 0?null:[t.clientX,t.clientY]}function Uc(e,t){let o=zc.get(e);if(o===void 0){let r=new Set,n=a=>{o!==void 0&&(o.start=$T(a))},i=a=>{if(o===void 0)return;let{start:s}=o;if(s===null)return;let d=$T(a);for(let c of r)d!==null&&c([d[0]-s[0],d[1]-s[1]],a)};e.addEventListener("touchstart",n),e.addEventListener("touchend",i),o={handleTouchend:i,handleTouchstart:n,listeners:r,start:null},zc.set(e,o)}return o.listeners.add(t),()=>{T2(e,t)}}function T2(e,t){let o=zc.get(e);if(o===void 0)return;let{listeners:r}=o;r.delete(t),r.size===0&&(zc.delete(e),e.removeEventListener("touchstart",o.handleTouchstart),e.removeEventListener("touchend",o.handleTouchend))}function E2(e,t){return Uc(e,(o,r)=>{let[n,i]=o;n<0&&-n>Math.abs(i)&&t(n,r)})}function P2(e,t){return Uc(e,(o,r)=>{let[n,i]=o;n>0&&n>Math.abs(i)&&t(n,r)})}function F2(e,t){return Uc(e,(o,r)=>{let[n,i]=o;i<0&&-i>Math.abs(n)&&t(n,r)})}function S2(e,t){return Uc(e,(o,r)=>{let[n,i]=o;i>0&&i>Math.abs(n)&&t(n,r)})}hs();Qd();Xa();Ga();ss();})();
