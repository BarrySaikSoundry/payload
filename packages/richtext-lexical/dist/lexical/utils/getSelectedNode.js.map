{"version":3,"sources":["../../../src/lexical/utils/getSelectedNode.ts"],"sourcesContent":["import type { ElementNode, RangeSelection, TextNode } from 'lexical'\n\nimport { $isAtNodeEnd } from '@lexical/selection'\n\nexport function getSelectedNode(selection: RangeSelection): ElementNode | TextNode {\n  const { anchor } = selection\n  const { focus } = selection\n  const anchorNode = selection.anchor.getNode()\n  const focusNode = selection.focus.getNode()\n  if (anchorNode === focusNode) {\n    return anchorNode\n  }\n  const isBackward = selection.isBackward()\n  if (isBackward) {\n    return $isAtNodeEnd(focus) ? anchorNode : focusNode\n  }\n  return $isAtNodeEnd(anchor) ? anchorNode : focusNode\n}\n"],"names":["$isAtNodeEnd","getSelectedNode","selection","anchor","focus","anchorNode","getNode","focusNode","isBackward"],"mappings":"AAEA,SAASA,YAAY,QAAQ,qBAAoB;AAEjD,OAAO,SAASC,gBAAgBC,SAAyB;IACvD,MAAM,EAAEC,MAAM,EAAE,GAAGD;IACnB,MAAM,EAAEE,KAAK,EAAE,GAAGF;IAClB,MAAMG,aAAaH,UAAUC,MAAM,CAACG,OAAO;IAC3C,MAAMC,YAAYL,UAAUE,KAAK,CAACE,OAAO;IACzC,IAAID,eAAeE,WAAW;QAC5B,OAAOF;IACT;IACA,MAAMG,aAAaN,UAAUM,UAAU;IACvC,IAAIA,YAAY;QACd,OAAOR,aAAaI,SAASC,aAAaE;IAC5C;IACA,OAAOP,aAAaG,UAAUE,aAAaE;AAC7C"}