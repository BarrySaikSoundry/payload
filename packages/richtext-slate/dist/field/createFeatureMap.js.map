{"version":3,"sources":["../../src/field/createFeatureMap.ts"],"sourcesContent":["import type { EnabledFeatures } from './types.js'\n\nexport const createFeatureMap = (\n  richTextComponentMap: Map<string, React.ReactNode>,\n): EnabledFeatures => {\n  const features: EnabledFeatures = {\n    elements: {},\n    leaves: {},\n    plugins: [],\n  }\n\n  for (const [key, value] of richTextComponentMap) {\n    if (key.startsWith('leaf.button') || key.startsWith('leaf.component.')) {\n      const leafName = key.replace('leaf.button.', '').replace('leaf.component.', '')\n\n      if (!features.leaves[leafName]) {\n        features.leaves[leafName] = {\n          name: leafName,\n          Button: null,\n          Leaf: null,\n        }\n      }\n\n      if (key.startsWith('leaf.button.')) features.leaves[leafName].Button = value\n      if (key.startsWith('leaf.component.')) features.leaves[leafName].Leaf = value\n    }\n\n    if (key.startsWith('element.button.') || key.startsWith('element.component.')) {\n      const elementName = key.replace('element.button.', '').replace('element.component.', '')\n\n      if (!features.elements[elementName]) {\n        features.elements[elementName] = {\n          name: elementName,\n          Button: null,\n          Element: null,\n        }\n      }\n\n      if (key.startsWith('element.button.')) features.elements[elementName].Button = value\n      if (key.startsWith('element.component.')) features.elements[elementName].Element = value\n    }\n\n    if (key.startsWith('leaf.plugin.') || key.startsWith('element.plugin.')) {\n      features.plugins.push(value)\n    }\n  }\n\n  return features\n}\n"],"names":["createFeatureMap","richTextComponentMap","features","elements","leaves","plugins","key","value","startsWith","leafName","replace","name","Button","Leaf","elementName","Element","push"],"mappings":"AAEA,OAAO,MAAMA,mBAAmB,CAC9BC;IAEA,MAAMC,WAA4B;QAChCC,UAAU,CAAC;QACXC,QAAQ,CAAC;QACTC,SAAS,EAAE;IACb;IAEA,KAAK,MAAM,CAACC,KAAKC,MAAM,IAAIN,qBAAsB;QAC/C,IAAIK,IAAIE,UAAU,CAAC,kBAAkBF,IAAIE,UAAU,CAAC,oBAAoB;YACtE,MAAMC,WAAWH,IAAII,OAAO,CAAC,gBAAgB,IAAIA,OAAO,CAAC,mBAAmB;YAE5E,IAAI,CAACR,SAASE,MAAM,CAACK,SAAS,EAAE;gBAC9BP,SAASE,MAAM,CAACK,SAAS,GAAG;oBAC1BE,MAAMF;oBACNG,QAAQ;oBACRC,MAAM;gBACR;YACF;YAEA,IAAIP,IAAIE,UAAU,CAAC,iBAAiBN,SAASE,MAAM,CAACK,SAAS,CAACG,MAAM,GAAGL;YACvE,IAAID,IAAIE,UAAU,CAAC,oBAAoBN,SAASE,MAAM,CAACK,SAAS,CAACI,IAAI,GAAGN;QAC1E;QAEA,IAAID,IAAIE,UAAU,CAAC,sBAAsBF,IAAIE,UAAU,CAAC,uBAAuB;YAC7E,MAAMM,cAAcR,IAAII,OAAO,CAAC,mBAAmB,IAAIA,OAAO,CAAC,sBAAsB;YAErF,IAAI,CAACR,SAASC,QAAQ,CAACW,YAAY,EAAE;gBACnCZ,SAASC,QAAQ,CAACW,YAAY,GAAG;oBAC/BH,MAAMG;oBACNF,QAAQ;oBACRG,SAAS;gBACX;YACF;YAEA,IAAIT,IAAIE,UAAU,CAAC,oBAAoBN,SAASC,QAAQ,CAACW,YAAY,CAACF,MAAM,GAAGL;YAC/E,IAAID,IAAIE,UAAU,CAAC,uBAAuBN,SAASC,QAAQ,CAACW,YAAY,CAACC,OAAO,GAAGR;QACrF;QAEA,IAAID,IAAIE,UAAU,CAAC,mBAAmBF,IAAIE,UAAU,CAAC,oBAAoB;YACvEN,SAASG,OAAO,CAACW,IAAI,CAACT;QACxB;IACF;IAEA,OAAOL;AACT,EAAC"}